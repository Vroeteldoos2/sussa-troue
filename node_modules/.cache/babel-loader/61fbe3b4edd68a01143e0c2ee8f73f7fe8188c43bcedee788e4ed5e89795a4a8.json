{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drago\\\\OneDrive\\\\Desktop\\\\sussa-troue\\\\src\\\\pages\\\\RSVPPage.jsx\",\n  _s = $RefreshSig$();\n// File: src/pages/RSVPPage.jsx\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { supabase } from \"../supabaseClient\";\nimport { toast } from \"react-hot-toast\";\n\n/**\n * =========================\n * RSVP GATE CONFIG\n * =========================\n * - Flip RSVPS_OPEN to true to reopen RSVPs immediately.\n * - Or set RSVPS_CLOSES_AT to auto-close after a date/time.\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RSVPS_OPEN = false; // <- set to true to reopen RSVPs for new users\nconst RSVPS_CLOSES_AT = null; // e.g. new Date(\"2025-09-30T23:59:59+02:00\")\n\nconst BG_URL = \"https://cyxeucwesqzwlisgveiz.supabase.co/storage/v1/object/public/public-assets/flowers-8309997.jpg\";\nexport default function RSVPPage() {\n  _s();\n  const navigate = useNavigate();\n  const [form, setForm] = useState({\n    full_name: \"\",\n    email: \"\",\n    attending: true,\n    dietary: \"\",\n    songs: \"\",\n    has_plus_one: false,\n    plus_one_name: \"\",\n    plus_one_dietary: \"\",\n    has_children: false,\n    children: []\n  });\n  const [authEmail, setAuthEmail] = useState(\"\");\n  const [userId, setUserId] = useState(null);\n  const [behalfList, setBehalfList] = useState([]);\n  const [loading, setLoading] = useState(false); // submit loading\n  const [pageLoading, setPageLoading] = useState(true); // initial page gate\n  const [formErr, setFormErr] = useState(\"\");\n  const [rsvpsClosedForThisUser, setRsvpsClosedForThisUser] = useState(false);\n  const isValidEmail = useMemo(() => v => /^\\S+@\\S+\\.\\S+$/.test(v || \"\"), []);\n\n  // ---------- On mount: get user + email, and check if RSVP already exists\n  useEffect(() => {\n    (async () => {\n      setPageLoading(true);\n      const {\n        data,\n        error\n      } = await supabase.auth.getUser();\n      if (error) {\n        console.error(error);\n        toast.error(\"Auth error. Please log in again.\");\n        navigate(\"/login\");\n        return;\n      }\n      const user = (data === null || data === void 0 ? void 0 : data.user) || null;\n      if (!user) {\n        toast(\"Please log in to RSVP.\");\n        navigate(\"/login\");\n        return;\n      }\n      const email = user.email || \"\";\n      const clean = email.toLowerCase().trim();\n      setAuthEmail(clean);\n      setUserId(user.id);\n      setForm(f => ({\n        ...f,\n        email: clean\n      }));\n\n      // Check if RSVP exists by user_id\n      const {\n        data: existing,\n        error: rsvpErr\n      } = await supabase.from(\"rsvps\").select(\"id\").eq(\"user_id\", user.id).limit(1).maybeSingle();\n      if (rsvpErr) {\n        console.error(rsvpErr);\n        toast.error(\"Could not check RSVP status.\");\n        setPageLoading(false);\n        return;\n      }\n      if (existing) {\n        // Existing RSVP holders go straight to the view page\n        navigate(\"/view-rsvp\", {\n          replace: true\n        });\n        return;\n      }\n\n      // New user (no RSVP yet) â†’ decide if closed or open\n      const isDateClosed = RSVPS_CLOSES_AT instanceof Date ? new Date() > RSVPS_CLOSES_AT : false;\n      if (!RSVPS_OPEN || isDateClosed) {\n        setRsvpsClosedForThisUser(true);\n      }\n      setPageLoading(false);\n    })();\n  }, [navigate]);\n  const setField = (key, val) => setForm(f => ({\n    ...f,\n    [key]: val\n  }));\n  const togglePlusOne = checked => setForm(f => ({\n    ...f,\n    has_plus_one: checked,\n    ...(checked ? {} : {\n      plus_one_name: \"\",\n      plus_one_dietary: \"\"\n    })\n  }));\n  const toggleChildren = checked => setForm(f => ({\n    ...f,\n    has_children: checked,\n    ...(checked ? {} : {\n      children: []\n    })\n  }));\n  const addChild = () => setForm(f => ({\n    ...f,\n    children: [...f.children, {\n      name: \"\",\n      dietary: \"\"\n    }]\n  }));\n  const updateChild = (i, key, val) => setForm(f => {\n    const copy = [...f.children];\n    copy[i] = {\n      ...copy[i],\n      [key]: val\n    };\n    return {\n      ...f,\n      children: copy\n    };\n  });\n  const addBehalfGuest = () => setBehalfList(l => [...l, {\n    full_name: \"\",\n    attending: true,\n    dietary: \"\",\n    songs: \"\"\n  }]);\n  const updateBehalfGuest = (i, key, val) => setBehalfList(l => {\n    const copy = [...l];\n    copy[i] = {\n      ...copy[i],\n      [key]: val\n    };\n    return copy;\n  });\n  const submit = async e => {\n    e.preventDefault();\n    if (loading) return;\n    setFormErr(\"\");\n    if (!userId || !authEmail) {\n      toast.error(\"No account found. Please log in again.\");\n      return;\n    }\n\n    // Gate: defensive check â€” if someone bypasses UI when closed\n    const isDateClosed = RSVPS_CLOSES_AT instanceof Date ? new Date() > RSVPS_CLOSES_AT : false;\n    if (!RSVPS_OPEN || isDateClosed) {\n      toast.error(\"RSVPs are currently closed.\");\n      return;\n    }\n    const fullName = (form.full_name || \"\").trim();\n    if (!fullName) return setFormErr(\"Please enter your full name.\");\n    if (!isValidEmail(authEmail)) return setFormErr(\"Your account email looks invalid.\");\n    const payload = {\n      ...form,\n      user_id: userId,\n      full_name: fullName,\n      email: authEmail,\n      attending: !!form.attending,\n      has_plus_one: !!form.has_plus_one,\n      has_children: !!form.has_children,\n      submitted_by: authEmail\n    };\n    if (!payload.has_plus_one) {\n      payload.plus_one_name = \"\";\n      payload.plus_one_dietary = \"\";\n    }\n    if (!payload.has_children) {\n      payload.children = [];\n    } else if (!Array.isArray(payload.children)) {\n      payload.children = [];\n    }\n    setLoading(true);\n    try {\n      // Insert NEW primary RSVP\n      const {\n        error\n      } = await supabase.from(\"rsvps\").insert([payload]);\n      if (error) throw error;\n\n      // Insert behalf-of RSVPs\n      for (const g of behalfList) {\n        const gName = (g.full_name || \"\").trim();\n        if (!gName) continue;\n        const gPayload = {\n          ...g,\n          full_name: gName,\n          attending: !!g.attending,\n          submitted_by: authEmail,\n          email: authEmail,\n          user_id: null\n        };\n        const {\n          error: e2\n        } = await supabase.from(\"rsvps\").insert([gPayload]);\n        if (e2) throw e2;\n      }\n      toast.success(\"RSVP submitted! ðŸŒ»\");\n      navigate(\"/view-rsvp\", {\n        replace: true\n      });\n    } catch (err) {\n      console.error(err);\n      toast.error((err === null || err === void 0 ? void 0 : err.message) || \"Could not submit RSVP. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (pageLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen w-full flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-white/90\",\n        children: \"Loading\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this);\n  }\n\n  // NEW USERS (no RSVP) & closed gate â†’ Closed screen\n  if (rsvpsClosedForThisUser) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen w-full bg-center bg-cover relative\",\n      style: {\n        backgroundImage: `url(${BG_URL})`\n      },\n      \"aria-hidden\": \"true\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 bg-black/40 backdrop-blur-[1px]\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative z-10 max-w-3xl mx-auto px-4 py-16\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"text-center my-6 text-white drop-shadow\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-extrabold\",\n            children: [\"RSVP for\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-yellow-200\",\n              children: \"Abraham & Jesse-Lee\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-white/90\",\n            children: \"We can\\u2019t wait to celebrate with you.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/90 rounded-2xl shadow-xl border border-white/60 p-8 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold mb-2\",\n            children: \"RSVPs are now closed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-700\",\n            children: [\"Thanks for your interest. We\\u2019re no longer accepting new RSVPs. If you believe this is a mistake, please contact the organizers.\", /*#__PURE__*/_jsxDEV(\"center\", {\n              children: \"Jesse - +27 73 289 2430 Abraham - +27 66 200 8218\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 flex items-center justify-center gap-3\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/\",\n              className: \"btn-outline inline-block px-4 py-2 rounded-lg border\",\n              children: \"Back to Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 text-sm text-gray-500\",\n            children: [\"Logged in as \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: authEmail\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 28\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this);\n  }\n\n  // If we reach here: new user (no RSVP) AND the gate is open â†’ show the full form\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen w-full bg-center bg-cover relative\",\n    style: {\n      backgroundImage: `url(${BG_URL})`\n    },\n    \"aria-hidden\": \"true\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-black/30 backdrop-blur-[1px]\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative z-10 max-w-5xl mx-auto px-4 py-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"text-center my-6 text-white drop-shadow\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-extrabold\",\n          children: [\"RSVP for\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-yellow-200\",\n            children: \"Abraham & Jesse-Lee\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white/90\",\n          children: \"We can\\u2019t wait to celebrate with you.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: submit,\n        className: \"bg-white/85 rounded-2xl shadow-xl border border-white/60 p-6 md:p-8 space-y-4\",\n        children: [!!formErr && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2\",\n          children: formErr\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"full_name\",\n            className: \"input\",\n            placeholder: \"Full Name\",\n            value: form.full_name,\n            onChange: e => setField(\"full_name\", e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"email\",\n            className: \"input opacity-80\",\n            type: \"email\",\n            placeholder: \"Email\",\n            value: form.email,\n            disabled: true,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"attending\",\n            className: \"input\",\n            value: String(form.attending),\n            onChange: e => setField(\"attending\", e.target.value === \"true\"),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"true\",\n              children: \"Attending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"false\",\n              children: \"Not Attending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"dietary\",\n            className: \"input\",\n            placeholder: \"Dietary Requirements\",\n            value: form.dietary,\n            onChange: e => setField(\"dietary\", e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"songs\",\n          className: \"input\",\n          placeholder: \"Song requests (comma-separated)\",\n          value: form.songs,\n          onChange: e => setField(\"songs\", e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-4 bg-white/70 border border-white/60 rounded-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: form.has_plus_one,\n              onChange: e => togglePlusOne(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold text-soil-700\",\n              children: \"Bringing a plus one?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), form.has_plus_one && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 grid md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              placeholder: \"Plus One Name\",\n              value: form.plus_one_name,\n              onChange: e => setField(\"plus_one_name\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              placeholder: \"Plus One Dietary\",\n              value: form.plus_one_dietary,\n              onChange: e => setField(\"plus_one_dietary\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-4 bg-white/70 border border-white/60 rounded-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: form.has_children,\n              onChange: e => toggleChildren(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold text-soil-700\",\n              children: \"Bringing children?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), form.has_children && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 space-y-3\",\n            children: [form.children.map((c, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid md:grid-cols-2 gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                placeholder: \"Child Name\",\n                value: c.name,\n                onChange: e => updateChild(i, \"name\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                placeholder: \"Child Dietary\",\n                value: c.dietary,\n                onChange: e => updateChild(i, \"dietary\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 21\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-outline\",\n              onClick: addChild,\n              children: \"+ Add Child\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-4 bg-white/70 border border-white/60 rounded-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-bold text-soil-700\",\n              children: \"RSVP on behalf of others\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-outline\",\n              onClick: addBehalfGuest,\n              children: \"+ Add Guest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 space-y-3\",\n            children: behalfList.map((g, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid md:grid-cols-4 gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                placeholder: \"Full Name\",\n                value: g.full_name,\n                onChange: e => updateBehalfGuest(idx, \"full_name\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"input\",\n                value: String(g.attending),\n                onChange: e => updateBehalfGuest(idx, \"attending\", e.target.value === \"true\"),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"true\",\n                  children: \"Attending\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"false\",\n                  children: \"Not Attending\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                placeholder: \"Dietary\",\n                value: g.dietary,\n                onChange: e => updateBehalfGuest(idx, \"dietary\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                placeholder: \"Songs\",\n                value: g.songs,\n                onChange: e => updateBehalfGuest(idx, \"songs\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 19\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            type: \"submit\",\n            disabled: loading,\n            children: loading ? \"Submittingâ€¦\" : \"Submit RSVP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 277,\n    columnNumber: 5\n  }, this);\n}\n_s(RSVPPage, \"3CLzfMErQ7xcfoLmMZ4ibWu+8bc=\", false, function () {\n  return [useNavigate];\n});\n_c = RSVPPage;\nvar _c;\n$RefreshReg$(_c, \"RSVPPage\");","map":{"version":3,"names":["useEffect","useMemo","useState","useNavigate","supabase","toast","jsxDEV","_jsxDEV","RSVPS_OPEN","RSVPS_CLOSES_AT","BG_URL","RSVPPage","_s","navigate","form","setForm","full_name","email","attending","dietary","songs","has_plus_one","plus_one_name","plus_one_dietary","has_children","children","authEmail","setAuthEmail","userId","setUserId","behalfList","setBehalfList","loading","setLoading","pageLoading","setPageLoading","formErr","setFormErr","rsvpsClosedForThisUser","setRsvpsClosedForThisUser","isValidEmail","v","test","data","error","auth","getUser","console","user","clean","toLowerCase","trim","id","f","existing","rsvpErr","from","select","eq","limit","maybeSingle","replace","isDateClosed","Date","setField","key","val","togglePlusOne","checked","toggleChildren","addChild","name","updateChild","i","copy","addBehalfGuest","l","updateBehalfGuest","submit","e","preventDefault","fullName","payload","user_id","submitted_by","Array","isArray","insert","g","gName","gPayload","e2","success","err","message","className","fileName","_jsxFileName","lineNumber","columnNumber","style","backgroundImage","href","onSubmit","placeholder","value","onChange","target","required","type","disabled","String","map","c","onClick","idx","_c","$RefreshReg$"],"sources":["C:/Users/drago/OneDrive/Desktop/sussa-troue/src/pages/RSVPPage.jsx"],"sourcesContent":["// File: src/pages/RSVPPage.jsx\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { supabase } from \"../supabaseClient\";\nimport { toast } from \"react-hot-toast\";\n\n/**\n * =========================\n * RSVP GATE CONFIG\n * =========================\n * - Flip RSVPS_OPEN to true to reopen RSVPs immediately.\n * - Or set RSVPS_CLOSES_AT to auto-close after a date/time.\n */\nconst RSVPS_OPEN = false; // <- set to true to reopen RSVPs for new users\nconst RSVPS_CLOSES_AT = null; // e.g. new Date(\"2025-09-30T23:59:59+02:00\")\n\nconst BG_URL =\n  \"https://cyxeucwesqzwlisgveiz.supabase.co/storage/v1/object/public/public-assets/flowers-8309997.jpg\";\n\nexport default function RSVPPage() {\n  const navigate = useNavigate();\n\n  const [form, setForm] = useState({\n    full_name: \"\",\n    email: \"\",\n    attending: true,\n    dietary: \"\",\n    songs: \"\",\n    has_plus_one: false,\n    plus_one_name: \"\",\n    plus_one_dietary: \"\",\n    has_children: false,\n    children: [],\n  });\n\n  const [authEmail, setAuthEmail] = useState(\"\");\n  const [userId, setUserId] = useState(null);\n  const [behalfList, setBehalfList] = useState([]);\n  const [loading, setLoading] = useState(false); // submit loading\n  const [pageLoading, setPageLoading] = useState(true); // initial page gate\n  const [formErr, setFormErr] = useState(\"\");\n  const [rsvpsClosedForThisUser, setRsvpsClosedForThisUser] = useState(false);\n\n  const isValidEmail = useMemo(\n    () => (v) => /^\\S+@\\S+\\.\\S+$/.test(v || \"\"),\n    []\n  );\n\n  // ---------- On mount: get user + email, and check if RSVP already exists\n  useEffect(() => {\n    (async () => {\n      setPageLoading(true);\n      const { data, error } = await supabase.auth.getUser();\n      if (error) {\n        console.error(error);\n        toast.error(\"Auth error. Please log in again.\");\n        navigate(\"/login\");\n        return;\n      }\n\n      const user = data?.user || null;\n      if (!user) {\n        toast(\"Please log in to RSVP.\");\n        navigate(\"/login\");\n        return;\n      }\n\n      const email = user.email || \"\";\n      const clean = email.toLowerCase().trim();\n      setAuthEmail(clean);\n      setUserId(user.id);\n      setForm((f) => ({ ...f, email: clean }));\n\n      // Check if RSVP exists by user_id\n      const { data: existing, error: rsvpErr } = await supabase\n        .from(\"rsvps\")\n        .select(\"id\")\n        .eq(\"user_id\", user.id)\n        .limit(1)\n        .maybeSingle();\n\n      if (rsvpErr) {\n        console.error(rsvpErr);\n        toast.error(\"Could not check RSVP status.\");\n        setPageLoading(false);\n        return;\n      }\n\n      if (existing) {\n        // Existing RSVP holders go straight to the view page\n        navigate(\"/view-rsvp\", { replace: true });\n        return;\n      }\n\n      // New user (no RSVP yet) â†’ decide if closed or open\n      const isDateClosed =\n        RSVPS_CLOSES_AT instanceof Date\n          ? new Date() > RSVPS_CLOSES_AT\n          : false;\n\n      if (!RSVPS_OPEN || isDateClosed) {\n        setRsvpsClosedForThisUser(true);\n      }\n\n      setPageLoading(false);\n    })();\n  }, [navigate]);\n\n  const setField = (key, val) => setForm((f) => ({ ...f, [key]: val }));\n  const togglePlusOne = (checked) =>\n    setForm((f) => ({\n      ...f,\n      has_plus_one: checked,\n      ...(checked ? {} : { plus_one_name: \"\", plus_one_dietary: \"\" }),\n    }));\n  const toggleChildren = (checked) =>\n    setForm((f) => ({\n      ...f,\n      has_children: checked,\n      ...(checked ? {} : { children: [] }),\n    }));\n  const addChild = () =>\n    setForm((f) => ({\n      ...f,\n      children: [...f.children, { name: \"\", dietary: \"\" }],\n    }));\n  const updateChild = (i, key, val) =>\n    setForm((f) => {\n      const copy = [...f.children];\n      copy[i] = { ...copy[i], [key]: val };\n      return { ...f, children: copy };\n    });\n\n  const addBehalfGuest = () =>\n    setBehalfList((l) => [\n      ...l,\n      { full_name: \"\", attending: true, dietary: \"\", songs: \"\" },\n    ]);\n  const updateBehalfGuest = (i, key, val) =>\n    setBehalfList((l) => {\n      const copy = [...l];\n      copy[i] = { ...copy[i], [key]: val };\n      return copy;\n    });\n\n  const submit = async (e) => {\n    e.preventDefault();\n    if (loading) return;\n    setFormErr(\"\");\n\n    if (!userId || !authEmail) {\n      toast.error(\"No account found. Please log in again.\");\n      return;\n    }\n\n    // Gate: defensive check â€” if someone bypasses UI when closed\n    const isDateClosed =\n      RSVPS_CLOSES_AT instanceof Date ? new Date() > RSVPS_CLOSES_AT : false;\n    if (!RSVPS_OPEN || isDateClosed) {\n      toast.error(\"RSVPs are currently closed.\");\n      return;\n    }\n\n    const fullName = (form.full_name || \"\").trim();\n    if (!fullName) return setFormErr(\"Please enter your full name.\");\n    if (!isValidEmail(authEmail))\n      return setFormErr(\"Your account email looks invalid.\");\n\n    const payload = {\n      ...form,\n      user_id: userId,\n      full_name: fullName,\n      email: authEmail,\n      attending: !!form.attending,\n      has_plus_one: !!form.has_plus_one,\n      has_children: !!form.has_children,\n      submitted_by: authEmail,\n    };\n\n    if (!payload.has_plus_one) {\n      payload.plus_one_name = \"\";\n      payload.plus_one_dietary = \"\";\n    }\n    if (!payload.has_children) {\n      payload.children = [];\n    } else if (!Array.isArray(payload.children)) {\n      payload.children = [];\n    }\n\n    setLoading(true);\n    try {\n      // Insert NEW primary RSVP\n      const { error } = await supabase.from(\"rsvps\").insert([payload]);\n      if (error) throw error;\n\n      // Insert behalf-of RSVPs\n      for (const g of behalfList) {\n        const gName = (g.full_name || \"\").trim();\n        if (!gName) continue;\n        const gPayload = {\n          ...g,\n          full_name: gName,\n          attending: !!g.attending,\n          submitted_by: authEmail,\n          email: authEmail,\n          user_id: null,\n        };\n        const { error: e2 } = await supabase.from(\"rsvps\").insert([gPayload]);\n        if (e2) throw e2;\n      }\n\n      toast.success(\"RSVP submitted! ðŸŒ»\");\n      navigate(\"/view-rsvp\", { replace: true });\n    } catch (err) {\n      console.error(err);\n      toast.error(err?.message || \"Could not submit RSVP. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (pageLoading) {\n    return (\n      <div className=\"min-h-screen w-full flex items-center justify-center\">\n        <p className=\"text-white/90\">Loadingâ€¦</p>\n      </div>\n    );\n  }\n\n  // NEW USERS (no RSVP) & closed gate â†’ Closed screen\n  if (rsvpsClosedForThisUser) {\n    return (\n      <div\n        className=\"min-h-screen w-full bg-center bg-cover relative\"\n        style={{ backgroundImage: `url(${BG_URL})` }}\n        aria-hidden=\"true\"\n      >\n        <div className=\"absolute inset-0 bg-black/40 backdrop-blur-[1px]\" />\n        <div className=\"relative z-10 max-w-3xl mx-auto px-4 py-16\">\n          <header className=\"text-center my-6 text-white drop-shadow\">\n            <h1 className=\"text-3xl font-extrabold\">\n              RSVP for{\" \"}\n              <span className=\"text-yellow-200\">Abraham &amp; Jesse-Lee</span>\n            </h1>\n            <p className=\"text-white/90\">We canâ€™t wait to celebrate with you.</p>\n          </header>\n\n          <div className=\"bg-white/90 rounded-2xl shadow-xl border border-white/60 p-8 text-center\">\n            <h2 className=\"text-2xl font-bold mb-2\">RSVPs are now closed</h2>\n            <p className=\"text-gray-700\">\n              Thanks for your interest. Weâ€™re no longer accepting new RSVPs.\n              If you believe this is a mistake, please contact the organizers.\n              <center>Jesse - +27 73 289 2430  \n              Abraham - +27 66 200 8218</center>\n            </p>\n\n            <div className=\"mt-6 flex items-center justify-center gap-3\">\n              <a\n                href=\"/\"\n                className=\"btn-outline inline-block px-4 py-2 rounded-lg border\"\n              >\n                Back to Home\n              </a>\n            </div>\n\n            <div className=\"mt-4 text-sm text-gray-500\">\n              Logged in as <span className=\"font-medium\">{authEmail}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // If we reach here: new user (no RSVP) AND the gate is open â†’ show the full form\n  return (\n    <div\n      className=\"min-h-screen w-full bg-center bg-cover relative\"\n      style={{ backgroundImage: `url(${BG_URL})` }}\n      aria-hidden=\"true\"\n    >\n      <div className=\"absolute inset-0 bg-black/30 backdrop-blur-[1px]\" />\n\n      <div className=\"relative z-10 max-w-5xl mx-auto px-4 py-10\">\n        <header className=\"text-center my-6 text-white drop-shadow\">\n          <h1 className=\"text-3xl font-extrabold\">\n            RSVP for{\" \"}\n            <span className=\"text-yellow-200\">Abraham &amp; Jesse-Lee</span>\n          </h1>\n          <p className=\"text-white/90\">We canâ€™t wait to celebrate with you.</p>\n        </header>\n\n        <form\n          onSubmit={submit}\n          className=\"bg-white/85 rounded-2xl shadow-xl border border-white/60 p-6 md:p-8 space-y-4\"\n        >\n          {!!formErr && (\n            <div className=\"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2\">\n              {formErr}\n            </div>\n          )}\n\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <input\n              id=\"full_name\"\n              className=\"input\"\n              placeholder=\"Full Name\"\n              value={form.full_name}\n              onChange={(e) => setField(\"full_name\", e.target.value)}\n              required\n            />\n            <input\n              id=\"email\"\n              className=\"input opacity-80\"\n              type=\"email\"\n              placeholder=\"Email\"\n              value={form.email}\n              disabled\n              required\n            />\n          </div>\n\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <select\n              id=\"attending\"\n              className=\"input\"\n              value={String(form.attending)}\n              onChange={(e) =>\n                setField(\"attending\", e.target.value === \"true\")\n              }\n            >\n              <option value=\"true\">Attending</option>\n              <option value=\"false\">Not Attending</option>\n            </select>\n            <input\n              id=\"dietary\"\n              className=\"input\"\n              placeholder=\"Dietary Requirements\"\n              value={form.dietary}\n              onChange={(e) => setField(\"dietary\", e.target.value)}\n            />\n          </div>\n\n          <input\n            id=\"songs\"\n            className=\"input\"\n            placeholder=\"Song requests (comma-separated)\"\n            value={form.songs}\n            onChange={(e) => setField(\"songs\", e.target.value)}\n          />\n\n          {/* Plus One */}\n          <div className=\"card p-4 bg-white/70 border border-white/60 rounded-xl\">\n            <label className=\"flex items-center gap-3\">\n              <input\n                type=\"checkbox\"\n                checked={form.has_plus_one}\n                onChange={(e) => togglePlusOne(e.target.checked)}\n              />\n              <span className=\"font-semibold text-soil-700\">\n                Bringing a plus one?\n              </span>\n            </label>\n            {form.has_plus_one && (\n              <div className=\"mt-3 grid md:grid-cols-2 gap-4\">\n                <input\n                  className=\"input\"\n                  placeholder=\"Plus One Name\"\n                  value={form.plus_one_name}\n                  onChange={(e) => setField(\"plus_one_name\", e.target.value)}\n                />\n                <input\n                  className=\"input\"\n                  placeholder=\"Plus One Dietary\"\n                  value={form.plus_one_dietary}\n                  onChange={(e) =>\n                    setField(\"plus_one_dietary\", e.target.value)\n                  }\n                />\n              </div>\n            )}\n          </div>\n\n          {/* Children */}\n          <div className=\"card p-4 bg-white/70 border border-white/60 rounded-xl\">\n            <label className=\"flex items-center gap-3\">\n              <input\n                type=\"checkbox\"\n                checked={form.has_children}\n                onChange={(e) => toggleChildren(e.target.checked)}\n              />\n              <span className=\"font-semibold text-soil-700\">\n                Bringing children?\n              </span>\n            </label>\n\n            {form.has_children && (\n              <div className=\"mt-3 space-y-3\">\n                {form.children.map((c, i) => (\n                  <div key={i} className=\"grid md:grid-cols-2 gap-3\">\n                    <input\n                      className=\"input\"\n                      placeholder=\"Child Name\"\n                      value={c.name}\n                      onChange={(e) => updateChild(i, \"name\", e.target.value)}\n                    />\n                    <input\n                      className=\"input\"\n                      placeholder=\"Child Dietary\"\n                      value={c.dietary}\n                      onChange={(e) =>\n                        updateChild(i, \"dietary\", e.target.value)\n                      }\n                    />\n                  </div>\n                ))}\n                <button type=\"button\" className=\"btn-outline\" onClick={addChild}>\n                  + Add Child\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* Behalf Guests */}\n          <div className=\"card p-4 bg-white/70 border border-white/60 rounded-xl\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"font-bold text-soil-700\">RSVP on behalf of others</h3>\n              <button type=\"button\" className=\"btn-outline\" onClick={addBehalfGuest}>\n                + Add Guest\n              </button>\n            </div>\n\n            <div className=\"mt-3 space-y-3\">\n              {behalfList.map((g, idx) => (\n                <div key={idx} className=\"grid md:grid-cols-4 gap-3\">\n                  <input\n                    className=\"input\"\n                    placeholder=\"Full Name\"\n                    value={g.full_name}\n                    onChange={(e) =>\n                      updateBehalfGuest(idx, \"full_name\", e.target.value)\n                    }\n                  />\n                  <select\n                    className=\"input\"\n                    value={String(g.attending)}\n                    onChange={(e) =>\n                      updateBehalfGuest(\n                        idx,\n                        \"attending\",\n                        e.target.value === \"true\"\n                      )\n                    }\n                  >\n                    <option value=\"true\">Attending</option>\n                    <option value=\"false\">Not Attending</option>\n                  </select>\n                  <input\n                    className=\"input\"\n                    placeholder=\"Dietary\"\n                    value={g.dietary}\n                    onChange={(e) =>\n                      updateBehalfGuest(idx, \"dietary\", e.target.value)\n                    }\n                  />\n                  <input\n                    className=\"input\"\n                    placeholder=\"Songs\"\n                    value={g.songs}\n                    onChange={(e) =>\n                      updateBehalfGuest(idx, \"songs\", e.target.value)\n                    }\n                  />\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"flex justify-end\">\n            <button className=\"btn-primary\" type=\"submit\" disabled={loading}>\n              {loading ? \"Submittingâ€¦\" : \"Submit RSVP\"}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}