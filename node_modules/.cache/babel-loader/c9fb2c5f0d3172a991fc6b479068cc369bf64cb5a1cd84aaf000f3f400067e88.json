{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drago\\\\OneDrive\\\\Desktop\\\\sussa-troue\\\\src\\\\pages\\\\LeaveMessagePage.jsx\",\n  _s = $RefreshSig$();\n// File: src/pages/LeaveMessagePage.jsx\nimport { useEffect, useState } from \"react\";\nimport { supabase } from \"../supabaseClient\";\nimport { toast } from \"react-hot-toast\";\nimport Backdrop from \"../components/Backdrop\";\nimport Card from \"../components/Card\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MAX_LEN = 500;\nexport default function LeaveMessagePage() {\n  _s();\n  const [text, setText] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n  const [userId, setUserId] = useState(null);\n  useEffect(() => {\n    (async _data$user => {\n      const {\n        data\n      } = await supabase.auth.getUser();\n      setUserId((data === null || data === void 0 ? void 0 : (_data$user = data.user) === null || _data$user === void 0 ? void 0 : _data$user.id) || null);\n    })();\n  }, []);\n  const submit = async e => {\n    e.preventDefault();\n    const value = (text || \"\").trim();\n    if (!value.length) return toast.error(\"Please write a message first.\");\n    if (value.length > MAX_LEN) return toast.error(\"Message is too long.\");\n    setSubmitting(true);\n    const payload = {\n      text: value,\n      approved: true,\n      is_public: true,\n      user_id: userId !== null && userId !== void 0 ? userId : null // optional association\n    };\n    const {\n      error\n    } = await supabase.from(\"guest_messages\").insert([payload]);\n    setSubmitting(false);\n    if (error) return toast.error(error.message);\n    toast.success(\"Message submitted!\");\n    setText(\"\");\n  };\n  const remaining = Math.max(0, MAX_LEN - ((text === null || text === void 0 ? void 0 : text.length) || 0));\n  return /*#__PURE__*/_jsxDEV(Backdrop, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-2xl mx-auto px-4 py-10\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"p-6 text-black\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Leave a message for Abraham & Jesse\\u2011Lee \\uD83C\\uDF3B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"mt-4 space-y-3\",\n          onSubmit: submit,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block\",\n            htmlFor: \"guest_message\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Your message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"guest_message\",\n              className: \"input h-32 w-full\",\n              value: text,\n              onChange: e => setText(e.target.value),\n              placeholder: \"Share your wishes\\u2026\",\n              maxLength: MAX_LEN,\n              \"aria-describedby\": \"msg_help\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"msg_help\",\n            className: `text-xs ${remaining < 20 ? \"text-red-200\" : \"text-black/80\"}`,\n            children: [remaining, \" characters left\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-primary\",\n              type: \"submit\",\n              disabled: submitting,\n              \"aria-busy\": submitting ? \"true\" : \"false\",\n              children: submitting ? \"Submittingâ€¦\" : \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(LeaveMessagePage, \"jPIJoqdRamPAYiIc2V+eNmxlZsk=\");\n_c = LeaveMessagePage;\nvar _c;\n$RefreshReg$(_c, \"LeaveMessagePage\");","map":{"version":3,"names":["useEffect","useState","supabase","toast","Backdrop","Card","jsxDEV","_jsxDEV","MAX_LEN","LeaveMessagePage","_s","text","setText","submitting","setSubmitting","userId","setUserId","_data$user","data","auth","getUser","user","id","submit","e","preventDefault","value","trim","length","error","payload","approved","is_public","user_id","from","insert","message","success","remaining","Math","max","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","onChange","target","placeholder","maxLength","type","disabled","_c","$RefreshReg$"],"sources":["C:/Users/drago/OneDrive/Desktop/sussa-troue/src/pages/LeaveMessagePage.jsx"],"sourcesContent":["// File: src/pages/LeaveMessagePage.jsx\nimport { useEffect, useState } from \"react\";\nimport { supabase } from \"../supabaseClient\";\nimport { toast } from \"react-hot-toast\";\nimport Backdrop from \"../components/Backdrop\";\nimport Card from \"../components/Card\";\n\nconst MAX_LEN = 500;\n\nexport default function LeaveMessagePage() {\n  const [text, setText] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n  const [userId, setUserId] = useState(null);\n\n  useEffect(() => {\n    (async () => {\n      const { data } = await supabase.auth.getUser();\n      setUserId(data?.user?.id || null);\n    })();\n  }, []);\n\n  const submit = async (e) => {\n    e.preventDefault();\n    const value = (text || \"\").trim();\n    if (!value.length) return toast.error(\"Please write a message first.\");\n    if (value.length > MAX_LEN) return toast.error(\"Message is too long.\");\n\n    setSubmitting(true);\n    const payload = {\n      text: value,\n      approved: true,\n      is_public: true,\n      user_id: userId ?? null, // optional association\n    };\n\n    const { error } = await supabase.from(\"guest_messages\").insert([payload]);\n    setSubmitting(false);\n\n    if (error) return toast.error(error.message);\n    toast.success(\"Message submitted!\");\n    setText(\"\");\n  };\n\n  const remaining = Math.max(0, MAX_LEN - (text?.length || 0));\n\n  return (\n    <Backdrop>\n      <div className=\"max-w-2xl mx-auto px-4 py-10\">\n        <Card className=\"p-6 text-black\">\n          <h2 className=\"section-title\">Leave a message for Abraham & Jesseâ€‘Lee ðŸŒ»</h2>\n          <form className=\"mt-4 space-y-3\" onSubmit={submit}>\n            <label className=\"block\" htmlFor=\"guest_message\">\n              <span className=\"sr-only\">Your message</span>\n              <textarea\n                id=\"guest_message\"\n                className=\"input h-32 w-full\"\n                value={text}\n                onChange={(e) => setText(e.target.value)}\n                placeholder=\"Share your wishesâ€¦\"\n                maxLength={MAX_LEN}\n                aria-describedby=\"msg_help\"\n              />\n            </label>\n            <div\n              id=\"msg_help\"\n              className={`text-xs ${\n                remaining < 20 ? \"text-red-200\" : \"text-black/80\"\n              }`}\n            >\n              {remaining} characters left\n            </div>\n\n            <div className=\"flex justify-end\">\n              <button\n                className=\"btn-primary\"\n                type=\"submit\"\n                disabled={submitting}\n                aria-busy={submitting ? \"true\" : \"false\"}\n              >\n                {submitting ? \"Submittingâ€¦\" : \"Submit\"}\n              </button>\n            </div>\n          </form>\n        </Card>\n      </div>\n    </Backdrop>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}