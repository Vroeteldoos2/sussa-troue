{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drago\\\\OneDrive\\\\Desktop\\\\sussa-troue\\\\src\\\\pages\\\\ViewRSVPPage.jsx\",\n  _s = $RefreshSig$();\n// File: src/pages/ViewRSVPPage.jsx\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { supabase } from \"../supabaseClient\";\nimport { toast } from \"react-hot-toast\";\nimport confetti from \"canvas-confetti\";\nimport dayjs from \"dayjs\";\nimport duration from \"dayjs/plugin/duration\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndayjs.extend(duration);\nconst BG_URL = \"https://cyxeucwesqzwlisgveiz.supabase.co/storage/v1/object/public/public-assets/flowers-8309997.jpg\";\n\n// ---- Wedding config via .env (CRA requires REACT_APP_*) ----\nconst WEDDING_AT = dayjs(process.env.REACT_APP_WEDDING_DATE_TIME || \"2026-02-21T14:30:00+02:00\");\nconst VENUE_NAME = process.env.REACT_APP_VENUE_NAME || \"Wedding Venue\";\nconst VENUE_ADDRESS = process.env.REACT_APP_VENUE_ADDRESS || \"Venue address to be announced\";\n\n// Columns that must NEVER be sent in an .update()\nconst BLOCKED_UPDATE_FIELDS = new Set([\"id\", \"created_at\", \"user_id\", \"submitted_by\", \"email\"]);\nexport default function ViewRSVPPage() {\n  _s();\n  const navigate = useNavigate();\n  const [rsvp, setRsvp] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [edit, setEdit] = useState(false);\n  const [form, setForm] = useState(null);\n  const [formErr, setFormErr] = useState(\"\");\n  const [countdown, setCountdown] = useState(getCountdownText(WEDDING_AT));\n  const confettiFired = useRef(false);\n  const [authEmail, setAuthEmail] = useState(null);\n  const isValidEmail = useMemo(() => v => /^\\S+@\\S+\\.\\S+$/.test(v || \"\"), []);\n  useEffect(() => {\n    (async () => {\n      try {\n        var _auth$user;\n        const {\n          data: auth\n        } = await supabase.auth.getUser();\n        const email = (auth === null || auth === void 0 ? void 0 : (_auth$user = auth.user) === null || _auth$user === void 0 ? void 0 : _auth$user.email) || null;\n        setAuthEmail(email);\n        if (!email) {\n          setLoading(false);\n          return;\n        }\n        const {\n          data: rows,\n          error\n        } = await supabase.from(\"rsvps\").select(\"*\").eq(\"email\", email.toLowerCase()).order(\"created_at\", {\n          ascending: false\n        }).limit(1);\n        if (error) throw error;\n        if (rows && rows.length) {\n          const norm = normalizeRsvp(rows[0]);\n          setRsvp(norm);\n          setForm(norm);\n          setEdit(false);\n        } else {\n          // No RSVP yet — prepare a clean form for CREATE\n          const fresh = normalizeRsvp({\n            full_name: \"\",\n            email: email.toLowerCase(),\n            attending: true,\n            dietary: \"\",\n            songs: \"\",\n            has_plus_one: false,\n            plus_one_name: \"\",\n            plus_one_dietary: \"\",\n            has_children: false,\n            children: []\n          });\n          setForm(fresh);\n          setEdit(true); // open in create/edit mode\n        }\n      } catch (e) {\n        toast.error((e === null || e === void 0 ? void 0 : e.message) || \"Could not load your RSVP.\");\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, []);\n\n  // Countdown tick\n  useEffect(() => {\n    const id = setInterval(() => {\n      setCountdown(getCountdownText(WEDDING_AT));\n    }, 1000);\n    return () => clearInterval(id);\n  }, []);\n\n  // Confetti on thank-you view (once)\n  useEffect(() => {\n    if (!loading && rsvp && !edit && !confettiFired.current) {\n      confettiFired.current = true;\n      confetti({\n        particleCount: 120,\n        spread: 70,\n        origin: {\n          y: 0.6\n        }\n      });\n      setTimeout(() => confetti({\n        particleCount: 80,\n        spread: 80,\n        origin: {\n          y: 0.6\n        }\n      }), 400);\n    }\n  }, [loading, rsvp, edit]);\n  const setField = (key, val) => setForm(f => ({\n    ...f,\n    [key]: val\n  }));\n  const togglePlusOne = checked => {\n    setForm(f => ({\n      ...f,\n      has_plus_one: checked,\n      ...(checked ? {} : {\n        plus_one_name: \"\",\n        plus_one_dietary: \"\"\n      })\n    }));\n  };\n  const toggleChildren = checked => {\n    setForm(f => ({\n      ...f,\n      has_children: checked,\n      ...(checked ? {} : {\n        children: []\n      })\n    }));\n  };\n  const addChild = () => setForm(f => ({\n    ...f,\n    children: [...(f.children || []), {\n      name: \"\",\n      dietary: \"\"\n    }]\n  }));\n  const updateChild = (i, key, val) => setForm(f => {\n    const copy = [...(f.children || [])];\n    copy[i] = {\n      ...copy[i],\n      [key]: val\n    };\n    return {\n      ...f,\n      children: copy\n    };\n  });\n  const removeChild = i => setForm(f => {\n    const copy = [...(f.children || [])];\n    copy.splice(i, 1);\n    return {\n      ...f,\n      children: copy\n    };\n  });\n\n  /** Build a clean payload for insert/update */\n  const buildNormalizedPayload = (src, {\n    forUpdate\n  }) => {\n    const cleaned = {\n      // Always normalize these fields from the form state\n      full_name: (src.full_name || \"\").trim(),\n      attending: !!src.attending,\n      dietary: src.dietary || \"\",\n      songs: src.songs || \"\",\n      has_plus_one: !!src.has_plus_one,\n      plus_one_name: src.has_plus_one ? src.plus_one_name || \"\" : \"\",\n      plus_one_dietary: src.has_plus_one ? src.plus_one_dietary || \"\" : \"\",\n      has_children: !!src.has_children,\n      children: Array.isArray(src.children) ? src.children : []\n    };\n    if (!cleaned.has_children) cleaned.children = [];\n\n    // For INSERT, include email; for UPDATE, explicitly exclude it\n    if (!forUpdate) {\n      cleaned.email = (src.email || authEmail || \"\").trim().toLowerCase();\n    }\n\n    // For UPDATE, ensure we exclude any blocked fields (defense in depth)\n    if (forUpdate) {\n      for (const k of Object.keys(src)) {\n        if (BLOCKED_UPDATE_FIELDS.has(k)) continue;\n        if (!(k in cleaned)) {\n          cleaned[k] = src[k];\n        }\n      }\n    }\n    return cleaned;\n  };\n  const save = async () => {\n    try {\n      var _form$full_name;\n      setFormErr(\"\");\n\n      // Basic validation\n      if (!(form !== null && form !== void 0 && (_form$full_name = form.full_name) !== null && _form$full_name !== void 0 && _form$full_name.trim())) return setFormErr(\"Please enter your full name.\");\n      const emailForInsert = ((form === null || form === void 0 ? void 0 : form.email) || authEmail || \"\").trim().toLowerCase();\n      if (!rsvp && !isValidEmail(emailForInsert)) {\n        return setFormErr(\"Your email address looks invalid.\");\n      }\n      if (rsvp !== null && rsvp !== void 0 && rsvp.id) {\n        // UPDATE — exclude blocked fields\n        const payload = buildNormalizedPayload(form, {\n          forUpdate: true\n        });\n        const {\n          error\n        } = await supabase.from(\"rsvps\").update(payload) // payload has NO id, created_at, user_id, submitted_by, email\n        .eq(\"id\", rsvp.id);\n        if (error) throw error;\n        toast.success(\"RSVP updated!\");\n        // Merge back into local state (preserving immutable fields)\n        setRsvp(prev => normalizeRsvp({\n          ...prev,\n          ...payload\n        }));\n        setEdit(false);\n      } else {\n        // INSERT — include email\n        const payload = buildNormalizedPayload({\n          ...form,\n          email: emailForInsert\n        }, {\n          forUpdate: false\n        });\n        const {\n          data,\n          error\n        } = await supabase.from(\"rsvps\").insert(payload).select(\"*\").limit(1).single();\n        if (error) throw error;\n        const norm = normalizeRsvp(data);\n        toast.success(\"RSVP submitted!\");\n        setRsvp(norm);\n        setForm(norm);\n        setEdit(false);\n        // Confetti will fire via the useEffect for the thank-you view\n        confettiFired.current = false; // allow the thank-you confetti to run\n      }\n    } catch (err) {\n      toast.error((err === null || err === void 0 ? void 0 : err.message) || \"Could not save RSVP.\");\n    }\n  };\n\n  // Loading\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-[60vh] flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-soil-600\",\n        children: \"Loading your RSVP\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Not logged in\n  if (!authEmail) {\n    return /*#__PURE__*/_jsxDEV(Backdrop, {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Please sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-soil-700 mt-2\",\n          children: \"You need to be logged in to view or submit your RSVP.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Thank-you / view mode\n  if (rsvp && !edit) {\n    return /*#__PURE__*/_jsxDEV(Backdrop, {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Thank you for RSVPing! \\uD83C\\uDF3B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-soil-700 mt-1\",\n          children: \"We\\u2019re excited to celebrate Abraham & Jesse\\u2011Lee with you.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 p-4 rounded-xl bg-white/70 border border-white/60\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-soil-800 mb-1\",\n            children: \"Wedding Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-soil-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"Date & Time:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this), \" \", WEDDING_AT.format(\"dddd, D MMMM YYYY [at] HH:mm\"), \" (GMT+2)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-soil-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"Venue:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this), \" \", VENUE_NAME]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-soil-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"Address:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this), \" \", VENUE_ADDRESS]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 flex flex-wrap items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"badge\",\n            children: [\"Status: \", rsvp.attending ? \"Attending\" : \"Not Attending\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this), rsvp.dietary && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"badge\",\n            children: [\"Dietary: \", rsvp.dietary]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 30\n          }, this), rsvp.songs && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"badge\",\n            children: [\"Songs: \", rsvp.songs]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 28\n          }, this), rsvp.has_plus_one && rsvp.plus_one_name && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"badge\",\n            children: [\"Plus One: \", rsvp.plus_one_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }, this), rsvp.has_children && Array.isArray(rsvp.children) && rsvp.children.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"badge\",\n            children: [\"Children: \", rsvp.children.map(c => c.name).filter(Boolean).join(\", \")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 p-4 rounded-xl bg-white/70 border border-white/60\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-soil-800 mb-1\",\n            children: \"Countdown to the big day\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-soil-700\",\n            children: countdown\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 p-4 rounded-xl bg-white/70 border border-white/60\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-soil-700\",\n            children: [\"Your presence is the greatest gift. If you\\u2019d like to bless us further, we\\u2019re humbly choosing \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: \"monetary gifts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 24\n            }, this), \" over physical presents as we build our first home together. Thank you for loving us so generously. \\uD83D\\uDC9B\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 grid md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 rounded-xl bg-white/70 border border-white/60\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-soil-800\",\n              children: \"Wedding Album\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-soil-700 mt-1\",\n              children: \"Browse and download photos/videos shared by guests and the couple.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-primary mt-3\",\n              onClick: () => navigate(\"/wedding-album\"),\n              children: \"Open Wedding Album\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 rounded-xl bg-white/70 border border-white/60\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-soil-800\",\n              children: \"Venue Info\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-soil-700 mt-1\",\n              children: \"Get directions, dress code, parking details, and the live weather.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-primary mt-3\",\n              onClick: () => navigate(\"/venue\"),\n              children: \"View Venue Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary mt-6\",\n          onClick: () => setEdit(true),\n          children: \"Edit My RSVP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Create/Edit form (shared)\n  const isCreate = !rsvp;\n  return /*#__PURE__*/_jsxDEV(Backdrop, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"section-title\",\n        children: isCreate ? \"Submit My RSVP\" : \"Edit My RSVP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this), !!formErr && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2\",\n        children: formErr\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input\",\n          placeholder: \"Full Name\",\n          value: (form === null || form === void 0 ? void 0 : form.full_name) || \"\",\n          onChange: e => setField(\"full_name\", e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input opacity-80\",\n          type: \"email\",\n          placeholder: \"Email\",\n          value: (isCreate ? form === null || form === void 0 ? void 0 : form.email : authEmail) || \"\",\n          disabled: true,\n          title: \"Email is locked to keep your RSVP linked to your account.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"input\",\n          value: String(!!(form !== null && form !== void 0 && form.attending)),\n          onChange: e => setField(\"attending\", e.target.value === \"true\"),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"true\",\n            children: \"Attending\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"false\",\n            children: \"Not Attending\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input\",\n          placeholder: \"Dietary Requirements\",\n          value: (form === null || form === void 0 ? void 0 : form.dietary) || \"\",\n          onChange: e => setField(\"dietary\", e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        placeholder: \"Song requests (comma-separated)\",\n        value: (form === null || form === void 0 ? void 0 : form.songs) || \"\",\n        onChange: e => setField(\"songs\", e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-4 bg-white/70 border border-white/60 rounded-xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: !!(form !== null && form !== void 0 && form.has_plus_one),\n            onChange: e => togglePlusOne(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-soil-700\",\n            children: \"Bringing a plus one?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this), (form === null || form === void 0 ? void 0 : form.has_plus_one) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 grid md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            placeholder: \"Plus One Name\",\n            value: (form === null || form === void 0 ? void 0 : form.plus_one_name) || \"\",\n            onChange: e => setField(\"plus_one_name\", e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            placeholder: \"Plus One Dietary\",\n            value: (form === null || form === void 0 ? void 0 : form.plus_one_dietary) || \"\",\n            onChange: e => setField(\"plus_one_dietary\", e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-4 bg-white/70 border border-white/60 rounded-xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: !!(form !== null && form !== void 0 && form.has_children),\n            onChange: e => toggleChildren(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-soil-700\",\n            children: \"Bringing children?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 11\n        }, this), (form === null || form === void 0 ? void 0 : form.has_children) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 space-y-3\",\n          children: [((form === null || form === void 0 ? void 0 : form.children) || []).map((c, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid md:grid-cols-2 gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              placeholder: \"Child Name\",\n              value: c.name || \"\",\n              onChange: e => updateChild(i, \"name\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input flex-1\",\n                placeholder: \"Child Dietary\",\n                value: c.dietary || \"\",\n                onChange: e => updateChild(i, \"dietary\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn-outline\",\n                onClick: () => removeChild(i),\n                title: \"Remove child\",\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 19\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-outline\",\n            onClick: addChild,\n            children: \"+ Add Child\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-3 justify-end pt-2\",\n        children: [!isCreate && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-outline\",\n          onClick: () => {\n            setForm(rsvp);\n            setEdit(false);\n            setFormErr(\"\");\n          },\n          type: \"button\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary\",\n          onClick: save,\n          type: \"button\",\n          children: isCreate ? \"Submit\" : \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 365,\n    columnNumber: 5\n  }, this);\n}\n\n/** Helpers */\n_s(ViewRSVPPage, \"SLKTvTxvpolYPvxZJ7P1p6SgXuI=\", false, function () {\n  return [useNavigate];\n});\n_c = ViewRSVPPage;\nfunction normalizeRsvp(row) {\n  return {\n    ...row,\n    attending: !!row.attending,\n    has_plus_one: !!row.has_plus_one,\n    has_children: !!row.has_children,\n    children: Array.isArray(row.children) ? row.children : []\n  };\n}\nfunction getCountdownText(target) {\n  var _target$isValid;\n  const now = dayjs();\n  if (!(target !== null && target !== void 0 && (_target$isValid = target.isValid) !== null && _target$isValid !== void 0 && _target$isValid.call(target)) || now.isAfter(target)) return \"It's wedding time! 🎉\";\n  const diff = dayjs.duration(target.diff(now));\n  const d = Math.floor(diff.asDays());\n  const h = diff.hours().toString().padStart(2, \"0\");\n  const m = diff.minutes().toString().padStart(2, \"0\");\n  const s = diff.seconds().toString().padStart(2, \"0\");\n  return `${d} days • ${h}:${m}:${s}`;\n}\n\n/** UI wrappers */\nfunction Backdrop({\n  children\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen w-full bg-center bg-cover relative\",\n    style: {\n      backgroundImage: `url(${BG_URL})`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-black/30 backdrop-blur-[1px]\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative z-10 max-w-4xl mx-auto px-4 py-10\",\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 538,\n    columnNumber: 5\n  }, this);\n}\n_c2 = Backdrop;\nfunction Card({\n  children,\n  className = \"\"\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `bg-white/85 rounded-2xl shadow-xl border border-white/60 p-6 md:p-8 ${className}`,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 550,\n    columnNumber: 5\n  }, this);\n}\n_c3 = Card;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ViewRSVPPage\");\n$RefreshReg$(_c2, \"Backdrop\");\n$RefreshReg$(_c3, \"Card\");","map":{"version":3,"names":["useEffect","useMemo","useRef","useState","useNavigate","supabase","toast","confetti","dayjs","duration","jsxDEV","_jsxDEV","extend","BG_URL","WEDDING_AT","process","env","REACT_APP_WEDDING_DATE_TIME","VENUE_NAME","REACT_APP_VENUE_NAME","VENUE_ADDRESS","REACT_APP_VENUE_ADDRESS","BLOCKED_UPDATE_FIELDS","Set","ViewRSVPPage","_s","navigate","rsvp","setRsvp","loading","setLoading","edit","setEdit","form","setForm","formErr","setFormErr","countdown","setCountdown","getCountdownText","confettiFired","authEmail","setAuthEmail","isValidEmail","v","test","_auth$user","data","auth","getUser","email","user","rows","error","from","select","eq","toLowerCase","order","ascending","limit","length","norm","normalizeRsvp","fresh","full_name","attending","dietary","songs","has_plus_one","plus_one_name","plus_one_dietary","has_children","children","e","message","id","setInterval","clearInterval","current","particleCount","spread","origin","y","setTimeout","setField","key","val","f","togglePlusOne","checked","toggleChildren","addChild","name","updateChild","i","copy","removeChild","splice","buildNormalizedPayload","src","forUpdate","cleaned","trim","Array","isArray","k","Object","keys","has","save","_form$full_name","emailForInsert","payload","update","success","prev","insert","single","err","className","fileName","_jsxFileName","lineNumber","columnNumber","Backdrop","Card","format","map","c","filter","Boolean","join","onClick","isCreate","placeholder","value","onChange","target","required","type","disabled","title","String","_c","row","_target$isValid","now","isValid","call","isAfter","diff","d","Math","floor","asDays","h","hours","toString","padStart","m","minutes","s","seconds","style","backgroundImage","_c2","_c3","$RefreshReg$"],"sources":["C:/Users/drago/OneDrive/Desktop/sussa-troue/src/pages/ViewRSVPPage.jsx"],"sourcesContent":["// File: src/pages/ViewRSVPPage.jsx\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { supabase } from \"../supabaseClient\";\nimport { toast } from \"react-hot-toast\";\nimport confetti from \"canvas-confetti\";\nimport dayjs from \"dayjs\";\nimport duration from \"dayjs/plugin/duration\";\ndayjs.extend(duration);\n\nconst BG_URL =\n  \"https://cyxeucwesqzwlisgveiz.supabase.co/storage/v1/object/public/public-assets/flowers-8309997.jpg\";\n\n// ---- Wedding config via .env (CRA requires REACT_APP_*) ----\nconst WEDDING_AT = dayjs(\n  process.env.REACT_APP_WEDDING_DATE_TIME || \"2026-02-21T14:30:00+02:00\"\n);\nconst VENUE_NAME = process.env.REACT_APP_VENUE_NAME || \"Wedding Venue\";\nconst VENUE_ADDRESS =\n  process.env.REACT_APP_VENUE_ADDRESS || \"Venue address to be announced\";\n\n// Columns that must NEVER be sent in an .update()\nconst BLOCKED_UPDATE_FIELDS = new Set([\n  \"id\",\n  \"created_at\",\n  \"user_id\",\n  \"submitted_by\",\n  \"email\",\n]);\n\nexport default function ViewRSVPPage() {\n  const navigate = useNavigate();\n\n  const [rsvp, setRsvp] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [edit, setEdit] = useState(false);\n  const [form, setForm] = useState(null);\n  const [formErr, setFormErr] = useState(\"\");\n  const [countdown, setCountdown] = useState(getCountdownText(WEDDING_AT));\n  const confettiFired = useRef(false);\n  const [authEmail, setAuthEmail] = useState(null);\n\n  const isValidEmail = useMemo(\n    () => (v) => /^\\S+@\\S+\\.\\S+$/.test(v || \"\"),\n    []\n  );\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const { data: auth } = await supabase.auth.getUser();\n        const email = auth?.user?.email || null;\n        setAuthEmail(email);\n        if (!email) {\n          setLoading(false);\n          return;\n        }\n\n        const { data: rows, error } = await supabase\n          .from(\"rsvps\")\n          .select(\"*\")\n          .eq(\"email\", email.toLowerCase())\n          .order(\"created_at\", { ascending: false })\n          .limit(1);\n\n        if (error) throw error;\n\n        if (rows && rows.length) {\n          const norm = normalizeRsvp(rows[0]);\n          setRsvp(norm);\n          setForm(norm);\n          setEdit(false);\n        } else {\n          // No RSVP yet — prepare a clean form for CREATE\n          const fresh = normalizeRsvp({\n            full_name: \"\",\n            email: email.toLowerCase(),\n            attending: true,\n            dietary: \"\",\n            songs: \"\",\n            has_plus_one: false,\n            plus_one_name: \"\",\n            plus_one_dietary: \"\",\n            has_children: false,\n            children: [],\n          });\n          setForm(fresh);\n          setEdit(true); // open in create/edit mode\n        }\n      } catch (e) {\n        toast.error(e?.message || \"Could not load your RSVP.\");\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, []);\n\n  // Countdown tick\n  useEffect(() => {\n    const id = setInterval(() => {\n      setCountdown(getCountdownText(WEDDING_AT));\n    }, 1000);\n    return () => clearInterval(id);\n  }, []);\n\n  // Confetti on thank-you view (once)\n  useEffect(() => {\n    if (!loading && rsvp && !edit && !confettiFired.current) {\n      confettiFired.current = true;\n      confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 } });\n      setTimeout(\n        () => confetti({ particleCount: 80, spread: 80, origin: { y: 0.6 } }),\n        400\n      );\n    }\n  }, [loading, rsvp, edit]);\n\n  const setField = (key, val) => setForm((f) => ({ ...f, [key]: val }));\n\n  const togglePlusOne = (checked) => {\n    setForm((f) => ({\n      ...f,\n      has_plus_one: checked,\n      ...(checked ? {} : { plus_one_name: \"\", plus_one_dietary: \"\" }),\n    }));\n  };\n\n  const toggleChildren = (checked) => {\n    setForm((f) => ({\n      ...f,\n      has_children: checked,\n      ...(checked ? {} : { children: [] }),\n    }));\n  };\n\n  const addChild = () =>\n    setForm((f) => ({\n      ...f,\n      children: [...(f.children || []), { name: \"\", dietary: \"\" }],\n    }));\n\n  const updateChild = (i, key, val) =>\n    setForm((f) => {\n      const copy = [...(f.children || [])];\n      copy[i] = { ...copy[i], [key]: val };\n      return { ...f, children: copy };\n    });\n\n  const removeChild = (i) =>\n    setForm((f) => {\n      const copy = [...(f.children || [])];\n      copy.splice(i, 1);\n      return { ...f, children: copy };\n    });\n\n  /** Build a clean payload for insert/update */\n  const buildNormalizedPayload = (src, { forUpdate }) => {\n    const cleaned = {\n      // Always normalize these fields from the form state\n      full_name: (src.full_name || \"\").trim(),\n      attending: !!src.attending,\n      dietary: src.dietary || \"\",\n      songs: src.songs || \"\",\n      has_plus_one: !!src.has_plus_one,\n      plus_one_name: src.has_plus_one ? src.plus_one_name || \"\" : \"\",\n      plus_one_dietary: src.has_plus_one ? src.plus_one_dietary || \"\" : \"\",\n      has_children: !!src.has_children,\n      children: Array.isArray(src.children) ? src.children : [],\n    };\n\n    if (!cleaned.has_children) cleaned.children = [];\n\n    // For INSERT, include email; for UPDATE, explicitly exclude it\n    if (!forUpdate) {\n      cleaned.email = (src.email || authEmail || \"\").trim().toLowerCase();\n    }\n\n    // For UPDATE, ensure we exclude any blocked fields (defense in depth)\n    if (forUpdate) {\n      for (const k of Object.keys(src)) {\n        if (BLOCKED_UPDATE_FIELDS.has(k)) continue;\n        if (!(k in cleaned)) {\n          cleaned[k] = src[k];\n        }\n      }\n    }\n\n    return cleaned;\n  };\n\n  const save = async () => {\n    try {\n      setFormErr(\"\");\n\n      // Basic validation\n      if (!form?.full_name?.trim())\n        return setFormErr(\"Please enter your full name.\");\n\n      const emailForInsert = (form?.email || authEmail || \"\").trim().toLowerCase();\n      if (!rsvp && !isValidEmail(emailForInsert)) {\n        return setFormErr(\"Your email address looks invalid.\");\n      }\n\n      if (rsvp?.id) {\n        // UPDATE — exclude blocked fields\n        const payload = buildNormalizedPayload(form, { forUpdate: true });\n\n        const { error } = await supabase\n          .from(\"rsvps\")\n          .update(payload) // payload has NO id, created_at, user_id, submitted_by, email\n          .eq(\"id\", rsvp.id);\n\n        if (error) throw error;\n\n        toast.success(\"RSVP updated!\");\n        // Merge back into local state (preserving immutable fields)\n        setRsvp((prev) => normalizeRsvp({ ...prev, ...payload }));\n        setEdit(false);\n      } else {\n        // INSERT — include email\n        const payload = buildNormalizedPayload(\n          { ...form, email: emailForInsert },\n          { forUpdate: false }\n        );\n\n        const { data, error } = await supabase\n          .from(\"rsvps\")\n          .insert(payload)\n          .select(\"*\")\n          .limit(1)\n          .single();\n\n        if (error) throw error;\n\n        const norm = normalizeRsvp(data);\n        toast.success(\"RSVP submitted!\");\n        setRsvp(norm);\n        setForm(norm);\n        setEdit(false);\n        // Confetti will fire via the useEffect for the thank-you view\n        confettiFired.current = false; // allow the thank-you confetti to run\n      }\n    } catch (err) {\n      toast.error(err?.message || \"Could not save RSVP.\");\n    }\n  };\n\n  // Loading\n  if (loading) {\n    return (\n      <div className=\"min-h-[60vh] flex items-center justify-center\">\n        <div className=\"text-soil-600\">Loading your RSVP…</div>\n      </div>\n    );\n  }\n\n  // Not logged in\n  if (!authEmail) {\n    return (\n      <Backdrop>\n        <Card>\n          <h2 className=\"section-title\">Please sign in</h2>\n          <p className=\"text-soil-700 mt-2\">\n            You need to be logged in to view or submit your RSVP.\n          </p>\n        </Card>\n      </Backdrop>\n    );\n  }\n\n  // Thank-you / view mode\n  if (rsvp && !edit) {\n    return (\n      <Backdrop>\n        <Card>\n          <h2 className=\"section-title\">Thank you for RSVPing! 🌻</h2>\n          <p className=\"text-soil-700 mt-1\">\n            We’re excited to celebrate Abraham &amp; Jesse‑Lee with you.\n          </p>\n\n          {/* Wedding details (from .env) */}\n          <div className=\"mt-4 p-4 rounded-xl bg-white/70 border border-white/60\">\n            <h3 className=\"font-semibold text-soil-800 mb-1\">Wedding Details</h3>\n            <p className=\"text-soil-700\">\n              <span className=\"font-medium\">Date &amp; Time:</span>{\" \"}\n              {WEDDING_AT.format(\"dddd, D MMMM YYYY [at] HH:mm\")} (GMT+2)\n            </p>\n            <p className=\"text-soil-700\">\n              <span className=\"font-medium\">Venue:</span> {VENUE_NAME}\n            </p>\n            <p className=\"text-soil-700\">\n              <span className=\"font-medium\">Address:</span> {VENUE_ADDRESS}\n            </p>\n          </div>\n\n          {/* RSVP quick facts */}\n          <div className=\"mt-4 flex flex-wrap items-center gap-3\">\n            <div className=\"badge\">\n              Status: {rsvp.attending ? \"Attending\" : \"Not Attending\"}\n            </div>\n            {rsvp.dietary && <div className=\"badge\">Dietary: {rsvp.dietary}</div>}\n            {rsvp.songs && <div className=\"badge\">Songs: {rsvp.songs}</div>}\n            {rsvp.has_plus_one && rsvp.plus_one_name && (\n              <div className=\"badge\">Plus One: {rsvp.plus_one_name}</div>\n            )}\n            {rsvp.has_children && Array.isArray(rsvp.children) && rsvp.children.length > 0 && (\n              <div className=\"badge\">\n                Children: {rsvp.children.map((c) => c.name).filter(Boolean).join(\", \")}\n              </div>\n            )}\n          </div>\n\n          {/* Countdown */}\n          <div className=\"mt-6 p-4 rounded-xl bg-white/70 border border-white/60\">\n            <h3 className=\"font-semibold text-soil-800 mb-1\">Countdown to the big day</h3>\n            <p className=\"text-soil-700\">{countdown}</p>\n          </div>\n\n          {/* Money over gifts — loving note */}\n          <div className=\"mt-6 p-4 rounded-xl bg-white/70 border border-white/60\">\n            <p className=\"text-soil-700\">\n              Your presence is the greatest gift. If you’d like to bless us further, we’re humbly\n              choosing <span className=\"font-semibold\">monetary gifts</span> over physical presents\n              as we build our first home together. Thank you for loving us so generously. 💛\n            </p>\n          </div>\n\n          {/* Actions: Album & Venue */}\n          <div className=\"mt-6 grid md:grid-cols-2 gap-4\">\n            <div className=\"p-4 rounded-xl bg-white/70 border border-white/60\">\n              <h4 className=\"font-semibold text-soil-800\">Wedding Album</h4>\n              <p className=\"text-sm text-soil-700 mt-1\">\n                Browse and download photos/videos shared by guests and the couple.\n              </p>\n              <button\n                className=\"btn-primary mt-3\"\n                onClick={() => navigate(\"/wedding-album\")}\n              >\n                Open Wedding Album\n              </button>\n            </div>\n\n            <div className=\"p-4 rounded-xl bg-white/70 border border-white/60\">\n              <h4 className=\"font-semibold text-soil-800\">Venue Info</h4>\n              <p className=\"text-sm text-soil-700 mt-1\">\n                Get directions, dress code, parking details, and the live weather.\n              </p>\n              <button className=\"btn-primary mt-3\" onClick={() => navigate(\"/venue\")}>\n                View Venue Information\n              </button>\n            </div>\n          </div>\n\n          <button className=\"btn-primary mt-6\" onClick={() => setEdit(true)}>\n            Edit My RSVP\n          </button>\n        </Card>\n      </Backdrop>\n    );\n  }\n\n  // Create/Edit form (shared)\n  const isCreate = !rsvp;\n  return (\n    <Backdrop>\n      <Card className=\"space-y-4\">\n        <h2 className=\"section-title\">{isCreate ? \"Submit My RSVP\" : \"Edit My RSVP\"}</h2>\n\n        {!!formErr && (\n          <div className=\"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2\">\n            {formErr}\n          </div>\n        )}\n\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          <input\n            className=\"input\"\n            placeholder=\"Full Name\"\n            value={form?.full_name || \"\"}\n            onChange={(e) => setField(\"full_name\", e.target.value)}\n            required\n          />\n          <input\n            className=\"input opacity-80\"\n            type=\"email\"\n            placeholder=\"Email\"\n            value={(isCreate ? form?.email : authEmail) || \"\"}\n            disabled\n            title=\"Email is locked to keep your RSVP linked to your account.\"\n          />\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          <select\n            className=\"input\"\n            value={String(!!form?.attending)}\n            onChange={(e) => setField(\"attending\", e.target.value === \"true\")}\n          >\n            <option value=\"true\">Attending</option>\n            <option value=\"false\">Not Attending</option>\n          </select>\n          <input\n            className=\"input\"\n            placeholder=\"Dietary Requirements\"\n            value={form?.dietary || \"\"}\n            onChange={(e) => setField(\"dietary\", e.target.value)}\n          />\n        </div>\n\n        <input\n          className=\"input\"\n          placeholder=\"Song requests (comma-separated)\"\n          value={form?.songs || \"\"}\n          onChange={(e) => setField(\"songs\", e.target.value)}\n        />\n\n        {/* Plus One */}\n        <div className=\"card p-4 bg-white/70 border border-white/60 rounded-xl\">\n          <label className=\"flex items-center gap-3\">\n            <input\n              type=\"checkbox\"\n              checked={!!form?.has_plus_one}\n              onChange={(e) => togglePlusOne(e.target.checked)}\n            />\n            <span className=\"font-semibold text-soil-700\">Bringing a plus one?</span>\n          </label>\n          {form?.has_plus_one && (\n            <div className=\"mt-3 grid md:grid-cols-2 gap-4\">\n              <input\n                className=\"input\"\n                placeholder=\"Plus One Name\"\n                value={form?.plus_one_name || \"\"}\n                onChange={(e) => setField(\"plus_one_name\", e.target.value)}\n              />\n              <input\n                className=\"input\"\n                placeholder=\"Plus One Dietary\"\n                value={form?.plus_one_dietary || \"\"}\n                onChange={(e) => setField(\"plus_one_dietary\", e.target.value)}\n              />\n            </div>\n          )}\n        </div>\n\n        {/* Children */}\n        <div className=\"card p-4 bg-white/70 border border-white/60 rounded-xl\">\n          <label className=\"flex items-center gap-3\">\n            <input\n              type=\"checkbox\"\n              checked={!!form?.has_children}\n              onChange={(e) => toggleChildren(e.target.checked)}\n            />\n            <span className=\"font-semibold text-soil-700\">Bringing children?</span>\n          </label>\n          {form?.has_children && (\n            <div className=\"mt-3 space-y-3\">\n              {(form?.children || []).map((c, i) => (\n                <div key={i} className=\"grid md:grid-cols-2 gap-3\">\n                  <input\n                    className=\"input\"\n                    placeholder=\"Child Name\"\n                    value={c.name || \"\"}\n                    onChange={(e) => updateChild(i, \"name\", e.target.value)}\n                  />\n                  <div className=\"flex gap-3\">\n                    <input\n                      className=\"input flex-1\"\n                      placeholder=\"Child Dietary\"\n                      value={c.dietary || \"\"}\n                      onChange={(e) => updateChild(i, \"dietary\", e.target.value)}\n                    />\n                    <button\n                      type=\"button\"\n                      className=\"btn-outline\"\n                      onClick={() => removeChild(i)}\n                      title=\"Remove child\"\n                    >\n                      Remove\n                    </button>\n                  </div>\n                </div>\n              ))}\n              <button type=\"button\" className=\"btn-outline\" onClick={addChild}>\n                + Add Child\n              </button>\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex gap-3 justify-end pt-2\">\n          {!isCreate && (\n            <button\n              className=\"btn-outline\"\n              onClick={() => {\n                setForm(rsvp);\n                setEdit(false);\n                setFormErr(\"\");\n              }}\n              type=\"button\"\n            >\n              Cancel\n            </button>\n          )}\n          <button className=\"btn-primary\" onClick={save} type=\"button\">\n            {isCreate ? \"Submit\" : \"Save\"}\n          </button>\n        </div>\n      </Card>\n    </Backdrop>\n  );\n}\n\n/** Helpers */\nfunction normalizeRsvp(row) {\n  return {\n    ...row,\n    attending: !!row.attending,\n    has_plus_one: !!row.has_plus_one,\n    has_children: !!row.has_children,\n    children: Array.isArray(row.children) ? row.children : [],\n  };\n}\n\nfunction getCountdownText(target) {\n  const now = dayjs();\n  if (!target?.isValid?.() || now.isAfter(target)) return \"It's wedding time! 🎉\";\n  const diff = dayjs.duration(target.diff(now));\n  const d = Math.floor(diff.asDays());\n  const h = diff.hours().toString().padStart(2, \"0\");\n  const m = diff.minutes().toString().padStart(2, \"0\");\n  const s = diff.seconds().toString().padStart(2, \"0\");\n  return `${d} days • ${h}:${m}:${s}`;\n}\n\n/** UI wrappers */\nfunction Backdrop({ children }) {\n  return (\n    <div\n      className=\"min-h-screen w-full bg-center bg-cover relative\"\n      style={{ backgroundImage: `url(${BG_URL})` }}\n    >\n      <div className=\"absolute inset-0 bg-black/30 backdrop-blur-[1px]\" />\n      <div className=\"relative z-10 max-w-4xl mx-auto px-4 py-10\">{children}</div>\n    </div>\n  );\n}\n\nfunction Card({ children, className = \"\" }) {\n  return (\n    <div className={`bg-white/85 rounded-2xl shadow-xl border border-white/60 p-6 md:p-8 ${className}`}>\n      {children}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}