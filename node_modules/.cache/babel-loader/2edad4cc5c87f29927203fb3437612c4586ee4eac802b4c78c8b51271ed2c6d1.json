{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drago\\\\OneDrive\\\\Desktop\\\\sussa-troue\\\\src\\\\pages\\\\WeddingAlbumPage.jsx\",\n  _s = $RefreshSig$();\n// File: src/pages/WeddingAlbumPage.jsx\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport dayjs from \"dayjs\";\nimport Backdrop from \"../components/Backdrop\";\nimport Card from \"../components/Card\";\nimport { ENV } from \"../utils/fromEnv\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PAGE_SIZE = 48;\nfunction inferType(mime, name = \"\") {\n  const m = (mime || \"\").toLowerCase();\n  if (m.startsWith(\"image/\")) return \"image\";\n  if (m.startsWith(\"video/\")) return \"video\";\n  if (/\\.(png|jpe?g|gif|webp|bmp|heic)$/i.test(name)) return \"image\";\n  if (/\\.(mp4|mov|webm|mkv|avi)$/i.test(name)) return \"video\";\n  return \"file\";\n}\n\n// Drive links for PUBLIC files/folders\nconst viewURL = id => `https://drive.google.com/uc?export=view&id=${id}&rl`;\nconst downloadURL = id => `https://drive.google.com/uc?export=download&id=${id}`;\nconst altMediaURL = (id, key) => `https://www.googleapis.com/drive/v3/files/${id}?alt=media&key=${key}`;\nexport default function WeddingAlbumPage() {\n  _s();\n  const [tab, setTab] = useState(\"photos\");\n  const [items, setItems] = useState([]);\n  const [nextToken, setNextToken] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n  const API_KEY = ENV.GOOGLE_API_KEY;\n  const PHOTOS_FOLDER = ENV.DRIVE_PHOTOS;\n  const VIDEOS_FOLDER = ENV.DRIVE_VIDEOS;\n  const currentFolder = tab === \"photos\" ? PHOTOS_FOLDER : VIDEOS_FOLDER;\n  const listFolder = useCallback(async (folderId, pageToken) => {\n    var _json$error;\n    const url = new URL(\"https://www.googleapis.com/drive/v3/files\");\n    url.searchParams.set(\"q\", `'${folderId}' in parents and trashed = false`);\n    url.searchParams.set(\"fields\", \"nextPageToken, files(id,name,mimeType,createdTime,thumbnailLink,webViewLink,webContentLink)\");\n    url.searchParams.set(\"orderBy\", \"createdTime desc\");\n    url.searchParams.set(\"pageSize\", String(PAGE_SIZE));\n    url.searchParams.set(\"includeItemsFromAllDrives\", \"true\");\n    url.searchParams.set(\"supportsAllDrives\", \"true\");\n    if (pageToken) url.searchParams.set(\"pageToken\", pageToken);\n    url.searchParams.set(\"key\", API_KEY);\n    const res = await fetch(url.toString());\n    const json = await res.json();\n    if (!res.ok) throw new Error(((_json$error = json.error) === null || _json$error === void 0 ? void 0 : _json$error.message) || \"Drive API error\");\n    const files = (json.files || []).map(f => {\n      const media_type = inferType(f.mimeType, f.name);\n      const mainView = viewURL(f.id);\n      const fallback1 = f.thumbnailLink || \"\";\n      const fallback2 = altMediaURL(f.id, API_KEY);\n      const preview_url = media_type === \"image\" ? mainView : f.webViewLink || f.webContentLink || mainView;\n      return {\n        id: f.id,\n        drive_name: f.name,\n        mimeType: f.mimeType,\n        media_type,\n        created_at: f.createdTime,\n        preview_url,\n        fallback_previews: [fallback1, fallback2].filter(Boolean),\n        webViewLink: f.webViewLink || f.webContentLink || mainView\n      };\n    });\n    return {\n      files,\n      nextPageToken: json.nextPageToken || null\n    };\n  }, [API_KEY]);\n  const loadInitial = useCallback(async () => {\n    if (!API_KEY || !currentFolder) return;\n    setErr(\"\");\n    setLoading(true);\n    try {\n      const {\n        files,\n        nextPageToken\n      } = await listFolder(currentFolder, null);\n      setItems(files);\n      setNextToken(nextPageToken);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [API_KEY, currentFolder, listFolder]);\n  const loadMore = useCallback(async () => {\n    if (loading || !nextToken) return;\n    setLoading(true);\n    try {\n      const {\n        files,\n        nextPageToken\n      } = await listFolder(currentFolder, nextToken);\n      setItems(prev => [...prev, ...files]);\n      setNextToken(nextPageToken);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [currentFolder, listFolder, loading, nextToken]);\n  useEffect(() => {\n    setItems([]);\n    setNextToken(null);\n    loadInitial();\n  }, [tab, loadInitial]);\n\n  // group by date\n  const groups = useMemo(() => {\n    const map = {};\n    for (const it of items) {\n      const key = dayjs(it.created_at).format(\"YYYY-MM-DD\");\n      (map[key] ||= []).push(it);\n    }\n    return Object.entries(map).sort(([a], [b]) => a < b ? 1 : -1);\n  }, [items]);\n  return /*#__PURE__*/_jsxDEV(Backdrop, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl mx-auto px-4 py-10\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"p-6 md:p-8 text-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"section-title\",\n            children: \"Wedding Album\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-white/80\",\n            children: \"We loved sharing our day with you.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `btn-outline ${tab === \"photos\" ? \"bg-white/20\" : \"\"}`,\n            onClick: () => setTab(\"photos\"),\n            \"aria-pressed\": tab === \"photos\" ? \"true\" : \"false\",\n            children: \"Photos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `btn-outline ${tab === \"videos\" ? \"bg-white/20\" : \"\"}`,\n            onClick: () => setTab(\"videos\"),\n            \"aria-pressed\": tab === \"videos\" ? \"true\" : \"false\",\n            children: \"Videos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), (!API_KEY || !PHOTOS_FOLDER || !VIDEOS_FOLDER) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-amber-200 bg-amber-900/20 border border-amber-300/40 rounded-md p-2 mb-4\",\n          children: [\"Missing envs. Set \", /*#__PURE__*/_jsxDEV(\"code\", {\n            children: \"REACT_APP_GOOGLE_API_KEY\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 33\n          }, this), \",\", \" \", /*#__PURE__*/_jsxDEV(\"code\", {\n            children: \"REACT_APP_DRIVE_PHOTOS_FOLDER_ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }, this), \",\", \" \", /*#__PURE__*/_jsxDEV(\"code\", {\n            children: \"REACT_APP_DRIVE_VIDEOS_FOLDER_ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this), \" and restart the dev server.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-red-200 bg-red-900/20 border border-red-300/40 rounded-md p-2 mb-4\",\n          role: \"alert\",\n          children: err\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this), items.length === 0 && !loading && !err && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white/80\",\n          children: \"No media yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-8\",\n          children: groups.map(([date, arr]) => /*#__PURE__*/_jsxDEV(\"section\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-semibold text-white mb-3\",\n              children: dayjs(date).format(\"DD MMM YYYY\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\",\n              children: arr.map(it => /*#__PURE__*/_jsxDEV(AlbumCard, {\n                item: it\n              }, it.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 17\n            }, this)]\n          }, date, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 flex items-center gap-3\",\n          children: [loading && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-white/80\",\n            role: \"status\",\n            children: \"Loading\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this), !loading && nextToken && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-outline\",\n            onClick: loadMore,\n            \"aria-label\": \"Load more items\",\n            children: \"Load more\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 15\n          }, this), !loading && !nextToken && items.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-white/80\",\n            children: \"End of album.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n}\n_s(WeddingAlbumPage, \"XNORPJ6vHSPM88xuWL9zzybRQeU=\");\n_c = WeddingAlbumPage;\nfunction AlbumCard({\n  item\n}) {\n  const {\n    media_type,\n    preview_url,\n    drive_name,\n    created_at,\n    id,\n    webViewLink,\n    fallback_previews\n  } = item;\n  const time = dayjs(created_at).format(\"HH:mm\");\n  const downloadHref = downloadURL(id);\n  const openHref = media_type === \"image\" ? preview_url : webViewLink;\n  const cacheBusted = `${preview_url}${preview_url.includes(\"?\") ? \"&\" : \"?\"}t=${Date.now()}`;\n  const onImgError = e => {\n    const el = e.currentTarget;\n    if (el.dataset.fallbackIndex === undefined) el.dataset.fallbackIndex = \"0\";\n    const i = parseInt(el.dataset.fallbackIndex, 10);\n    if (fallback_previews && i < fallback_previews.length) {\n      const next = fallback_previews[i];\n      el.src = `${next}${next.includes(\"?\") ? \"&\" : \"?\"}t=${Date.now()}`;\n      el.dataset.fallbackIndex = String(i + 1);\n    } else {\n      el.style.display = \"none\";\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rounded-xl overflow-hidden bg-white/10 border border-white/20\",\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      href: openHref,\n      target: \"_blank\",\n      rel: \"noreferrer\",\n      title: drive_name,\n      className: \"block group\",\n      children: media_type === \"image\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: cacheBusted,\n        alt: drive_name,\n        className: \"w-full h-40 object-cover group-hover:opacity-90\",\n        loading: \"lazy\",\n        onError: onImgError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }, this) : media_type === \"video\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-40 flex items-center justify-center text-sm text-white/80\",\n        children: \"Open video \\u2197\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-40 flex items-center justify-center text-sm text-white/70\",\n        children: \"Open file \\u2197\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-2 text-xs text-white/90 flex items-center justify-between gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"truncate\",\n        children: drive_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: time\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-2 pt-0 flex gap-2 justify-end\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"btn-outline text-xs\",\n        href: downloadHref,\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        \"aria-label\": `Download ${drive_name}`,\n        children: \"Download\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 5\n  }, this);\n}\n_c2 = AlbumCard;\nvar _c, _c2;\n$RefreshReg$(_c, \"WeddingAlbumPage\");\n$RefreshReg$(_c2, \"AlbumCard\");","map":{"version":3,"names":["useCallback","useEffect","useMemo","useState","dayjs","Backdrop","Card","ENV","jsxDEV","_jsxDEV","PAGE_SIZE","inferType","mime","name","m","toLowerCase","startsWith","test","viewURL","id","downloadURL","altMediaURL","key","WeddingAlbumPage","_s","tab","setTab","items","setItems","nextToken","setNextToken","loading","setLoading","err","setErr","API_KEY","GOOGLE_API_KEY","PHOTOS_FOLDER","DRIVE_PHOTOS","VIDEOS_FOLDER","DRIVE_VIDEOS","currentFolder","listFolder","folderId","pageToken","_json$error","url","URL","searchParams","set","String","res","fetch","toString","json","ok","Error","error","message","files","map","f","media_type","mimeType","mainView","fallback1","thumbnailLink","fallback2","preview_url","webViewLink","webContentLink","drive_name","created_at","createdTime","fallback_previews","filter","Boolean","nextPageToken","loadInitial","e","loadMore","prev","groups","it","format","push","Object","entries","sort","a","b","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","role","length","date","arr","AlbumCard","item","_c","time","downloadHref","openHref","cacheBusted","includes","Date","now","onImgError","el","currentTarget","dataset","fallbackIndex","undefined","i","parseInt","next","src","style","display","href","target","rel","title","alt","onError","_c2","$RefreshReg$"],"sources":["C:/Users/drago/OneDrive/Desktop/sussa-troue/src/pages/WeddingAlbumPage.jsx"],"sourcesContent":["// File: src/pages/WeddingAlbumPage.jsx\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport dayjs from \"dayjs\";\nimport Backdrop from \"../components/Backdrop\";\nimport Card from \"../components/Card\";\nimport { ENV } from \"../utils/fromEnv\";\n\nconst PAGE_SIZE = 48;\n\nfunction inferType(mime, name = \"\") {\n  const m = (mime || \"\").toLowerCase();\n  if (m.startsWith(\"image/\")) return \"image\";\n  if (m.startsWith(\"video/\")) return \"video\";\n  if (/\\.(png|jpe?g|gif|webp|bmp|heic)$/i.test(name)) return \"image\";\n  if (/\\.(mp4|mov|webm|mkv|avi)$/i.test(name)) return \"video\";\n  return \"file\";\n}\n\n// Drive links for PUBLIC files/folders\nconst viewURL = (id) => `https://drive.google.com/uc?export=view&id=${id}&rl`;\nconst downloadURL = (id) => `https://drive.google.com/uc?export=download&id=${id}`;\nconst altMediaURL = (id, key) => `https://www.googleapis.com/drive/v3/files/${id}?alt=media&key=${key}`;\n\nexport default function WeddingAlbumPage() {\n  const [tab, setTab] = useState(\"photos\");\n  const [items, setItems] = useState([]);\n  const [nextToken, setNextToken] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n\n  const API_KEY = ENV.GOOGLE_API_KEY;\n  const PHOTOS_FOLDER = ENV.DRIVE_PHOTOS;\n  const VIDEOS_FOLDER = ENV.DRIVE_VIDEOS;\n  const currentFolder = tab === \"photos\" ? PHOTOS_FOLDER : VIDEOS_FOLDER;\n\n  const listFolder = useCallback(\n    async (folderId, pageToken) => {\n      const url = new URL(\"https://www.googleapis.com/drive/v3/files\");\n      url.searchParams.set(\"q\", `'${folderId}' in parents and trashed = false`);\n      url.searchParams.set(\n        \"fields\",\n        \"nextPageToken, files(id,name,mimeType,createdTime,thumbnailLink,webViewLink,webContentLink)\"\n      );\n      url.searchParams.set(\"orderBy\", \"createdTime desc\");\n      url.searchParams.set(\"pageSize\", String(PAGE_SIZE));\n      url.searchParams.set(\"includeItemsFromAllDrives\", \"true\");\n      url.searchParams.set(\"supportsAllDrives\", \"true\");\n      if (pageToken) url.searchParams.set(\"pageToken\", pageToken);\n      url.searchParams.set(\"key\", API_KEY);\n\n      const res = await fetch(url.toString());\n      const json = await res.json();\n      if (!res.ok) throw new Error(json.error?.message || \"Drive API error\");\n\n      const files = (json.files || []).map((f) => {\n        const media_type = inferType(f.mimeType, f.name);\n        const mainView = viewURL(f.id);\n        const fallback1 = f.thumbnailLink || \"\";\n        const fallback2 = altMediaURL(f.id, API_KEY);\n        const preview_url = media_type === \"image\" ? mainView : (f.webViewLink || f.webContentLink || mainView);\n        return {\n          id: f.id,\n          drive_name: f.name,\n          mimeType: f.mimeType,\n          media_type,\n          created_at: f.createdTime,\n          preview_url,\n          fallback_previews: [fallback1, fallback2].filter(Boolean),\n          webViewLink: f.webViewLink || f.webContentLink || mainView,\n        };\n      });\n      return { files, nextPageToken: json.nextPageToken || null };\n    },\n    [API_KEY]\n  );\n\n  const loadInitial = useCallback(async () => {\n    if (!API_KEY || !currentFolder) return;\n    setErr(\"\");\n    setLoading(true);\n    try {\n      const { files, nextPageToken } = await listFolder(currentFolder, null);\n      setItems(files);\n      setNextToken(nextPageToken);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [API_KEY, currentFolder, listFolder]);\n\n  const loadMore = useCallback(async () => {\n    if (loading || !nextToken) return;\n    setLoading(true);\n    try {\n      const { files, nextPageToken } = await listFolder(currentFolder, nextToken);\n      setItems((prev) => [...prev, ...files]);\n      setNextToken(nextPageToken);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [currentFolder, listFolder, loading, nextToken]);\n\n useEffect(() => {\n  setItems([]);\n  setNextToken(null);\n  loadInitial();\n}, [tab, loadInitial]);\n\n  // group by date\n  const groups = useMemo(() => {\n    const map = {};\n    for (const it of items) {\n      const key = dayjs(it.created_at).format(\"YYYY-MM-DD\");\n      (map[key] ||= []).push(it);\n    }\n    return Object.entries(map).sort(([a], [b]) => (a < b ? 1 : -1));\n  }, [items]);\n\n  return (\n    <Backdrop>\n      <div className=\"max-w-6xl mx-auto px-4 py-10\">\n        <Card className=\"p-6 md:p-8 text-white\">\n          <header className=\"mb-6\">\n            <h1 className=\"section-title\">Wedding Album</h1>\n            <p className=\"text-white/80\">We loved sharing our day with you.</p>\n          </header>\n\n          <div className=\"flex gap-2 mb-4\">\n            <button\n              className={`btn-outline ${tab === \"photos\" ? \"bg-white/20\" : \"\"}`}\n              onClick={() => setTab(\"photos\")}\n              aria-pressed={tab === \"photos\" ? \"true\" : \"false\"}\n            >\n              Photos\n            </button>\n            <button\n              className={`btn-outline ${tab === \"videos\" ? \"bg-white/20\" : \"\"}`}\n              onClick={() => setTab(\"videos\")}\n              aria-pressed={tab === \"videos\" ? \"true\" : \"false\"}\n            >\n              Videos\n            </button>\n          </div>\n\n          {(!API_KEY || !PHOTOS_FOLDER || !VIDEOS_FOLDER) && (\n            <div className=\"text-sm text-amber-200 bg-amber-900/20 border border-amber-300/40 rounded-md p-2 mb-4\">\n              Missing envs. Set <code>REACT_APP_GOOGLE_API_KEY</code>,{\" \"}\n              <code>REACT_APP_DRIVE_PHOTOS_FOLDER_ID</code>,{\" \"}\n              <code>REACT_APP_DRIVE_VIDEOS_FOLDER_ID</code> and restart the dev server.\n            </div>\n          )}\n\n          {err && (\n            <div className=\"text-sm text-red-200 bg-red-900/20 border border-red-300/40 rounded-md p-2 mb-4\" role=\"alert\">\n              {err}\n            </div>\n          )}\n\n          {items.length === 0 && !loading && !err && (\n            <p className=\"text-white/80\">No media yet.</p>\n          )}\n\n          <div className=\"space-y-8\">\n            {groups.map(([date, arr]) => (\n              <section key={date}>\n                <h2 className=\"text-lg font-semibold text-white mb-3\">\n                  {dayjs(date).format(\"DD MMM YYYY\")}\n                </h2>\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\">\n                  {arr.map((it) => (\n                    <AlbumCard key={it.id} item={it} />\n                  ))}\n                </div>\n              </section>\n            ))}\n          </div>\n\n          <div className=\"mt-6 flex items-center gap-3\">\n            {loading && <span className=\"text-white/80\" role=\"status\">Loading…</span>}\n            {!loading && nextToken && (\n              <button className=\"btn-outline\" onClick={loadMore} aria-label=\"Load more items\">\n                Load more\n              </button>\n            )}\n            {!loading && !nextToken && items.length > 0 && (\n              <span className=\"text-white/80\">End of album.</span>\n            )}\n          </div>\n        </Card>\n      </div>\n    </Backdrop>\n  );\n}\n\nfunction AlbumCard({ item }) {\n  const { media_type, preview_url, drive_name, created_at, id, webViewLink, fallback_previews } = item;\n  const time = dayjs(created_at).format(\"HH:mm\");\n  const downloadHref = downloadURL(id);\n  const openHref = media_type === \"image\" ? preview_url : webViewLink;\n\n  const cacheBusted = `${preview_url}${preview_url.includes(\"?\") ? \"&\" : \"?\"}t=${Date.now()}`;\n\n  const onImgError = (e) => {\n    const el = e.currentTarget;\n    if (el.dataset.fallbackIndex === undefined) el.dataset.fallbackIndex = \"0\";\n    const i = parseInt(el.dataset.fallbackIndex, 10);\n    if (fallback_previews && i < fallback_previews.length) {\n      const next = fallback_previews[i];\n      el.src = `${next}${next.includes(\"?\") ? \"&\" : \"?\"}t=${Date.now()}`;\n      el.dataset.fallbackIndex = String(i + 1);\n    } else {\n      el.style.display = \"none\";\n    }\n  };\n\n  return (\n    <div className=\"rounded-xl overflow-hidden bg-white/10 border border-white/20\">\n      <a href={openHref} target=\"_blank\" rel=\"noreferrer\" title={drive_name} className=\"block group\">\n        {media_type === \"image\" ? (\n          <img\n            src={cacheBusted}\n            alt={drive_name}\n            className=\"w-full h-40 object-cover group-hover:opacity-90\"\n            loading=\"lazy\"\n            onError={onImgError}\n          />\n        ) : media_type === \"video\" ? (\n          <div className=\"w-full h-40 flex items-center justify-center text-sm text-white/80\">\n            Open video ↗\n          </div>\n        ) : (\n          <div className=\"w-full h-40 flex items-center justify-center text-sm text-white/70\">\n            Open file ↗\n          </div>\n        )}\n      </a>\n      <div className=\"p-2 text-xs text-white/90 flex items-center justify-between gap-2\">\n        <span className=\"truncate\">{drive_name}</span>\n        <span>{time}</span>\n      </div>\n      <div className=\"p-2 pt-0 flex gap-2 justify-end\">\n        <a className=\"btn-outline text-xs\" href={downloadHref} target=\"_blank\" rel=\"noreferrer\" aria-label={`Download ${drive_name}`}>\n          Download\n        </a>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}