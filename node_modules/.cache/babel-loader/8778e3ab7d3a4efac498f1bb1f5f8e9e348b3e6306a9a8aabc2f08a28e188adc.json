{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drago\\\\OneDrive\\\\Desktop\\\\sussa-troue\\\\src\\\\pages\\\\ViewRSVPPage.jsx\",\n  _s = $RefreshSig$();\n// File: src/pages/ViewRSVPPage.jsx\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { supabase } from \"../supabaseClient\";\nimport { toast } from \"react-hot-toast\";\nimport confetti from \"canvas-confetti\";\nimport dayjs from \"dayjs\";\nimport duration from \"dayjs/plugin/duration\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndayjs.extend(duration);\nconst BG_URL = \"https://cyxeucwesqzwlisgveiz.supabase.co/storage/v1/object/public/public-assets/flowers-8309997.jpg\";\n\n// ---- Wedding config via .env (CRA requires REACT_APP_*) ----\nconst fromEnv = (v, fallback = \"\") => v ? String(v).split(\"#\")[0].trim() : fallback;\nconst WEDDING_AT = dayjs(fromEnv(process.env.REACT_APP_WEDDING_DATE_TIME, \"2025-11-08T14:30:00+02:00\"));\nconst VENUE_NAME = fromEnv(process.env.REACT_APP_VENUE_NAME, \"Wedding Venue\");\nconst VENUE_ADDRESS = fromEnv(process.env.REACT_APP_VENUE_ADDRESS, \"Venue address to be announced\");\n\n// Columns that must NEVER be sent in an .update()\nconst BLOCKED_UPDATE_FIELDS = new Set([\"id\", \"created_at\", \"user_id\", \"submitted_by\", \"email\"]);\nexport default function ViewRSVPPage() {\n  _s();\n  const navigate = useNavigate();\n  const [rsvp, setRsvp] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [edit, setEdit] = useState(false);\n  const [form, setForm] = useState(null);\n  const [formErr, setFormErr] = useState(\"\");\n  const [countdown, setCountdown] = useState(getCountdownText(WEDDING_AT));\n  const confettiFired = useRef(false);\n  const [authEmail, setAuthEmail] = useState(null);\n  const isValidEmail = useMemo(() => v => /^\\S+@\\S+\\.\\S+$/.test(v || \"\"), []);\n  useEffect(() => {\n    (async () => {\n      try {\n        var _auth$user;\n        const {\n          data: auth\n        } = await supabase.auth.getUser();\n        const email = (auth === null || auth === void 0 ? void 0 : (_auth$user = auth.user) === null || _auth$user === void 0 ? void 0 : _auth$user.email) || null;\n        setAuthEmail(email);\n        if (!email) {\n          setLoading(false);\n          return;\n        }\n        const {\n          data: rows,\n          error\n        } = await supabase.from(\"rsvps\").select(\"*\").eq(\"email\", email.toLowerCase()).order(\"created_at\", {\n          ascending: false\n        }).limit(1);\n        if (error) throw error;\n        if (rows && rows.length) {\n          const norm = normalizeRsvp(rows[0]);\n          setRsvp(norm);\n          setForm(norm);\n          setEdit(false);\n        } else {\n          // No RSVP yet — prepare a clean form for CREATE\n          const fresh = normalizeRsvp({\n            full_name: \"\",\n            email: email.toLowerCase(),\n            attending: true,\n            dietary: \"\",\n            songs: \"\",\n            has_plus_one: false,\n            plus_one_name: \"\",\n            plus_one_dietary: \"\",\n            has_children: false,\n            children: []\n          });\n          setForm(fresh);\n          setEdit(true); // open in create/edit mode\n        }\n      } catch (e) {\n        toast.error((e === null || e === void 0 ? void 0 : e.message) || \"Could not load your RSVP.\");\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, []);\n\n  // Countdown tick\n  useEffect(() => {\n    const id = setInterval(() => {\n      setCountdown(getCountdownText(WEDDING_AT));\n    }, 1000);\n    return () => clearInterval(id);\n  }, []);\n\n  // Confetti on thank-you view (once)\n  useEffect(() => {\n    if (!loading && rsvp && !edit && !confettiFired.current) {\n      confettiFired.current = true;\n      confetti({\n        particleCount: 120,\n        spread: 70,\n        origin: {\n          y: 0.6\n        }\n      });\n      setTimeout(() => confetti({\n        particleCount: 80,\n        spread: 80,\n        origin: {\n          y: 0.6\n        }\n      }), 400);\n    }\n  }, [loading, rsvp, edit]);\n  const setField = (key, val) => setForm(f => ({\n    ...f,\n    [key]: val\n  }));\n  const togglePlusOne = checked => {\n    setForm(f => ({\n      ...f,\n      has_plus_one: checked,\n      ...(checked ? {} : {\n        plus_one_name: \"\",\n        plus_one_dietary: \"\"\n      })\n    }));\n  };\n  const toggleChildren = checked => {\n    setForm(f => ({\n      ...f,\n      has_children: checked,\n      ...(checked ? {} : {\n        children: []\n      })\n    }));\n  };\n  const addChild = () => setForm(f => ({\n    ...f,\n    children: [...(f.children || []), {\n      name: \"\",\n      dietary: \"\"\n    }]\n  }));\n  const updateChild = (i, key, val) => setForm(f => {\n    const copy = [...(f.children || [])];\n    copy[i] = {\n      ...copy[i],\n      [key]: val\n    };\n    return {\n      ...f,\n      children: copy\n    };\n  });\n  const removeChild = i => setForm(f => {\n    const copy = [...(f.children || [])];\n    copy.splice(i, 1);\n    return {\n      ...f,\n      children: copy\n    };\n  });\n\n  /** Build a clean payload for insert/update */\n  const buildNormalizedPayload = (src, {\n    forUpdate\n  }) => {\n    const cleaned = {\n      // Always normalize these fields from the form state\n      full_name: (src.full_name || \"\").trim(),\n      attending: !!src.attending,\n      dietary: src.dietary || \"\",\n      songs: src.songs || \"\",\n      has_plus_one: !!src.has_plus_one,\n      plus_one_name: src.has_plus_one ? src.plus_one_name || \"\" : \"\",\n      plus_one_dietary: src.has_plus_one ? src.plus_one_dietary || \"\" : \"\",\n      has_children: !!src.has_children,\n      children: Array.isArray(src.children) ? src.children : []\n    };\n    if (!cleaned.has_children) cleaned.children = [];\n\n    // For INSERT, include email; for UPDATE, explicitly exclude it\n    if (!forUpdate) {\n      cleaned.email = (src.email || authEmail || \"\").trim().toLowerCase();\n    }\n\n    // For UPDATE, ensure we exclude any blocked fields (defense in depth)\n    if (forUpdate) {\n      for (const k of Object.keys(src)) {\n        if (BLOCKED_UPDATE_FIELDS.has(k)) continue;\n        if (!(k in cleaned)) {\n          cleaned[k] = src[k];\n        }\n      }\n    }\n    return cleaned;\n  };\n  const save = async () => {\n    try {\n      var _form$full_name;\n      setFormErr(\"\");\n\n      // Basic validation\n      if (!(form !== null && form !== void 0 && (_form$full_name = form.full_name) !== null && _form$full_name !== void 0 && _form$full_name.trim())) return setFormErr(\"Please enter your full name.\");\n      const emailForInsert = ((form === null || form === void 0 ? void 0 : form.email) || authEmail || \"\").trim().toLowerCase();\n      if (!rsvp && !isValidEmail(emailForInsert)) {\n        return setFormErr(\"Your email address looks invalid.\");\n      }\n      if (rsvp !== null && rsvp !== void 0 && rsvp.id) {\n        // UPDATE — exclude blocked fields\n        const payload = buildNormalizedPayload(form, {\n          forUpdate: true\n        });\n        const {\n          error\n        } = await supabase.from(\"rsvps\").update(payload) // payload has NO id, created_at, user_id, submitted_by, email\n        .eq(\"id\", rsvp.id);\n        if (error) throw error;\n        toast.success(\"RSVP updated!\");\n        // Merge back into local state (preserving immutable fields)\n        setRsvp(prev => normalizeRsvp({\n          ...prev,\n          ...payload\n        }));\n        setEdit(false);\n      } else {\n        // INSERT — include email\n        const payload = buildNormalizedPayload({\n          ...form,\n          email: emailForInsert\n        }, {\n          forUpdate: false\n        });\n        const {\n          data,\n          error\n        } = await supabase.from(\"rsvps\").insert(payload).select(\"*\").limit(1).single();\n        if (error) throw error;\n        const norm = normalizeRsvp(data);\n        toast.success(\"RSVP submitted!\");\n        setRsvp(norm);\n        setForm(norm);\n        setEdit(false);\n        // Confetti will fire via the useEffect for the thank-you view\n        confettiFired.current = false; // allow the thank-you confetti to run\n      }\n    } catch (err) {\n      toast.error((err === null || err === void 0 ? void 0 : err.message) || \"Could not save RSVP.\");\n    }\n  };\n\n  // Loading\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-[60vh] flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-soil-600\",\n        children: \"Loading your RSVP\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Not logged in\n  if (!authEmail) {\n    return /*#__PURE__*/_jsxDEV(Backdrop, {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Please sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-soil-700 mt-2\",\n          children: \"You need to be logged in to view or submit your RSVP.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Thank-you / view mode\n  if (rsvp && !edit) {\n    return /*#__PURE__*/_jsxDEV(Backdrop, {\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Thank you for RSVPing! \\uD83C\\uDF3B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-soil-700 mt-1\",\n          children: \"We\\u2019re excited to celebrate Abraham & Jesse\\u2011Lee with you.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 p-4 rounded-xl bg-white/70 border border-white/60\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-soil-800 mb-1\",\n            children: \"Wedding Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-soil-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"Date & Time:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this), \" \", WEDDING_AT.format(\"dddd, D MMMM YYYY [at] HH:mm\"), \" (GMT+2)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-soil-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"Venue:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this), \" \", VENUE_NAME]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-soil-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: \"Address:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 15\n            }, this), \" \", VENUE_ADDRESS]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 flex flex-wrap items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"badge\",\n            children: [\"Status: \", rsvp.attending ? \"Attending\" : \"Not Attending\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), rsvp.dietary && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"badge\",\n            children: [\"Dietary: \", rsvp.dietary]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 30\n          }, this), rsvp.songs && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"badge\",\n            children: [\"Songs: \", rsvp.songs]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 28\n          }, this), rsvp.has_plus_one && rsvp.plus_one_name && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"badge\",\n            children: [\"Plus One: \", rsvp.plus_one_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 15\n          }, this), rsvp.has_children && Array.isArray(rsvp.children) && rsvp.children.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"badge\",\n            children: [\"Children: \", rsvp.children.map(c => c.name).filter(Boolean).join(\", \")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 p-4 rounded-xl bg-white/70 border border-white/60\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-soil-800 mb-1\",\n            children: \"Countdown to the big day\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-soil-700\",\n            children: countdown\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 p-4 rounded-xl bg-white/70 border border-white/60\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-soil-700\",\n            children: [\"Your presence is the greatest gift. If you\\u2019d like to bless us further, we\\u2019re humbly choosing \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: \"monetary gifts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 24\n            }, this), \" over physical presents as we build our first home together. Thank you for loving us so generously. \\uD83D\\uDC9B\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 grid md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 rounded-xl bg-white/70 border border-white/60\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-soil-800\",\n              children: \"Wedding Album\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-soil-700 mt-1\",\n              children: \"Browse and download photos/videos shared by guests and the couple.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-primary mt-3\",\n              onClick: () => navigate(\"/wedding-album\"),\n              children: \"Open Wedding Album\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 rounded-xl bg-white/70 border border-white/60\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-soil-800\",\n              children: \"Venue Info\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-soil-700 mt-1\",\n              children: \"Get directions, dress code, parking details, and the live weather.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-primary mt-3\",\n              onClick: () => navigate(\"/venue\"),\n              children: \"View Venue Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary mt-6\",\n          onClick: () => setEdit(true),\n          children: \"Edit My RSVP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Create/Edit form (shared)\n  const isCreate = !rsvp;\n  return /*#__PURE__*/_jsxDEV(Backdrop, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"section-title\",\n        children: isCreate ? \"Submit My RSVP\" : \"Edit My RSVP\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 9\n      }, this), !!formErr && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2\",\n        children: formErr\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input\",\n          placeholder: \"Full Name\",\n          value: (form === null || form === void 0 ? void 0 : form.full_name) || \"\",\n          onChange: e => setField(\"full_name\", e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input opacity-80\",\n          type: \"email\",\n          placeholder: \"Email\",\n          value: (isCreate ? form === null || form === void 0 ? void 0 : form.email : authEmail) || \"\",\n          disabled: true,\n          title: \"Email is locked to keep your RSVP linked to your account.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"input\",\n          value: String(!!(form !== null && form !== void 0 && form.attending)),\n          onChange: e => setField(\"attending\", e.target.value === \"true\"),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"true\",\n            children: \"Attending\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"false\",\n            children: \"Not Attending\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input\",\n          placeholder: \"Dietary Requirements\",\n          value: (form === null || form === void 0 ? void 0 : form.dietary) || \"\",\n          onChange: e => setField(\"dietary\", e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input\",\n        placeholder: \"Song requests (comma-separated)\",\n        value: (form === null || form === void 0 ? void 0 : form.songs) || \"\",\n        onChange: e => setField(\"songs\", e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-4 bg-white/70 border border-white/60 rounded-xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: !!(form !== null && form !== void 0 && form.has_plus_one),\n            onChange: e => togglePlusOne(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-soil-700\",\n            children: \"Bringing a plus one?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 11\n        }, this), (form === null || form === void 0 ? void 0 : form.has_plus_one) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 grid md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            placeholder: \"Plus One Name\",\n            value: (form === null || form === void 0 ? void 0 : form.plus_one_name) || \"\",\n            onChange: e => setField(\"plus_one_name\", e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            placeholder: \"Plus One Dietary\",\n            value: (form === null || form === void 0 ? void 0 : form.plus_one_dietary) || \"\",\n            onChange: e => setField(\"plus_one_dietary\", e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card p-4 bg-white/70 border border-white/60 rounded-xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: !!(form !== null && form !== void 0 && form.has_children),\n            onChange: e => toggleChildren(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold text-soil-700\",\n            children: \"Bringing children?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this), (form === null || form === void 0 ? void 0 : form.has_children) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 space-y-3\",\n          children: [((form === null || form === void 0 ? void 0 : form.children) || []).map((c, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid md:grid-cols-2 gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              placeholder: \"Child Name\",\n              value: c.name || \"\",\n              onChange: e => updateChild(i, \"name\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input flex-1\",\n                placeholder: \"Child Dietary\",\n                value: c.dietary || \"\",\n                onChange: e => updateChild(i, \"dietary\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn-outline\",\n                onClick: () => removeChild(i),\n                title: \"Remove child\",\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 19\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-outline\",\n            onClick: addChild,\n            children: \"+ Add Child\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-3 justify-end pt-2\",\n        children: [!isCreate && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-outline\",\n          onClick: () => {\n            setForm(rsvp);\n            setEdit(false);\n            setFormErr(\"\");\n          },\n          type: \"button\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary\",\n          onClick: save,\n          type: \"button\",\n          children: isCreate ? \"Submit\" : \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 372,\n    columnNumber: 5\n  }, this);\n}\n\n/** Helpers */\n_s(ViewRSVPPage, \"SLKTvTxvpolYPvxZJ7P1p6SgXuI=\", false, function () {\n  return [useNavigate];\n});\n_c = ViewRSVPPage;\nfunction normalizeRsvp(row) {\n  return {\n    ...row,\n    attending: !!row.attending,\n    has_plus_one: !!row.has_plus_one,\n    has_children: !!row.has_children,\n    children: Array.isArray(row.children) ? row.children : []\n  };\n}\nfunction getCountdownText(target) {\n  var _target$isValid;\n  const now = dayjs();\n  if (!(target !== null && target !== void 0 && (_target$isValid = target.isValid) !== null && _target$isValid !== void 0 && _target$isValid.call(target)) || now.isAfter(target)) return \"It's wedding time! 🎉\";\n  const diff = dayjs.duration(target.diff(now));\n  const d = Math.floor(diff.asDays());\n  const h = diff.hours().toString().padStart(2, \"0\");\n  const m = diff.minutes().toString().padStart(2, \"0\");\n  const s = diff.seconds().toString().padStart(2, \"0\");\n  return `${d} days • ${h}:${m}:${s}`;\n}\n\n/** UI wrappers */\nfunction Backdrop({\n  children\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen w-full bg-center bg-cover relative\",\n    style: {\n      backgroundImage: `url(${BG_URL})`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-black/30 backdrop-blur-[1px]\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative z-10 max-w-4xl mx-auto px-4 py-10\",\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 545,\n    columnNumber: 5\n  }, this);\n}\n_c2 = Backdrop;\nfunction Card({\n  children,\n  className = \"\"\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `bg-white/85 rounded-2xl shadow-xl border border-white/60 p-6 md:p-8 ${className}`,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 557,\n    columnNumber: 5\n  }, this);\n}\n_c3 = Card;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ViewRSVPPage\");\n$RefreshReg$(_c2, \"Backdrop\");\n$RefreshReg$(_c3, \"Card\");","map":{"version":3,"names":["useEffect","useMemo","useRef","useState","useNavigate","supabase","toast","confetti","dayjs","duration","jsxDEV","_jsxDEV","extend","BG_URL","fromEnv","v","fallback","String","split","trim","WEDDING_AT","process","env","REACT_APP_WEDDING_DATE_TIME","VENUE_NAME","REACT_APP_VENUE_NAME","VENUE_ADDRESS","REACT_APP_VENUE_ADDRESS","BLOCKED_UPDATE_FIELDS","Set","ViewRSVPPage","_s","navigate","rsvp","setRsvp","loading","setLoading","edit","setEdit","form","setForm","formErr","setFormErr","countdown","setCountdown","getCountdownText","confettiFired","authEmail","setAuthEmail","isValidEmail","test","_auth$user","data","auth","getUser","email","user","rows","error","from","select","eq","toLowerCase","order","ascending","limit","length","norm","normalizeRsvp","fresh","full_name","attending","dietary","songs","has_plus_one","plus_one_name","plus_one_dietary","has_children","children","e","message","id","setInterval","clearInterval","current","particleCount","spread","origin","y","setTimeout","setField","key","val","f","togglePlusOne","checked","toggleChildren","addChild","name","updateChild","i","copy","removeChild","splice","buildNormalizedPayload","src","forUpdate","cleaned","Array","isArray","k","Object","keys","has","save","_form$full_name","emailForInsert","payload","update","success","prev","insert","single","err","className","fileName","_jsxFileName","lineNumber","columnNumber","Backdrop","Card","format","map","c","filter","Boolean","join","onClick","isCreate","placeholder","value","onChange","target","required","type","disabled","title","_c","row","_target$isValid","now","isValid","call","isAfter","diff","d","Math","floor","asDays","h","hours","toString","padStart","m","minutes","s","seconds","style","backgroundImage","_c2","_c3","$RefreshReg$"],"sources":["C:/Users/drago/OneDrive/Desktop/sussa-troue/src/pages/ViewRSVPPage.jsx"],"sourcesContent":["// File: src/pages/ViewRSVPPage.jsx\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { supabase } from \"../supabaseClient\";\nimport { toast } from \"react-hot-toast\";\nimport confetti from \"canvas-confetti\";\nimport dayjs from \"dayjs\";\nimport duration from \"dayjs/plugin/duration\";\ndayjs.extend(duration);\n\nconst BG_URL =\n  \"https://cyxeucwesqzwlisgveiz.supabase.co/storage/v1/object/public/public-assets/flowers-8309997.jpg\";\n\n// ---- Wedding config via .env (CRA requires REACT_APP_*) ----\nconst fromEnv = (v, fallback = \"\") =>\n  (v ? String(v).split(\"#\")[0].trim() : fallback);\n\nconst WEDDING_AT = dayjs(\n  fromEnv(process.env.REACT_APP_WEDDING_DATE_TIME, \"2025-11-08T14:30:00+02:00\")\n);\n\nconst VENUE_NAME = fromEnv(process.env.REACT_APP_VENUE_NAME, \"Wedding Venue\");\nconst VENUE_ADDRESS = fromEnv(\n  process.env.REACT_APP_VENUE_ADDRESS,\n  \"Venue address to be announced\"\n);\n\n\n// Columns that must NEVER be sent in an .update()\nconst BLOCKED_UPDATE_FIELDS = new Set([\n  \"id\",\n  \"created_at\",\n  \"user_id\",\n  \"submitted_by\",\n  \"email\",\n]);\n\nexport default function ViewRSVPPage() {\n  const navigate = useNavigate();\n\n  const [rsvp, setRsvp] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [edit, setEdit] = useState(false);\n  const [form, setForm] = useState(null);\n  const [formErr, setFormErr] = useState(\"\");\n  const [countdown, setCountdown] = useState(getCountdownText(WEDDING_AT));\n  const confettiFired = useRef(false);\n  const [authEmail, setAuthEmail] = useState(null);\n\n  const isValidEmail = useMemo(\n    () => (v) => /^\\S+@\\S+\\.\\S+$/.test(v || \"\"),\n    []\n  );\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const { data: auth } = await supabase.auth.getUser();\n        const email = auth?.user?.email || null;\n        setAuthEmail(email);\n        if (!email) {\n          setLoading(false);\n          return;\n        }\n\n        const { data: rows, error } = await supabase\n          .from(\"rsvps\")\n          .select(\"*\")\n          .eq(\"email\", email.toLowerCase())\n          .order(\"created_at\", { ascending: false })\n          .limit(1);\n\n        if (error) throw error;\n\n        if (rows && rows.length) {\n          const norm = normalizeRsvp(rows[0]);\n          setRsvp(norm);\n          setForm(norm);\n          setEdit(false);\n        } else {\n          // No RSVP yet — prepare a clean form for CREATE\n          const fresh = normalizeRsvp({\n            full_name: \"\",\n            email: email.toLowerCase(),\n            attending: true,\n            dietary: \"\",\n            songs: \"\",\n            has_plus_one: false,\n            plus_one_name: \"\",\n            plus_one_dietary: \"\",\n            has_children: false,\n            children: [],\n          });\n          setForm(fresh);\n          setEdit(true); // open in create/edit mode\n        }\n      } catch (e) {\n        toast.error(e?.message || \"Could not load your RSVP.\");\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, []);\n\n  // Countdown tick\n  useEffect(() => {\n    const id = setInterval(() => {\n      setCountdown(getCountdownText(WEDDING_AT));\n    }, 1000);\n    return () => clearInterval(id);\n  }, []);\n\n  // Confetti on thank-you view (once)\n  useEffect(() => {\n    if (!loading && rsvp && !edit && !confettiFired.current) {\n      confettiFired.current = true;\n      confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 } });\n      setTimeout(\n        () => confetti({ particleCount: 80, spread: 80, origin: { y: 0.6 } }),\n        400\n      );\n    }\n  }, [loading, rsvp, edit]);\n\n  const setField = (key, val) => setForm((f) => ({ ...f, [key]: val }));\n\n  const togglePlusOne = (checked) => {\n    setForm((f) => ({\n      ...f,\n      has_plus_one: checked,\n      ...(checked ? {} : { plus_one_name: \"\", plus_one_dietary: \"\" }),\n    }));\n  };\n\n  const toggleChildren = (checked) => {\n    setForm((f) => ({\n      ...f,\n      has_children: checked,\n      ...(checked ? {} : { children: [] }),\n    }));\n  };\n\n  const addChild = () =>\n    setForm((f) => ({\n      ...f,\n      children: [...(f.children || []), { name: \"\", dietary: \"\" }],\n    }));\n\n  const updateChild = (i, key, val) =>\n    setForm((f) => {\n      const copy = [...(f.children || [])];\n      copy[i] = { ...copy[i], [key]: val };\n      return { ...f, children: copy };\n    });\n\n  const removeChild = (i) =>\n    setForm((f) => {\n      const copy = [...(f.children || [])];\n      copy.splice(i, 1);\n      return { ...f, children: copy };\n    });\n\n  /** Build a clean payload for insert/update */\n  const buildNormalizedPayload = (src, { forUpdate }) => {\n    const cleaned = {\n      // Always normalize these fields from the form state\n      full_name: (src.full_name || \"\").trim(),\n      attending: !!src.attending,\n      dietary: src.dietary || \"\",\n      songs: src.songs || \"\",\n      has_plus_one: !!src.has_plus_one,\n      plus_one_name: src.has_plus_one ? src.plus_one_name || \"\" : \"\",\n      plus_one_dietary: src.has_plus_one ? src.plus_one_dietary || \"\" : \"\",\n      has_children: !!src.has_children,\n      children: Array.isArray(src.children) ? src.children : [],\n    };\n\n    if (!cleaned.has_children) cleaned.children = [];\n\n    // For INSERT, include email; for UPDATE, explicitly exclude it\n    if (!forUpdate) {\n      cleaned.email = (src.email || authEmail || \"\").trim().toLowerCase();\n    }\n\n    // For UPDATE, ensure we exclude any blocked fields (defense in depth)\n    if (forUpdate) {\n      for (const k of Object.keys(src)) {\n        if (BLOCKED_UPDATE_FIELDS.has(k)) continue;\n        if (!(k in cleaned)) {\n          cleaned[k] = src[k];\n        }\n      }\n    }\n\n    return cleaned;\n  };\n\n  const save = async () => {\n    try {\n      setFormErr(\"\");\n\n      // Basic validation\n      if (!form?.full_name?.trim())\n        return setFormErr(\"Please enter your full name.\");\n\n      const emailForInsert = (form?.email || authEmail || \"\").trim().toLowerCase();\n      if (!rsvp && !isValidEmail(emailForInsert)) {\n        return setFormErr(\"Your email address looks invalid.\");\n      }\n\n      if (rsvp?.id) {\n        // UPDATE — exclude blocked fields\n        const payload = buildNormalizedPayload(form, { forUpdate: true });\n\n        const { error } = await supabase\n          .from(\"rsvps\")\n          .update(payload) // payload has NO id, created_at, user_id, submitted_by, email\n          .eq(\"id\", rsvp.id);\n\n        if (error) throw error;\n\n        toast.success(\"RSVP updated!\");\n        // Merge back into local state (preserving immutable fields)\n        setRsvp((prev) => normalizeRsvp({ ...prev, ...payload }));\n        setEdit(false);\n      } else {\n        // INSERT — include email\n        const payload = buildNormalizedPayload(\n          { ...form, email: emailForInsert },\n          { forUpdate: false }\n        );\n\n        const { data, error } = await supabase\n          .from(\"rsvps\")\n          .insert(payload)\n          .select(\"*\")\n          .limit(1)\n          .single();\n\n        if (error) throw error;\n\n        const norm = normalizeRsvp(data);\n        toast.success(\"RSVP submitted!\");\n        setRsvp(norm);\n        setForm(norm);\n        setEdit(false);\n        // Confetti will fire via the useEffect for the thank-you view\n        confettiFired.current = false; // allow the thank-you confetti to run\n      }\n    } catch (err) {\n      toast.error(err?.message || \"Could not save RSVP.\");\n    }\n  };\n\n  // Loading\n  if (loading) {\n    return (\n      <div className=\"min-h-[60vh] flex items-center justify-center\">\n        <div className=\"text-soil-600\">Loading your RSVP…</div>\n      </div>\n    );\n  }\n\n  // Not logged in\n  if (!authEmail) {\n    return (\n      <Backdrop>\n        <Card>\n          <h2 className=\"section-title\">Please sign in</h2>\n          <p className=\"text-soil-700 mt-2\">\n            You need to be logged in to view or submit your RSVP.\n          </p>\n        </Card>\n      </Backdrop>\n    );\n  }\n\n  // Thank-you / view mode\n  if (rsvp && !edit) {\n    return (\n      <Backdrop>\n        <Card>\n          <h2 className=\"section-title\">Thank you for RSVPing! 🌻</h2>\n          <p className=\"text-soil-700 mt-1\">\n            We’re excited to celebrate Abraham &amp; Jesse‑Lee with you.\n          </p>\n\n          {/* Wedding details (from .env) */}\n          <div className=\"mt-4 p-4 rounded-xl bg-white/70 border border-white/60\">\n            <h3 className=\"font-semibold text-soil-800 mb-1\">Wedding Details</h3>\n            <p className=\"text-soil-700\">\n              <span className=\"font-medium\">Date &amp; Time:</span>{\" \"}\n              {WEDDING_AT.format(\"dddd, D MMMM YYYY [at] HH:mm\")} (GMT+2)\n            </p>\n            <p className=\"text-soil-700\">\n              <span className=\"font-medium\">Venue:</span> {VENUE_NAME}\n            </p>\n            <p className=\"text-soil-700\">\n              <span className=\"font-medium\">Address:</span> {VENUE_ADDRESS}\n            </p>\n          </div>\n\n          {/* RSVP quick facts */}\n          <div className=\"mt-4 flex flex-wrap items-center gap-3\">\n            <div className=\"badge\">\n              Status: {rsvp.attending ? \"Attending\" : \"Not Attending\"}\n            </div>\n            {rsvp.dietary && <div className=\"badge\">Dietary: {rsvp.dietary}</div>}\n            {rsvp.songs && <div className=\"badge\">Songs: {rsvp.songs}</div>}\n            {rsvp.has_plus_one && rsvp.plus_one_name && (\n              <div className=\"badge\">Plus One: {rsvp.plus_one_name}</div>\n            )}\n            {rsvp.has_children && Array.isArray(rsvp.children) && rsvp.children.length > 0 && (\n              <div className=\"badge\">\n                Children: {rsvp.children.map((c) => c.name).filter(Boolean).join(\", \")}\n              </div>\n            )}\n          </div>\n\n          {/* Countdown */}\n          <div className=\"mt-6 p-4 rounded-xl bg-white/70 border border-white/60\">\n            <h3 className=\"font-semibold text-soil-800 mb-1\">Countdown to the big day</h3>\n            <p className=\"text-soil-700\">{countdown}</p>\n          </div>\n\n          {/* Money over gifts — loving note */}\n          <div className=\"mt-6 p-4 rounded-xl bg-white/70 border border-white/60\">\n            <p className=\"text-soil-700\">\n              Your presence is the greatest gift. If you’d like to bless us further, we’re humbly\n              choosing <span className=\"font-semibold\">monetary gifts</span> over physical presents\n              as we build our first home together. Thank you for loving us so generously. 💛\n            </p>\n          </div>\n\n          {/* Actions: Album & Venue */}\n          <div className=\"mt-6 grid md:grid-cols-2 gap-4\">\n            <div className=\"p-4 rounded-xl bg-white/70 border border-white/60\">\n              <h4 className=\"font-semibold text-soil-800\">Wedding Album</h4>\n              <p className=\"text-sm text-soil-700 mt-1\">\n                Browse and download photos/videos shared by guests and the couple.\n              </p>\n              <button\n                className=\"btn-primary mt-3\"\n                onClick={() => navigate(\"/wedding-album\")}\n              >\n                Open Wedding Album\n              </button>\n            </div>\n\n            <div className=\"p-4 rounded-xl bg-white/70 border border-white/60\">\n              <h4 className=\"font-semibold text-soil-800\">Venue Info</h4>\n              <p className=\"text-sm text-soil-700 mt-1\">\n                Get directions, dress code, parking details, and the live weather.\n              </p>\n              <button className=\"btn-primary mt-3\" onClick={() => navigate(\"/venue\")}>\n                View Venue Information\n              </button>\n            </div>\n          </div>\n\n          <button className=\"btn-primary mt-6\" onClick={() => setEdit(true)}>\n            Edit My RSVP\n          </button>\n        </Card>\n      </Backdrop>\n    );\n  }\n\n  // Create/Edit form (shared)\n  const isCreate = !rsvp;\n  return (\n    <Backdrop>\n      <Card className=\"space-y-4\">\n        <h2 className=\"section-title\">{isCreate ? \"Submit My RSVP\" : \"Edit My RSVP\"}</h2>\n\n        {!!formErr && (\n          <div className=\"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2\">\n            {formErr}\n          </div>\n        )}\n\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          <input\n            className=\"input\"\n            placeholder=\"Full Name\"\n            value={form?.full_name || \"\"}\n            onChange={(e) => setField(\"full_name\", e.target.value)}\n            required\n          />\n          <input\n            className=\"input opacity-80\"\n            type=\"email\"\n            placeholder=\"Email\"\n            value={(isCreate ? form?.email : authEmail) || \"\"}\n            disabled\n            title=\"Email is locked to keep your RSVP linked to your account.\"\n          />\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          <select\n            className=\"input\"\n            value={String(!!form?.attending)}\n            onChange={(e) => setField(\"attending\", e.target.value === \"true\")}\n          >\n            <option value=\"true\">Attending</option>\n            <option value=\"false\">Not Attending</option>\n          </select>\n          <input\n            className=\"input\"\n            placeholder=\"Dietary Requirements\"\n            value={form?.dietary || \"\"}\n            onChange={(e) => setField(\"dietary\", e.target.value)}\n          />\n        </div>\n\n        <input\n          className=\"input\"\n          placeholder=\"Song requests (comma-separated)\"\n          value={form?.songs || \"\"}\n          onChange={(e) => setField(\"songs\", e.target.value)}\n        />\n\n        {/* Plus One */}\n        <div className=\"card p-4 bg-white/70 border border-white/60 rounded-xl\">\n          <label className=\"flex items-center gap-3\">\n            <input\n              type=\"checkbox\"\n              checked={!!form?.has_plus_one}\n              onChange={(e) => togglePlusOne(e.target.checked)}\n            />\n            <span className=\"font-semibold text-soil-700\">Bringing a plus one?</span>\n          </label>\n          {form?.has_plus_one && (\n            <div className=\"mt-3 grid md:grid-cols-2 gap-4\">\n              <input\n                className=\"input\"\n                placeholder=\"Plus One Name\"\n                value={form?.plus_one_name || \"\"}\n                onChange={(e) => setField(\"plus_one_name\", e.target.value)}\n              />\n              <input\n                className=\"input\"\n                placeholder=\"Plus One Dietary\"\n                value={form?.plus_one_dietary || \"\"}\n                onChange={(e) => setField(\"plus_one_dietary\", e.target.value)}\n              />\n            </div>\n          )}\n        </div>\n\n        {/* Children */}\n        <div className=\"card p-4 bg-white/70 border border-white/60 rounded-xl\">\n          <label className=\"flex items-center gap-3\">\n            <input\n              type=\"checkbox\"\n              checked={!!form?.has_children}\n              onChange={(e) => toggleChildren(e.target.checked)}\n            />\n            <span className=\"font-semibold text-soil-700\">Bringing children?</span>\n          </label>\n          {form?.has_children && (\n            <div className=\"mt-3 space-y-3\">\n              {(form?.children || []).map((c, i) => (\n                <div key={i} className=\"grid md:grid-cols-2 gap-3\">\n                  <input\n                    className=\"input\"\n                    placeholder=\"Child Name\"\n                    value={c.name || \"\"}\n                    onChange={(e) => updateChild(i, \"name\", e.target.value)}\n                  />\n                  <div className=\"flex gap-3\">\n                    <input\n                      className=\"input flex-1\"\n                      placeholder=\"Child Dietary\"\n                      value={c.dietary || \"\"}\n                      onChange={(e) => updateChild(i, \"dietary\", e.target.value)}\n                    />\n                    <button\n                      type=\"button\"\n                      className=\"btn-outline\"\n                      onClick={() => removeChild(i)}\n                      title=\"Remove child\"\n                    >\n                      Remove\n                    </button>\n                  </div>\n                </div>\n              ))}\n              <button type=\"button\" className=\"btn-outline\" onClick={addChild}>\n                + Add Child\n              </button>\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex gap-3 justify-end pt-2\">\n          {!isCreate && (\n            <button\n              className=\"btn-outline\"\n              onClick={() => {\n                setForm(rsvp);\n                setEdit(false);\n                setFormErr(\"\");\n              }}\n              type=\"button\"\n            >\n              Cancel\n            </button>\n          )}\n          <button className=\"btn-primary\" onClick={save} type=\"button\">\n            {isCreate ? \"Submit\" : \"Save\"}\n          </button>\n        </div>\n      </Card>\n    </Backdrop>\n  );\n}\n\n/** Helpers */\nfunction normalizeRsvp(row) {\n  return {\n    ...row,\n    attending: !!row.attending,\n    has_plus_one: !!row.has_plus_one,\n    has_children: !!row.has_children,\n    children: Array.isArray(row.children) ? row.children : [],\n  };\n}\n\nfunction getCountdownText(target) {\n  const now = dayjs();\n  if (!target?.isValid?.() || now.isAfter(target)) return \"It's wedding time! 🎉\";\n  const diff = dayjs.duration(target.diff(now));\n  const d = Math.floor(diff.asDays());\n  const h = diff.hours().toString().padStart(2, \"0\");\n  const m = diff.minutes().toString().padStart(2, \"0\");\n  const s = diff.seconds().toString().padStart(2, \"0\");\n  return `${d} days • ${h}:${m}:${s}`;\n}\n\n/** UI wrappers */\nfunction Backdrop({ children }) {\n  return (\n    <div\n      className=\"min-h-screen w-full bg-center bg-cover relative\"\n      style={{ backgroundImage: `url(${BG_URL})` }}\n    >\n      <div className=\"absolute inset-0 bg-black/30 backdrop-blur-[1px]\" />\n      <div className=\"relative z-10 max-w-4xl mx-auto px-4 py-10\">{children}</div>\n    </div>\n  );\n}\n\nfunction Card({ children, className = \"\" }) {\n  return (\n    <div className={`bg-white/85 rounded-2xl shadow-xl border border-white/60 p-6 md:p-8 ${className}`}>\n      {children}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}