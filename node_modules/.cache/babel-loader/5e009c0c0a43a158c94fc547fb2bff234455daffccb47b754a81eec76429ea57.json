{"ast":null,"code":"// File: src/components/GoogleDrivePicker.jsx\nimport{useRef,useState,useCallback}from\"react\";import{ENV}from\"../utils/fromEnv\";// Minimal scope that allows uploads to user-visible Drive content\nimport{jsx as _jsx}from\"react/jsx-runtime\";const SCOPE=\"https://www.googleapis.com/auth/drive.file\";/** Dynamically load a script once */function addScript(src){let{id,async=true,defer=true}=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new Promise((resolve,reject)=>{if(id&&document.getElementById(id))return resolve();const s=document.createElement(\"script\");s.src=src;s.async=async;s.defer=defer;if(id)s.id=id;s.onload=()=>resolve();s.onerror=()=>reject(new Error(\"Failed to load \".concat(src)));document.head.appendChild(s);});}/** Wait for a condition with a clear timeout error */function waitFor(check,timeoutMs,label){return new Promise((resolve,reject)=>{const start=Date.now();(function tick(){try{if(check())return resolve();}catch(_unused){}if(Date.now()-start>timeoutMs){return reject(new Error(\"\".concat(label,\" timed out\")));}requestAnimationFrame(tick);})();});}export default function GoogleDrivePicker(_ref){let{folderId,onPicked,label=\"Upload from Google Drive\",className=\"\",debug=true}=_ref;const[opening,setOpening]=useState(false);const tokenRef=useRef(null);const tokenExpRef=useRef(0);const gsiClientRef=useRef(null);const log=function(){for(var _len=arguments.length,a=new Array(_len),_key=0;_key<_len;_key++){a[_key]=arguments[_key];}return debug&&console.log(\"[Picker]\",...a);};const err=function(){for(var _len2=arguments.length,a=new Array(_len2),_key2=0;_key2<_len2;_key2++){a[_key2]=arguments[_key2];}return console.error(\"[Picker]\",...a);};/** Ensure both scripts are present and picker module is loaded */const ensureScripts=useCallback(async()=>{var _window$google,_window$google$accoun;// Load gapi and GIS if missing\nif(!window.gapi){await addScript(\"https://apis.google.com/js/api.js\",{id:\"gapi-script\"});}await waitFor(()=>!!window.gapi,15000,\"gapi\");// load the picker module (makes window.google.picker available)\nawait new Promise((res,rej)=>{try{window.gapi.load(\"picker\",{callback:res});}catch(e){rej(e);}});if(!((_window$google=window.google)!==null&&_window$google!==void 0&&(_window$google$accoun=_window$google.accounts)!==null&&_window$google$accoun!==void 0&&_window$google$accoun.oauth2)){await addScript(\"https://accounts.google.com/gsi/client\",{id:\"gis-script\"});}await waitFor(()=>{var _window$google2,_window$google2$accou;return!!((_window$google2=window.google)!==null&&_window$google2!==void 0&&(_window$google2$accou=_window$google2.accounts)!==null&&_window$google2$accou!==void 0&&_window$google2$accou.oauth2);},15000,\"google.accounts.oauth2\");// Final check: picker namespace\nawait waitFor(()=>{var _window$google3;return!!((_window$google3=window.google)!==null&&_window$google3!==void 0&&_window$google3.picker);},8000,\"google.picker\");},[]);/** Initialize the token client once */const ensureGsiClient=useCallback(async()=>{await ensureScripts();if(!ENV.GOOGLE_CLIENT_ID)throw new Error(\"Missing REACT_APP_GOOGLE_CLIENT_ID\");if(!gsiClientRef.current){gsiClientRef.current=window.google.accounts.oauth2.initTokenClient({client_id:ENV.GOOGLE_CLIENT_ID,scope:SCOPE,prompt:\"\",// use \"\" to avoid popping the account chooser repeatedly\ncallback:resp=>{if(resp!==null&&resp!==void 0&&resp.error){err(\"Token error:\",resp.error);return;}tokenRef.current=resp.access_token;tokenExpRef.current=Date.now()+55*60*1000;}});log(\"GIS client ready\");}},[ensureScripts]);/** Retrieve or refresh an access token */const getAccessToken=useCallback(async()=>{if(tokenRef.current&&Date.now()<tokenExpRef.current)return tokenRef.current;await ensureGsiClient();return new Promise((resolve,reject)=>{try{gsiClientRef.current.callback=resp=>{if(resp!==null&&resp!==void 0&&resp.error)return reject(new Error(resp.error));if(!(resp!==null&&resp!==void 0&&resp.access_token))return reject(new Error(\"No access token returned\"));tokenRef.current=resp.access_token;tokenExpRef.current=Date.now()+55*60*1000;resolve(tokenRef.current);};// If you still get a silent timeout, try forcing consent:\n// gsiClientRef.current.requestAccessToken({ prompt: \"consent\" });\ngsiClientRef.current.requestAccessToken();}catch(e){reject(e);}});},[ensureGsiClient]);const openPicker=useCallback(async()=>{try{if(!ENV.GOOGLE_API_KEY)throw new Error(\"Missing REACT_APP_GOOGLE_API_KEY\");if(!ENV.GOOGLE_CLIENT_ID)throw new Error(\"Missing REACT_APP_GOOGLE_CLIENT_ID\");if(!folderId)throw new Error(\"Missing folderId\");setOpening(true);await ensureScripts();const token=await getAccessToken();const view=new window.google.picker.DocsUploadView().setIncludeFolders(true);view.setParent(folderId);const origin=\"\".concat(window.location.protocol,\"//\").concat(window.location.host);const picker=new window.google.picker.PickerBuilder().addView(view).setOAuthToken(token).setDeveloperKey(ENV.GOOGLE_API_KEY).setOrigin(origin).setTitle(\"Upload to Wedding Album\").setSize(Math.round(window.innerWidth*0.9),Math.min(720,Math.round(window.innerHeight*0.9))).setCallback(data=>{if((data===null||data===void 0?void 0:data.action)===window.google.picker.Action.PICKED){log(\"Picked:\",data.docs);onPicked===null||onPicked===void 0?void 0:onPicked(data.docs||[]);}}).build();picker.setVisible(true);log(\"Picker opened\");}catch(e){err(\"openPicker failed:\",e);alert(e!==null&&e!==void 0&&e.message?\"Google Picker error: \".concat(e.message):\"Google Picker is not available. Reload and try again.\");}finally{setOpening(false);}},[ensureScripts,getAccessToken,folderId,onPicked]);return/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:openPicker,disabled:opening,className:\"btn-primary w-full sm:w-auto \".concat(className),\"aria-busy\":opening?\"true\":\"false\",\"aria-label\":\"Open Google Drive file picker\",children:opening?\"Opening…\":label});}","map":{"version":3,"names":["useRef","useState","useCallback","ENV","jsx","_jsx","SCOPE","addScript","src","id","async","defer","arguments","length","undefined","Promise","resolve","reject","document","getElementById","s","createElement","onload","onerror","Error","concat","head","appendChild","waitFor","check","timeoutMs","label","start","Date","now","tick","_unused","requestAnimationFrame","GoogleDrivePicker","_ref","folderId","onPicked","className","debug","opening","setOpening","tokenRef","tokenExpRef","gsiClientRef","log","_len","a","Array","_key","console","err","_len2","_key2","error","ensureScripts","_window$google","_window$google$accoun","window","gapi","res","rej","load","callback","e","google","accounts","oauth2","_window$google2","_window$google2$accou","_window$google3","picker","ensureGsiClient","GOOGLE_CLIENT_ID","current","initTokenClient","client_id","scope","prompt","resp","access_token","getAccessToken","requestAccessToken","openPicker","GOOGLE_API_KEY","token","view","DocsUploadView","setIncludeFolders","setParent","origin","location","protocol","host","PickerBuilder","addView","setOAuthToken","setDeveloperKey","setOrigin","setTitle","setSize","Math","round","innerWidth","min","innerHeight","setCallback","data","action","Action","PICKED","docs","build","setVisible","alert","message","type","onClick","disabled","children"],"sources":["C:/Users/drago/OneDrive/Desktop/sussa-troue/src/components/GoogleDrivePicker.jsx"],"sourcesContent":["// File: src/components/GoogleDrivePicker.jsx\r\nimport { useRef, useState, useCallback } from \"react\";\r\nimport { ENV } from \"../utils/fromEnv\";\r\n\r\n// Minimal scope that allows uploads to user-visible Drive content\r\nconst SCOPE = \"https://www.googleapis.com/auth/drive.file\";\r\n\r\n/** Dynamically load a script once */\r\nfunction addScript(src, { id, async = true, defer = true } = {}) {\r\n  return new Promise((resolve, reject) => {\r\n    if (id && document.getElementById(id)) return resolve();\r\n    const s = document.createElement(\"script\");\r\n    s.src = src;\r\n    s.async = async;\r\n    s.defer = defer;\r\n    if (id) s.id = id;\r\n    s.onload = () => resolve();\r\n    s.onerror = () => reject(new Error(`Failed to load ${src}`));\r\n    document.head.appendChild(s);\r\n  });\r\n}\r\n\r\n/** Wait for a condition with a clear timeout error */\r\nfunction waitFor(check, timeoutMs, label) {\r\n  return new Promise((resolve, reject) => {\r\n    const start = Date.now();\r\n    (function tick() {\r\n      try {\r\n        if (check()) return resolve();\r\n      } catch {}\r\n      if (Date.now() - start > timeoutMs) {\r\n        return reject(new Error(`${label} timed out`));\r\n      }\r\n      requestAnimationFrame(tick);\r\n    })();\r\n  });\r\n}\r\n\r\nexport default function GoogleDrivePicker({\r\n  folderId,\r\n  onPicked,\r\n  label = \"Upload from Google Drive\",\r\n  className = \"\",\r\n  debug = true,\r\n}) {\r\n  const [opening, setOpening] = useState(false);\r\n  const tokenRef = useRef(null);\r\n  const tokenExpRef = useRef(0);\r\n  const gsiClientRef = useRef(null);\r\n\r\n  const log = (...a) => debug && console.log(\"[Picker]\", ...a);\r\n  const err = (...a) => console.error(\"[Picker]\", ...a);\r\n\r\n  /** Ensure both scripts are present and picker module is loaded */\r\n  const ensureScripts = useCallback(async () => {\r\n    // Load gapi and GIS if missing\r\n    if (!window.gapi) {\r\n      await addScript(\"https://apis.google.com/js/api.js\", { id: \"gapi-script\" });\r\n    }\r\n    await waitFor(() => !!window.gapi, 15000, \"gapi\");\r\n    // load the picker module (makes window.google.picker available)\r\n    await new Promise((res, rej) => {\r\n      try {\r\n        window.gapi.load(\"picker\", { callback: res });\r\n      } catch (e) {\r\n        rej(e);\r\n      }\r\n    });\r\n\r\n    if (!window.google?.accounts?.oauth2) {\r\n      await addScript(\"https://accounts.google.com/gsi/client\", { id: \"gis-script\" });\r\n    }\r\n    await waitFor(() => !!window.google?.accounts?.oauth2, 15000, \"google.accounts.oauth2\");\r\n\r\n    // Final check: picker namespace\r\n    await waitFor(() => !!window.google?.picker, 8000, \"google.picker\");\r\n  }, []);\r\n\r\n  /** Initialize the token client once */\r\n  const ensureGsiClient = useCallback(async () => {\r\n    await ensureScripts();\r\n    if (!ENV.GOOGLE_CLIENT_ID) throw new Error(\"Missing REACT_APP_GOOGLE_CLIENT_ID\");\r\n    if (!gsiClientRef.current) {\r\n      gsiClientRef.current = window.google.accounts.oauth2.initTokenClient({\r\n        client_id: ENV.GOOGLE_CLIENT_ID,\r\n        scope: SCOPE,\r\n        prompt: \"\", // use \"\" to avoid popping the account chooser repeatedly\r\n        callback: (resp) => {\r\n          if (resp?.error) {\r\n            err(\"Token error:\", resp.error);\r\n            return;\r\n          }\r\n          tokenRef.current = resp.access_token;\r\n          tokenExpRef.current = Date.now() + 55 * 60 * 1000;\r\n        },\r\n      });\r\n      log(\"GIS client ready\");\r\n    }\r\n  }, [ensureScripts]);\r\n\r\n  /** Retrieve or refresh an access token */\r\n  const getAccessToken = useCallback(async () => {\r\n    if (tokenRef.current && Date.now() < tokenExpRef.current) return tokenRef.current;\r\n    await ensureGsiClient();\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        gsiClientRef.current.callback = (resp) => {\r\n          if (resp?.error) return reject(new Error(resp.error));\r\n          if (!resp?.access_token) return reject(new Error(\"No access token returned\"));\r\n          tokenRef.current = resp.access_token;\r\n          tokenExpRef.current = Date.now() + 55 * 60 * 1000;\r\n          resolve(tokenRef.current);\r\n        };\r\n        // If you still get a silent timeout, try forcing consent:\r\n        // gsiClientRef.current.requestAccessToken({ prompt: \"consent\" });\r\n        gsiClientRef.current.requestAccessToken();\r\n      } catch (e) {\r\n        reject(e);\r\n      }\r\n    });\r\n  }, [ensureGsiClient]);\r\n\r\n  const openPicker = useCallback(async () => {\r\n    try {\r\n      if (!ENV.GOOGLE_API_KEY) throw new Error(\"Missing REACT_APP_GOOGLE_API_KEY\");\r\n      if (!ENV.GOOGLE_CLIENT_ID) throw new Error(\"Missing REACT_APP_GOOGLE_CLIENT_ID\");\r\n      if (!folderId) throw new Error(\"Missing folderId\");\r\n\r\n      setOpening(true);\r\n      await ensureScripts();\r\n\r\n      const token = await getAccessToken();\r\n\r\n      const view = new window.google.picker.DocsUploadView().setIncludeFolders(true);\r\n      view.setParent(folderId);\r\n\r\n      const origin = `${window.location.protocol}//${window.location.host}`;\r\n      const picker = new window.google.picker.PickerBuilder()\r\n        .addView(view)\r\n        .setOAuthToken(token)\r\n        .setDeveloperKey(ENV.GOOGLE_API_KEY)\r\n        .setOrigin(origin)\r\n        .setTitle(\"Upload to Wedding Album\")\r\n        .setSize(Math.round(window.innerWidth * 0.9), Math.min(720, Math.round(window.innerHeight * 0.9)))\r\n        .setCallback((data) => {\r\n          if (data?.action === window.google.picker.Action.PICKED) {\r\n            log(\"Picked:\", data.docs);\r\n            onPicked?.(data.docs || []);\r\n          }\r\n        })\r\n        .build();\r\n\r\n      picker.setVisible(true);\r\n      log(\"Picker opened\");\r\n    } catch (e) {\r\n      err(\"openPicker failed:\", e);\r\n      alert(\r\n        e?.message\r\n          ? `Google Picker error: ${e.message}`\r\n          : \"Google Picker is not available. Reload and try again.\"\r\n      );\r\n    } finally {\r\n      setOpening(false);\r\n    }\r\n  }, [ensureScripts, getAccessToken, folderId, onPicked]);\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={openPicker}\r\n      disabled={opening}\r\n      className={`btn-primary w-full sm:w-auto ${className}`}\r\n      aria-busy={opening ? \"true\" : \"false\"}\r\n      aria-label=\"Open Google Drive file picker\"\r\n    >\r\n      {opening ? \"Opening…\" : label}\r\n    </button>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}