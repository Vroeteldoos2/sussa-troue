{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drago\\\\OneDrive\\\\Desktop\\\\sussa-troue\\\\src\\\\pages\\\\WeddingAlbumPage.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { driveImageViewUrl, drivePreviewUrl } from \"../utils/driveUrls\";\nimport { parseUploaderFromFilename } from \"../utils/filename\";\nimport { supabase } from \"../supabaseClient\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function WeddingAlbumPage() {\n  _s();\n  const [items, setItems] = useState([]);\n  const [page, setPage] = useState(0);\n  const pageSize = 24;\n  useEffect(() => {\n    (async () => {\n      const {\n        data,\n        error\n      } = await supabase.from(\"album_files\").select(\"*\").order(\"created_at\", {\n        ascending: false\n      }).range(page * pageSize, page * pageSize + pageSize - 1);\n      if (!error && data) setItems(prev => [...prev, ...data]);\n    })();\n  }, [page]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-6xl mx-auto p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"my-6 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-extrabold text-soil-700\",\n        children: \"Wedding Album\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-soil-500\",\n        children: \"Photos & videos shared by guests\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\",\n      children: items.map(f => {\n        var _f$mime_type;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card overflow-hidden\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"aspect-video bg-sunflower-100\",\n            children: (_f$mime_type = f.mime_type) !== null && _f$mime_type !== void 0 && _f$mime_type.startsWith(\"image/\") ? /*#__PURE__*/_jsxDEV(\"img\", {\n              alt: f.file_name,\n              className: \"w-full h-full object-cover\",\n              src: driveImageViewUrl(f.file_id)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 29,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"iframe\", {\n              title: f.file_name,\n              className: \"w-full h-full\",\n              src: drivePreviewUrl(f.file_id),\n              allow: \"autoplay\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 31,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3 flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-soil-600\",\n              children: [\"By \", parseUploaderFromFilename(f.file_name)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 35,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"badge\",\n              children: [\"#\", f.section || \"General\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 36,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 13\n          }, this)]\n        }, f.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center mt-6\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-outline\",\n        onClick: () => setPage(p => p + 1),\n        children: \"Load more\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 49\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 5\n  }, this);\n}\n_s(WeddingAlbumPage, \"SqBHVrQE/i4Gs3+7E/rpXeaieMc=\");\n_c = WeddingAlbumPage;\nvar _c;\n$RefreshReg$(_c, \"WeddingAlbumPage\");","map":{"version":3,"names":["useEffect","useState","driveImageViewUrl","drivePreviewUrl","parseUploaderFromFilename","supabase","jsxDEV","_jsxDEV","WeddingAlbumPage","_s","items","setItems","page","setPage","pageSize","data","error","from","select","order","ascending","range","prev","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","f","_f$mime_type","mime_type","startsWith","alt","file_name","src","file_id","title","allow","section","id","onClick","p","_c","$RefreshReg$"],"sources":["C:/Users/drago/OneDrive/Desktop/sussa-troue/src/pages/WeddingAlbumPage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { driveImageViewUrl, drivePreviewUrl } from \"../utils/driveUrls\";\nimport { parseUploaderFromFilename } from \"../utils/filename\";\nimport { supabase } from \"../supabaseClient\";\n\nexport default function WeddingAlbumPage() {\n  const [items, setItems] = useState([]);\n  const [page, setPage] = useState(0);\n  const pageSize = 24;\n\n  useEffect(() => {\n    (async ()=>{\n      const { data, error } = await supabase.from(\"album_files\").select(\"*\").order(\"created_at\",{ascending:false}).range(page*pageSize, page*pageSize+pageSize-1);\n      if (!error && data) setItems(prev=>[...prev, ...data]);\n    })();\n  }, [page]);\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-4\">\n      <header className=\"my-6 text-center\">\n        <h1 className=\"text-3xl font-extrabold text-soil-700\">Wedding Album</h1>\n        <p className=\"text-soil-500\">Photos & videos shared by guests</p>\n      </header>\n      <div className=\"grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n        {items.map((f)=>(\n          <div key={f.id} className=\"card overflow-hidden\">\n            <div className=\"aspect-video bg-sunflower-100\">\n              {f.mime_type?.startsWith(\"image/\") ? (\n                <img alt={f.file_name} className=\"w-full h-full object-cover\" src={driveImageViewUrl(f.file_id)} />\n              ) : (\n                <iframe title={f.file_name} className=\"w-full h-full\" src={drivePreviewUrl(f.file_id)} allow=\"autoplay\" />\n              )}\n            </div>\n            <div className=\"p-3 flex items-center justify-between\">\n              <span className=\"text-sm text-soil-600\">By {parseUploaderFromFilename(f.file_name)}</span>\n              <span className=\"badge\">#{(f.section || \"General\")}</span>\n            </div>\n          </div>\n        ))}\n      </div>\n      <div className=\"flex justify-center mt-6\"><button className=\"btn-outline\" onClick={()=>setPage(p=>p+1)}>Load more</button></div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}