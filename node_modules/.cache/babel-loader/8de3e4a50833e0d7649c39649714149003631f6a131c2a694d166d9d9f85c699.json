{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drago\\\\OneDrive\\\\Desktop\\\\sussa-troue\\\\src\\\\pages\\\\WeddingAlbumPage.jsx\",\n  _s = $RefreshSig$();\n// File: src/pages/WeddingAlbumPage.jsx\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport dayjs from \"dayjs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BG_URL = \"https://cyxeucwesqzwlisgveiz.supabase.co/storage/v1/object/public/public-assets/flowers-8309997.jpg\";\n\n// env helpers\nconst fromEnv = v => v ? String(v).split(\"#\")[0].replace(/^[\"']|[\"']$/g, \"\").trim() : \"\";\nconst API_KEY = fromEnv(process.env.REACT_APP_GOOGLE_API_KEY);\nconst PHOTOS_FOLDER = fromEnv(process.env.REACT_APP_DRIVE_PHOTOS_FOLDER_ID);\nconst VIDEOS_FOLDER = fromEnv(process.env.REACT_APP_DRIVE_VIDEOS_FOLDER_ID);\nconst PAGE_SIZE = 48;\nfunction inferType(mime, name = \"\") {\n  const m = (mime || \"\").toLowerCase();\n  if (m.startsWith(\"image/\")) return \"image\";\n  if (m.startsWith(\"video/\")) return \"video\";\n  if (/\\.(png|jpe?g|gif|webp|bmp|heic)$/i.test(name)) return \"image\";\n  if (/\\.(mp4|mov|webm|mkv|avi)$/i.test(name)) return \"video\";\n  return \"file\";\n}\n\n// Robust view/download links for PUBLIC files/folders\nconst viewURL = id => `https://drive.google.com/uc?export=view&id=${id}&rl`; // &rl nudges raw content\nconst downloadURL = id => `https://drive.google.com/uc?export=download&id=${id}`;\nconst altMediaURL = (id, key) => `https://www.googleapis.com/drive/v3/files/${id}?alt=media&key=${key}`;\nexport default function WeddingAlbumPage() {\n  _s();\n  const [tab, setTab] = useState(\"photos\");\n  const [items, setItems] = useState([]);\n  const [nextToken, setNextToken] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n  const currentFolder = tab === \"photos\" ? PHOTOS_FOLDER : VIDEOS_FOLDER;\n  const listFolder = useCallback(async (folderId, pageToken) => {\n    var _json$error;\n    const url = new URL(\"https://www.googleapis.com/drive/v3/files\");\n    url.searchParams.set(\"q\", `'${folderId}' in parents and trashed = false`);\n    url.searchParams.set(\"fields\",\n    // include webContentLink/thumbnailLink for fallbacks\n    \"nextPageToken, files(id,name,mimeType,createdTime,thumbnailLink,webViewLink,webContentLink)\");\n    url.searchParams.set(\"orderBy\", \"createdTime desc\");\n    url.searchParams.set(\"pageSize\", String(PAGE_SIZE));\n    url.searchParams.set(\"includeItemsFromAllDrives\", \"true\");\n    url.searchParams.set(\"supportsAllDrives\", \"true\");\n    if (pageToken) url.searchParams.set(\"pageToken\", pageToken);\n    url.searchParams.set(\"key\", API_KEY);\n    const res = await fetch(url.toString());\n    const json = await res.json();\n    if (!res.ok) throw new Error(((_json$error = json.error) === null || _json$error === void 0 ? void 0 : _json$error.message) || \"Drive API error\");\n    const files = (json.files || []).map(f => {\n      const media_type = inferType(f.mimeType, f.name);\n      // Build multiple preview options; <img> will try main, then fallbacks\n      const mainView = viewURL(f.id); // fastest for public images\n      const fallback1 = f.thumbnailLink || \"\"; // Drive-generated thumbnail\n      const fallback2 = altMediaURL(f.id, API_KEY); // alt=media direct (works for public)\n      const preview_url = media_type === \"image\" ? mainView : f.webViewLink || f.webContentLink || mainView;\n      return {\n        id: f.id,\n        drive_name: f.name,\n        mimeType: f.mimeType,\n        media_type,\n        created_at: f.createdTime,\n        preview_url,\n        fallback_previews: [fallback1, fallback2].filter(Boolean),\n        webViewLink: f.webViewLink || f.webContentLink || mainView\n      };\n    });\n    return {\n      files,\n      nextPageToken: json.nextPageToken || null\n    };\n  }, []);\n  const loadInitial = useCallback(async () => {\n    if (!API_KEY || !currentFolder) return;\n    setErr(\"\");\n    setLoading(true);\n    try {\n      const {\n        files,\n        nextPageToken\n      } = await listFolder(currentFolder, null);\n      setItems(files);\n      setNextToken(nextPageToken);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [API_KEY, currentFolder, listFolder]);\n  const loadMore = useCallback(async () => {\n    if (loading || !nextToken) return;\n    setLoading(true);\n    try {\n      const {\n        files,\n        nextPageToken\n      } = await listFolder(currentFolder, nextToken);\n      setItems(prev => [...prev, ...files]);\n      setNextToken(nextPageToken);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [currentFolder, listFolder, loading, nextToken]);\n\n  // initial + when switching tabs\n  useEffect(() => {\n    setItems([]);\n    setNextToken(null);\n    loadInitial();\n    // eslint-disable-next-line\n  }, [tab]);\n\n  // group by date\n  const groups = useMemo(() => {\n    const map = {};\n    for (const it of items) {\n      const key = dayjs(it.created_at).format(\"YYYY-MM-DD\");\n      (map[key] ||= []).push(it);\n    }\n    return Object.entries(map).sort(([a], [b]) => a < b ? 1 : -1);\n  }, [items]);\n  return /*#__PURE__*/_jsxDEV(Backdrop, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"mb-6\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"section-title\",\n          children: \"Wedding Album\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn-outline ${tab === \"photos\" ? \"bg-white/80\" : \"\"}`,\n          onClick: () => setTab(\"photos\"),\n          children: \"Photos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn-outline ${tab === \"videos\" ? \"bg-white/80\" : \"\"}`,\n          onClick: () => setTab(\"videos\"),\n          children: \"Videos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), (!API_KEY || !PHOTOS_FOLDER || !VIDEOS_FOLDER) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-amber-700 bg-amber-50 border border-amber-200 rounded-md p-2 mb-4\",\n        children: [\"Missing envs. Set \", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"REACT_APP_GOOGLE_API_KEY\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 31\n        }, this), \",\", \" \", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"REACT_APP_DRIVE_PHOTOS_FOLDER_ID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this), \",\", \" \", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"REACT_APP_DRIVE_VIDEOS_FOLDER_ID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this), \" and restart the dev server.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-red-700 bg-red-50 border border-red-200 rounded-md p-2 mb-4\",\n        children: err\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }, this), items.length === 0 && !loading && !err && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-soil-700\",\n        children: \"No media yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-8\",\n        children: groups.map(([date, arr]) => /*#__PURE__*/_jsxDEV(\"section\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold text-soil-800 mb-3\",\n            children: dayjs(date).format(\"DD MMM YYYY\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\",\n            children: arr.map(it => /*#__PURE__*/_jsxDEV(AlbumCard, {\n              item: it\n            }, it.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this)]\n        }, date, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 flex items-center gap-3\",\n        children: [loading && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-soil-600\",\n          children: \"Loading\\u2026\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 23\n        }, this), !loading && nextToken && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-outline\",\n          onClick: loadMore,\n          children: \"Load more\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this), !loading && !nextToken && items.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-soil-600\",\n          children: \"End of album.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this);\n}\n_s(WeddingAlbumPage, \"XNORPJ6vHSPM88xuWL9zzybRQeU=\");\n_c = WeddingAlbumPage;\nfunction AlbumCard({\n  item\n}) {\n  const {\n    media_type,\n    preview_url,\n    drive_name,\n    created_at,\n    id,\n    webViewLink,\n    fallback_previews\n  } = item;\n  const time = dayjs(created_at).format(\"HH:mm\");\n  const downloadHref = downloadURL(id);\n  const openHref = media_type === \"image\" ? preview_url : webViewLink;\n\n  // cache-busting for flaky Drive caching\n  const cacheBusted = `${preview_url}${preview_url.includes(\"?\") ? \"&\" : \"?\"}t=${Date.now()}`;\n  const onImgError = e => {\n    const el = e.currentTarget;\n    // try fallbacks (thumbnailLink, alt=media) if the main view fails\n    if (el.dataset.fallbackIndex === undefined) {\n      el.dataset.fallbackIndex = \"0\";\n    }\n    const i = parseInt(el.dataset.fallbackIndex, 10);\n    if (fallback_previews && i < fallback_previews.length) {\n      el.src = `${fallback_previews[i]}${fallback_previews[i].includes(\"?\") ? \"&\" : \"?\"}t=${Date.now()}`;\n      el.dataset.fallbackIndex = String(i + 1);\n    } else {\n      // final fallback: show nothing but keep card usable\n      el.style.display = \"none\";\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rounded-xl overflow-hidden bg-white/70 border border-white/60\",\n    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n      href: openHref,\n      target: \"_blank\",\n      rel: \"noreferrer\",\n      title: drive_name,\n      className: \"block group\",\n      children: media_type === \"image\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: cacheBusted,\n        alt: drive_name,\n        className: \"w-full h-40 object-cover group-hover:opacity-90\",\n        loading: \"lazy\",\n        onError: onImgError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this) : media_type === \"video\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-40 flex items-center justify-center text-sm text-soil-700\",\n        children: \"Open video \\u2197\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-40 flex items-center justify-center text-sm text-soil-600\",\n        children: \"Open file \\u2197\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-2 text-xs text-soil-700 flex items-center justify-between gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"truncate\",\n        children: drive_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: time\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-2 pt-0 flex gap-2 justify-end\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"btn-outline text-xs\",\n        href: downloadHref,\n        target: \"_blank\",\n        rel: \"noreferrer\",\n        children: \"Download\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 5\n  }, this);\n}\n\n/** UI wrappers */\n_c2 = AlbumCard;\nfunction Backdrop({\n  children\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen w-full bg-center bg-cover relative\",\n    style: {\n      backgroundImage: `url(${BG_URL})`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-black/30 backdrop-blur-[1px]\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative z-10 max-w-6xl mx-auto px-4 py-10\",\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 5\n  }, this);\n}\n_c3 = Backdrop;\nfunction Card({\n  children,\n  className = \"\"\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `bg-white/85 rounded-2xl shadow-xl border border-white/60 p-6 md:p-8 ${className}`,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 5\n  }, this);\n}\n_c4 = Card;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"WeddingAlbumPage\");\n$RefreshReg$(_c2, \"AlbumCard\");\n$RefreshReg$(_c3, \"Backdrop\");\n$RefreshReg$(_c4, \"Card\");","map":{"version":3,"names":["useCallback","useEffect","useMemo","useState","dayjs","jsxDEV","_jsxDEV","BG_URL","fromEnv","v","String","split","replace","trim","API_KEY","process","env","REACT_APP_GOOGLE_API_KEY","PHOTOS_FOLDER","REACT_APP_DRIVE_PHOTOS_FOLDER_ID","VIDEOS_FOLDER","REACT_APP_DRIVE_VIDEOS_FOLDER_ID","PAGE_SIZE","inferType","mime","name","m","toLowerCase","startsWith","test","viewURL","id","downloadURL","altMediaURL","key","WeddingAlbumPage","_s","tab","setTab","items","setItems","nextToken","setNextToken","loading","setLoading","err","setErr","currentFolder","listFolder","folderId","pageToken","_json$error","url","URL","searchParams","set","res","fetch","toString","json","ok","Error","error","message","files","map","f","media_type","mimeType","mainView","fallback1","thumbnailLink","fallback2","preview_url","webViewLink","webContentLink","drive_name","created_at","createdTime","fallback_previews","filter","Boolean","nextPageToken","loadInitial","e","loadMore","prev","groups","it","format","push","Object","entries","sort","a","b","Backdrop","children","Card","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","date","arr","AlbumCard","item","_c","time","downloadHref","openHref","cacheBusted","includes","Date","now","onImgError","el","currentTarget","dataset","fallbackIndex","undefined","i","parseInt","src","style","display","href","target","rel","title","alt","onError","_c2","backgroundImage","_c3","_c4","$RefreshReg$"],"sources":["C:/Users/drago/OneDrive/Desktop/sussa-troue/src/pages/WeddingAlbumPage.jsx"],"sourcesContent":["// File: src/pages/WeddingAlbumPage.jsx\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport dayjs from \"dayjs\";\n\nconst BG_URL =\n  \"https://cyxeucwesqzwlisgveiz.supabase.co/storage/v1/object/public/public-assets/flowers-8309997.jpg\";\n\n// env helpers\nconst fromEnv = (v) => (v ? String(v).split(\"#\")[0].replace(/^[\"']|[\"']$/g, \"\").trim() : \"\");\nconst API_KEY = fromEnv(process.env.REACT_APP_GOOGLE_API_KEY);\nconst PHOTOS_FOLDER = fromEnv(process.env.REACT_APP_DRIVE_PHOTOS_FOLDER_ID);\nconst VIDEOS_FOLDER = fromEnv(process.env.REACT_APP_DRIVE_VIDEOS_FOLDER_ID);\n\nconst PAGE_SIZE = 48;\n\nfunction inferType(mime, name = \"\") {\n  const m = (mime || \"\").toLowerCase();\n  if (m.startsWith(\"image/\")) return \"image\";\n  if (m.startsWith(\"video/\")) return \"video\";\n  if (/\\.(png|jpe?g|gif|webp|bmp|heic)$/i.test(name)) return \"image\";\n  if (/\\.(mp4|mov|webm|mkv|avi)$/i.test(name)) return \"video\";\n  return \"file\";\n}\n\n// Robust view/download links for PUBLIC files/folders\nconst viewURL = (id) => `https://drive.google.com/uc?export=view&id=${id}&rl`; // &rl nudges raw content\nconst downloadURL = (id) => `https://drive.google.com/uc?export=download&id=${id}`;\nconst altMediaURL = (id, key) =>\n  `https://www.googleapis.com/drive/v3/files/${id}?alt=media&key=${key}`;\n\nexport default function WeddingAlbumPage() {\n  const [tab, setTab] = useState(\"photos\");\n  const [items, setItems] = useState([]);\n  const [nextToken, setNextToken] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n\n  const currentFolder = tab === \"photos\" ? PHOTOS_FOLDER : VIDEOS_FOLDER;\n\n  const listFolder = useCallback(\n    async (folderId, pageToken) => {\n      const url = new URL(\"https://www.googleapis.com/drive/v3/files\");\n      url.searchParams.set(\"q\", `'${folderId}' in parents and trashed = false`);\n      url.searchParams.set(\n        \"fields\",\n        // include webContentLink/thumbnailLink for fallbacks\n        \"nextPageToken, files(id,name,mimeType,createdTime,thumbnailLink,webViewLink,webContentLink)\"\n      );\n      url.searchParams.set(\"orderBy\", \"createdTime desc\");\n      url.searchParams.set(\"pageSize\", String(PAGE_SIZE));\n      url.searchParams.set(\"includeItemsFromAllDrives\", \"true\");\n      url.searchParams.set(\"supportsAllDrives\", \"true\");\n      if (pageToken) url.searchParams.set(\"pageToken\", pageToken);\n      url.searchParams.set(\"key\", API_KEY);\n\n      const res = await fetch(url.toString());\n      const json = await res.json();\n      if (!res.ok) throw new Error(json.error?.message || \"Drive API error\");\n      const files = (json.files || []).map((f) => {\n        const media_type = inferType(f.mimeType, f.name);\n        // Build multiple preview options; <img> will try main, then fallbacks\n        const mainView = viewURL(f.id); // fastest for public images\n        const fallback1 = f.thumbnailLink || \"\"; // Drive-generated thumbnail\n        const fallback2 = altMediaURL(f.id, API_KEY); // alt=media direct (works for public)\n        const preview_url =\n          media_type === \"image\" ? mainView : (f.webViewLink || f.webContentLink || mainView);\n\n        return {\n          id: f.id,\n          drive_name: f.name,\n          mimeType: f.mimeType,\n          media_type,\n          created_at: f.createdTime,\n          preview_url,\n          fallback_previews: [fallback1, fallback2].filter(Boolean),\n          webViewLink: f.webViewLink || f.webContentLink || mainView,\n        };\n      });\n      return { files, nextPageToken: json.nextPageToken || null };\n    },\n    []\n  );\n\n  const loadInitial = useCallback(async () => {\n    if (!API_KEY || !currentFolder) return;\n    setErr(\"\");\n    setLoading(true);\n    try {\n      const { files, nextPageToken } = await listFolder(currentFolder, null);\n      setItems(files);\n      setNextToken(nextPageToken);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [API_KEY, currentFolder, listFolder]);\n\n  const loadMore = useCallback(async () => {\n    if (loading || !nextToken) return;\n    setLoading(true);\n    try {\n      const { files, nextPageToken } = await listFolder(currentFolder, nextToken);\n      setItems((prev) => [...prev, ...files]);\n      setNextToken(nextPageToken);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [currentFolder, listFolder, loading, nextToken]);\n\n  // initial + when switching tabs\n  useEffect(() => {\n    setItems([]);\n    setNextToken(null);\n    loadInitial();\n    // eslint-disable-next-line\n  }, [tab]);\n\n  // group by date\n  const groups = useMemo(() => {\n    const map = {};\n    for (const it of items) {\n      const key = dayjs(it.created_at).format(\"YYYY-MM-DD\");\n      (map[key] ||= []).push(it);\n    }\n    return Object.entries(map).sort(([a], [b]) => (a < b ? 1 : -1));\n  }, [items]);\n\n  return (\n    <Backdrop>\n      <Card>\n        <header className=\"mb-6\">\n          <h1 className=\"section-title\">Wedding Album</h1>\n        </header>\n\n        <div className=\"flex gap-2 mb-4\">\n          <button\n            className={`btn-outline ${tab === \"photos\" ? \"bg-white/80\" : \"\"}`}\n            onClick={() => setTab(\"photos\")}\n          >\n            Photos\n          </button>\n          <button\n            className={`btn-outline ${tab === \"videos\" ? \"bg-white/80\" : \"\"}`}\n            onClick={() => setTab(\"videos\")}\n          >\n            Videos\n          </button>\n        </div>\n\n        {(!API_KEY || !PHOTOS_FOLDER || !VIDEOS_FOLDER) && (\n          <div className=\"text-sm text-amber-700 bg-amber-50 border border-amber-200 rounded-md p-2 mb-4\">\n            Missing envs. Set <code>REACT_APP_GOOGLE_API_KEY</code>,{\" \"}\n            <code>REACT_APP_DRIVE_PHOTOS_FOLDER_ID</code>,{\" \"}\n            <code>REACT_APP_DRIVE_VIDEOS_FOLDER_ID</code> and restart the dev server.\n          </div>\n        )}\n\n       \n        {err && (\n          <div className=\"text-sm text-red-700 bg-red-50 border border-red-200 rounded-md p-2 mb-4\">\n            {err}\n          </div>\n        )}\n\n        {items.length === 0 && !loading && !err && (\n          <p className=\"text-soil-700\">No media yet.</p>\n        )}\n\n        <div className=\"space-y-8\">\n          {groups.map(([date, arr]) => (\n            <section key={date}>\n              <h2 className=\"text-lg font-semibold text-soil-800 mb-3\">\n                {dayjs(date).format(\"DD MMM YYYY\")}\n              </h2>\n              <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\">\n                {arr.map((it) => (\n                  <AlbumCard key={it.id} item={it} />\n                ))}\n              </div>\n            </section>\n          ))}\n        </div>\n\n        <div className=\"mt-6 flex items-center gap-3\">\n          {loading && <span className=\"text-soil-600\">Loading…</span>}\n          {!loading && nextToken && (\n            <button className=\"btn-outline\" onClick={loadMore}>\n              Load more\n            </button>\n          )}\n          {!loading && !nextToken && items.length > 0 && (\n            <span className=\"text-soil-600\">End of album.</span>\n          )}\n        </div>\n      </Card>\n    </Backdrop>\n  );\n}\n\nfunction AlbumCard({ item }) {\n  const { media_type, preview_url, drive_name, created_at, id, webViewLink, fallback_previews } = item;\n  const time = dayjs(created_at).format(\"HH:mm\");\n  const downloadHref = downloadURL(id);\n  const openHref = media_type === \"image\" ? preview_url : webViewLink;\n\n  // cache-busting for flaky Drive caching\n  const cacheBusted = `${preview_url}${preview_url.includes(\"?\") ? \"&\" : \"?\"}t=${Date.now()}`;\n\n  const onImgError = (e) => {\n    const el = e.currentTarget;\n    // try fallbacks (thumbnailLink, alt=media) if the main view fails\n    if (el.dataset.fallbackIndex === undefined) {\n      el.dataset.fallbackIndex = \"0\";\n    }\n    const i = parseInt(el.dataset.fallbackIndex, 10);\n    if (fallback_previews && i < fallback_previews.length) {\n      el.src = `${fallback_previews[i]}${fallback_previews[i].includes(\"?\") ? \"&\" : \"?\"}t=${Date.now()}`;\n      el.dataset.fallbackIndex = String(i + 1);\n    } else {\n      // final fallback: show nothing but keep card usable\n      el.style.display = \"none\";\n    }\n  };\n\n  return (\n    <div className=\"rounded-xl overflow-hidden bg-white/70 border border-white/60\">\n      <a href={openHref} target=\"_blank\" rel=\"noreferrer\" title={drive_name} className=\"block group\">\n        {media_type === \"image\" ? (\n          <img\n            src={cacheBusted}\n            alt={drive_name}\n            className=\"w-full h-40 object-cover group-hover:opacity-90\"\n            loading=\"lazy\"\n            onError={onImgError}\n          />\n        ) : media_type === \"video\" ? (\n          <div className=\"w-full h-40 flex items-center justify-center text-sm text-soil-700\">\n            Open video ↗\n          </div>\n        ) : (\n          <div className=\"w-full h-40 flex items-center justify-center text-sm text-soil-600\">\n            Open file ↗\n          </div>\n        )}\n      </a>\n      <div className=\"p-2 text-xs text-soil-700 flex items-center justify-between gap-2\">\n        <span className=\"truncate\">{drive_name}</span>\n        <span>{time}</span>\n      </div>\n      <div className=\"p-2 pt-0 flex gap-2 justify-end\">\n        <a className=\"btn-outline text-xs\" href={downloadHref} target=\"_blank\" rel=\"noreferrer\">\n          Download\n        </a>\n      </div>\n    </div>\n  );\n}\n\n/** UI wrappers */\nfunction Backdrop({ children }) {\n  return (\n    <div\n      className=\"min-h-screen w-full bg-center bg-cover relative\"\n      style={{ backgroundImage: `url(${BG_URL})` }}\n    >\n      <div className=\"absolute inset-0 bg-black/30 backdrop-blur-[1px]\" />\n      <div className=\"relative z-10 max-w-6xl mx-auto px-4 py-10\">{children}</div>\n    </div>\n  );\n}\nfunction Card({ children, className = \"\" }) {\n  return (\n    <div className={`bg-white/85 rounded-2xl shadow-xl border border-white/60 p-6 md:p-8 ${className}`}>\n      {children}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}