{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drago\\\\OneDrive\\\\Desktop\\\\sussa-troue\\\\src\\\\pages\\\\ViewRSVPPage.jsx\",\n  _s = $RefreshSig$();\n// File: src/pages/ViewRSVPPage.jsx\nimport { useEffect, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { supabase } from \"../supabaseClient\";\nimport { toast } from \"react-hot-toast\";\nimport confetti from \"canvas-confetti\";\nimport dayjs from \"dayjs\";\nimport Backdrop from \"../components/Backdrop\";\nimport Card from \"../components/Card\";\nimport { ENV } from \"../utils/fromEnv\";\nimport { safeUpdatePayload } from \"../utils/safeUpdate\";\nimport useCountdown from \"../hooks/useCountdown\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ViewRSVPPage() {\n  _s();\n  const navigate = useNavigate();\n  const [rsvp, setRsvp] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [edit, setEdit] = useState(false);\n  const [form, setForm] = useState(null);\n  const [formErr, setFormErr] = useState(\"\");\n  const [authEmail, setAuthEmail] = useState(null);\n  const [saving, setSaving] = useState(false);\n  const confettiFired = useRef(false);\n  const countdown = useCountdown(ENV.WEDDING_DATE_TIME || \"2025-11-08T14:30:00+02:00\");\n  const isValidEmail = v => /^\\S+@\\S+\\.\\S+$/.test(v || \"\");\n  useEffect(() => {\n    (async () => {\n      try {\n        var _auth$user;\n        const {\n          data: auth\n        } = await supabase.auth.getUser();\n        const email = (auth === null || auth === void 0 ? void 0 : (_auth$user = auth.user) === null || _auth$user === void 0 ? void 0 : _auth$user.email) || null;\n        setAuthEmail(email);\n        if (!email) {\n          setLoading(false);\n          return;\n        }\n        const {\n          data: rows,\n          error\n        } = await supabase.from(\"rsvps\").select(\"*\").eq(\"email\", email.toLowerCase()).order(\"created_at\", {\n          ascending: false\n        }).limit(1);\n        if (error) throw error;\n        if (rows && rows.length) {\n          const norm = normalizeRsvp(rows[0]);\n          setRsvp(norm);\n          setForm(norm);\n          setEdit(false);\n        } else {\n          const fresh = normalizeRsvp({\n            full_name: \"\",\n            email: email.toLowerCase(),\n            attending: true,\n            dietary: \"\",\n            songs: \"\",\n            has_plus_one: false,\n            plus_one_name: \"\",\n            plus_one_dietary: \"\",\n            has_children: false,\n            children: []\n          });\n          setForm(fresh);\n          setEdit(true);\n        }\n      } catch (e) {\n        toast.error((e === null || e === void 0 ? void 0 : e.message) || \"Could not load your RSVP.\");\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, []);\n\n  // Confetti on thank-you view (once)\n  useEffect(() => {\n    if (!loading && rsvp && !edit && !confettiFired.current) {\n      confettiFired.current = true;\n      confetti({\n        particleCount: 120,\n        spread: 70,\n        origin: {\n          y: 0.6\n        }\n      });\n      setTimeout(() => confetti({\n        particleCount: 80,\n        spread: 80,\n        origin: {\n          y: 0.6\n        }\n      }), 400);\n    }\n  }, [loading, rsvp, edit]);\n  const setField = (key, val) => setForm(f => ({\n    ...f,\n    [key]: val\n  }));\n  const togglePlusOne = checked => setForm(f => ({\n    ...f,\n    has_plus_one: checked,\n    ...(checked ? {} : {\n      plus_one_name: \"\",\n      plus_one_dietary: \"\"\n    })\n  }));\n  const toggleChildren = checked => setForm(f => ({\n    ...f,\n    has_children: checked,\n    ...(checked ? {} : {\n      children: []\n    })\n  }));\n  const addChild = () => setForm(f => ({\n    ...f,\n    children: [...(f.children || []), {\n      name: \"\",\n      dietary: \"\"\n    }]\n  }));\n  const updateChild = (i, key, val) => setForm(f => {\n    const copy = [...(f.children || [])];\n    copy[i] = {\n      ...copy[i],\n      [key]: val\n    };\n    return {\n      ...f,\n      children: copy\n    };\n  });\n  const removeChild = i => setForm(f => {\n    const copy = [...(f.children || [])];\n    copy.splice(i, 1);\n    return {\n      ...f,\n      children: copy\n    };\n  });\n\n  /** Build a clean payload for insert/update */\n  const buildPayload = (src, {\n    forUpdate\n  }) => {\n    const cleaned = {\n      full_name: (src.full_name || \"\").trim(),\n      attending: !!src.attending,\n      dietary: src.dietary || \"\",\n      songs: src.songs || \"\",\n      has_plus_one: !!src.has_plus_one,\n      plus_one_name: src.has_plus_one ? src.plus_one_name || \"\" : \"\",\n      plus_one_dietary: src.has_plus_one ? src.plus_one_dietary || \"\" : \"\",\n      has_children: !!src.has_children,\n      children: Array.isArray(src.children) ? src.children : []\n    };\n    if (!cleaned.has_children) cleaned.children = [];\n    if (!forUpdate) cleaned.email = (src.email || authEmail || \"\").trim().toLowerCase();\n    return forUpdate ? safeUpdatePayload(cleaned) : cleaned;\n  };\n  const save = async () => {\n    if (saving) return;\n    try {\n      setFormErr(\"\");\n      const fullName = ((form === null || form === void 0 ? void 0 : form.full_name) || \"\").trim();\n      if (!fullName) return setFormErr(\"Please enter your full name.\");\n      const emailForInsert = ((form === null || form === void 0 ? void 0 : form.email) || authEmail || \"\").trim().toLowerCase();\n      if (!rsvp && !isValidEmail(emailForInsert)) {\n        return setFormErr(\"Your email address looks invalid.\");\n      }\n      setSaving(true);\n      if (rsvp !== null && rsvp !== void 0 && rsvp.id) {\n        // UPDATE\n        const payload = buildPayload(form, {\n          forUpdate: true\n        });\n        const {\n          error\n        } = await supabase.from(\"rsvps\").update(payload).eq(\"id\", rsvp.id);\n        if (error) throw error;\n        toast.success(\"RSVP updated!\");\n        setRsvp(prev => normalizeRsvp({\n          ...prev,\n          ...payload\n        }));\n        setEdit(false);\n      } else {\n        // INSERT\n        const payload = buildPayload({\n          ...form,\n          email: emailForInsert\n        }, {\n          forUpdate: false\n        });\n        const {\n          data,\n          error\n        } = await supabase.from(\"rsvps\").insert(payload).select(\"*\").single();\n        if (error) throw error;\n        const norm = normalizeRsvp(data);\n        toast.success(\"RSVP submitted!\");\n        setRsvp(norm);\n        setForm(norm);\n        setEdit(false);\n        confettiFired.current = false; // allow thank-you confetti\n      }\n    } catch (err) {\n      toast.error((err === null || err === void 0 ? void 0 : err.message) || \"Could not save RSVP.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Loading\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-[60vh] flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-soil-600\",\n        role: \"status\",\n        \"aria-live\": \"polite\",\n        children: \"Loading your RSVP\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Not logged in\n  if (!authEmail) {\n    return /*#__PURE__*/_jsxDEV(Backdrop, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-4xl mx-auto px-4 py-10\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"p-6 md:p-8 text-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"section-title\",\n            children: \"Please sign in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-2 text-white/80\",\n            children: \"You need to be logged in to view or submit your RSVP.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Thank-you / view mode\n  if (rsvp && !edit) {\n    const weddingAtText = (ENV.WEDDING_DATE_TIME ? dayjs(ENV.WEDDING_DATE_TIME) : dayjs(\"2025-11-08T14:30:00+02:00\")).format(\"dddd, D MMMM YYYY [at] HH:mm\");\n    const mapsHref = ENV.VENUE_ADDRESS ? `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(ENV.VENUE_ADDRESS)}` : null;\n    return /*#__PURE__*/_jsxDEV(Backdrop, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-4xl mx-auto px-4 py-10\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"p-6 md:p-8 text-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"section-title\",\n            children: \"Thank you for RSVPing! \\uD83C\\uDF3B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-white/90\",\n            children: \"We\\u2019re excited to celebrate Abraham & Jesse\\u2011Lee with you.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 p-4 rounded-xl bg-white/10 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold mb-1\",\n              children: \"Wedding Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-white/90\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"Date & Time:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 17\n              }, this), \" \", weddingAtText, \" (GMT+2)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-white/90\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"Venue:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this), \" \", ENV.VENUE_NAME || \"Wedding Venue\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-white/90\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"Address:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }, this), \" \", ENV.VENUE_ADDRESS || \"To be announced\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, this), mapsHref && /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"btn-primary mt-3 inline-block\",\n              href: mapsHref,\n              target: \"_blank\",\n              rel: \"noreferrer\",\n              \"aria-label\": \"Open Google Maps for directions\",\n              children: \"Get Directions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4 flex flex-wrap items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"badge\",\n              children: [\"Status: \", rsvp.attending ? \"Attending\" : \"Not Attending\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this), rsvp.dietary && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"badge\",\n              children: [\"Dietary: \", rsvp.dietary]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 32\n            }, this), rsvp.songs && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"badge\",\n              children: [\"Songs: \", rsvp.songs]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 30\n            }, this), rsvp.has_plus_one && rsvp.plus_one_name && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"badge\",\n              children: [\"Plus One: \", rsvp.plus_one_name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this), rsvp.has_children && Array.isArray(rsvp.children) && rsvp.children.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"badge\",\n              children: [\"Children: \", rsvp.children.map(c => c.name).filter(Boolean).join(\", \")]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 p-4 rounded-xl bg-white/10 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold mb-1\",\n              children: \"Countdown to the big day\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-white/90\",\n              children: countdown\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 p-4 rounded-xl bg-white/10 border border-white/20\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-white/90\",\n              children: [\"Your presence is the greatest gift. If you\\u2019d like to bless us further, we\\u2019re humbly choosing \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: \"monetary gifts\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 39\n              }, this), \" over physical presents as we build our first home together. Thank you for loving us so generously. \\uD83D\\uDC9B\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 grid md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 rounded-xl bg-white/10 border border-white/20\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold\",\n                children: \"Wedding Album\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-white/80 mt-1\",\n                children: \"Browse and download photos/videos shared by guests and the couple.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-primary mt-3\",\n                onClick: () => navigate(\"/album\"),\n                children: \"Open Wedding Album\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 rounded-xl bg-white/10 border border-white/20\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold\",\n                children: \"Venue Info\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-white/80 mt-1\",\n                children: \"Get directions, parking details, and more.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-primary mt-3\",\n                onClick: () => navigate(\"/venue\"),\n                children: \"View Venue Information\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary mt-6\",\n            onClick: () => setEdit(true),\n            children: \"Edit My RSVP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Create/Edit form\n  const isCreate = !rsvp;\n  return /*#__PURE__*/_jsxDEV(Backdrop, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto px-4 py-10\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"p-6 md:p-8 text-white space-y-4\",\n        \"aria-busy\": saving ? \"true\" : \"false\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: isCreate ? \"Submit My RSVP\" : \"Edit My RSVP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), !!formErr && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-red-200 bg-red-900/20 border border-red-300/40 rounded-md p-2\",\n          role: \"alert\",\n          children: formErr\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block\",\n            htmlFor: \"full_name\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Full Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"full_name\",\n              className: \"input w-full\",\n              placeholder: \"Full Name\",\n              value: (form === null || form === void 0 ? void 0 : form.full_name) || \"\",\n              onChange: e => setField(\"full_name\", e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block\",\n            htmlFor: \"email\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Email (locked)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"email\",\n              className: \"input w-full opacity-80\",\n              type: \"email\",\n              placeholder: \"Email\",\n              value: (isCreate ? form === null || form === void 0 ? void 0 : form.email : authEmail) || \"\",\n              disabled: true,\n              title: \"Email is linked to your account and cannot be changed here.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block\",\n            htmlFor: \"attending\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Attending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"attending\",\n              className: \"input w-full\",\n              value: String(!!(form !== null && form !== void 0 && form.attending)),\n              onChange: e => setField(\"attending\", e.target.value === \"true\"),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"true\",\n                children: \"Attending\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"false\",\n                children: \"Not Attending\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block\",\n            htmlFor: \"dietary\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Dietary Requirements\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"dietary\",\n              className: \"input w-full\",\n              placeholder: \"Dietary Requirements\",\n              value: (form === null || form === void 0 ? void 0 : form.dietary) || \"\",\n              onChange: e => setField(\"dietary\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block\",\n          htmlFor: \"songs\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sr-only\",\n            children: \"Song requests\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"songs\",\n            className: \"input w-full\",\n            placeholder: \"Song requests (comma-separated)\",\n            value: (form === null || form === void 0 ? void 0 : form.songs) || \"\",\n            onChange: e => setField(\"songs\", e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 rounded-xl bg-white/10 border border-white/20\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"flex items-center gap-3\",\n            htmlFor: \"has_plus_one\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"has_plus_one\",\n              type: \"checkbox\",\n              checked: !!(form !== null && form !== void 0 && form.has_plus_one),\n              onChange: e => togglePlusOne(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: \"Bringing a plus one?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), (form === null || form === void 0 ? void 0 : form.has_plus_one) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 grid md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block\",\n              htmlFor: \"plus_one_name\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"sr-only\",\n                children: \"Plus One Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"plus_one_name\",\n                className: \"input w-full\",\n                placeholder: \"Plus One Name\",\n                value: (form === null || form === void 0 ? void 0 : form.plus_one_name) || \"\",\n                onChange: e => setField(\"plus_one_name\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block\",\n              htmlFor: \"plus_one_dietary\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"sr-only\",\n                children: \"Plus One Dietary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"plus_one_dietary\",\n                className: \"input w-full\",\n                placeholder: \"Plus One Dietary\",\n                value: (form === null || form === void 0 ? void 0 : form.plus_one_dietary) || \"\",\n                onChange: e => setField(\"plus_one_dietary\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 rounded-xl bg-white/10 border border-white/20\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"flex items-center gap-3\",\n            htmlFor: \"has_children\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"has_children\",\n              type: \"checkbox\",\n              checked: !!(form !== null && form !== void 0 && form.has_children),\n              onChange: e => toggleChildren(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: \"Bringing children?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 13\n          }, this), (form === null || form === void 0 ? void 0 : form.has_children) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 space-y-3\",\n            children: [((form === null || form === void 0 ? void 0 : form.children) || []).map((c, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid md:grid-cols-2 gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block\",\n                htmlFor: `child_name_${i}`,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"sr-only\",\n                  children: \"Child Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: `child_name_${i}`,\n                  className: \"input w-full\",\n                  placeholder: \"Child Name\",\n                  value: c.name || \"\",\n                  onChange: e => updateChild(i, \"name\", e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block flex-1\",\n                  htmlFor: `child_dietary_${i}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"sr-only\",\n                    children: \"Child Dietary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 448,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    id: `child_dietary_${i}`,\n                    className: \"input w-full\",\n                    placeholder: \"Child Dietary\",\n                    value: c.dietary || \"\",\n                    onChange: e => updateChild(i, \"dietary\", e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 449,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn-outline\",\n                  onClick: () => removeChild(i),\n                  title: \"Remove child\",\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 21\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-outline\",\n              onClick: addChild,\n              children: \"+ Add Child\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-3 justify-end pt-2\",\n          children: [!isCreate && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-outline\",\n            onClick: () => {\n              setForm(rsvp);\n              setEdit(false);\n              setFormErr(\"\");\n            },\n            type: \"button\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            onClick: save,\n            type: \"button\",\n            disabled: saving,\n            children: saving ? \"Savingâ€¦\" : isCreate ? \"Submit\" : \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 311,\n    columnNumber: 5\n  }, this);\n}\n\n/** Helpers */\n_s(ViewRSVPPage, \"Va6G/43t+MtUJt+UbAM7LobliJw=\", false, function () {\n  return [useNavigate, useCountdown];\n});\n_c = ViewRSVPPage;\nfunction normalizeRsvp(row) {\n  return {\n    ...row,\n    attending: !!row.attending,\n    has_plus_one: !!row.has_plus_one,\n    has_children: !!row.has_children,\n    children: Array.isArray(row.children) ? row.children : []\n  };\n}\nvar _c;\n$RefreshReg$(_c, \"ViewRSVPPage\");","map":{"version":3,"names":["useEffect","useRef","useState","useNavigate","supabase","toast","confetti","dayjs","Backdrop","Card","ENV","safeUpdatePayload","useCountdown","jsxDEV","_jsxDEV","ViewRSVPPage","_s","navigate","rsvp","setRsvp","loading","setLoading","edit","setEdit","form","setForm","formErr","setFormErr","authEmail","setAuthEmail","saving","setSaving","confettiFired","countdown","WEDDING_DATE_TIME","isValidEmail","v","test","_auth$user","data","auth","getUser","email","user","rows","error","from","select","eq","toLowerCase","order","ascending","limit","length","norm","normalizeRsvp","fresh","full_name","attending","dietary","songs","has_plus_one","plus_one_name","plus_one_dietary","has_children","children","e","message","current","particleCount","spread","origin","y","setTimeout","setField","key","val","f","togglePlusOne","checked","toggleChildren","addChild","name","updateChild","i","copy","removeChild","splice","buildPayload","src","forUpdate","cleaned","trim","Array","isArray","save","fullName","emailForInsert","id","payload","update","success","prev","insert","single","err","className","role","fileName","_jsxFileName","lineNumber","columnNumber","weddingAtText","format","mapsHref","VENUE_ADDRESS","encodeURIComponent","VENUE_NAME","href","target","rel","map","c","filter","Boolean","join","onClick","isCreate","htmlFor","placeholder","value","onChange","required","type","disabled","title","String","_c","row","$RefreshReg$"],"sources":["C:/Users/drago/OneDrive/Desktop/sussa-troue/src/pages/ViewRSVPPage.jsx"],"sourcesContent":["// File: src/pages/ViewRSVPPage.jsx\nimport { useEffect, useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { supabase } from \"../supabaseClient\";\nimport { toast } from \"react-hot-toast\";\nimport confetti from \"canvas-confetti\";\nimport dayjs from \"dayjs\";\nimport Backdrop from \"../components/Backdrop\";\nimport Card from \"../components/Card\";\nimport { ENV } from \"../utils/fromEnv\";\nimport { safeUpdatePayload } from \"../utils/safeUpdate\";\nimport useCountdown from \"../hooks/useCountdown\";\n\nexport default function ViewRSVPPage() {\n  const navigate = useNavigate();\n\n  const [rsvp, setRsvp] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [edit, setEdit] = useState(false);\n  const [form, setForm] = useState(null);\n  const [formErr, setFormErr] = useState(\"\");\n  const [authEmail, setAuthEmail] = useState(null);\n  const [saving, setSaving] = useState(false);\n  const confettiFired = useRef(false);\n\n  const countdown = useCountdown(ENV.WEDDING_DATE_TIME || \"2025-11-08T14:30:00+02:00\");\n  const isValidEmail = (v) => /^\\S+@\\S+\\.\\S+$/.test(v || \"\");\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const { data: auth } = await supabase.auth.getUser();\n        const email = auth?.user?.email || null;\n        setAuthEmail(email);\n        if (!email) { setLoading(false); return; }\n\n        const { data: rows, error } = await supabase\n          .from(\"rsvps\")\n          .select(\"*\")\n          .eq(\"email\", email.toLowerCase())\n          .order(\"created_at\", { ascending: false })\n          .limit(1);\n\n        if (error) throw error;\n\n        if (rows && rows.length) {\n          const norm = normalizeRsvp(rows[0]);\n          setRsvp(norm);\n          setForm(norm);\n          setEdit(false);\n        } else {\n          const fresh = normalizeRsvp({\n            full_name: \"\",\n            email: email.toLowerCase(),\n            attending: true,\n            dietary: \"\",\n            songs: \"\",\n            has_plus_one: false,\n            plus_one_name: \"\",\n            plus_one_dietary: \"\",\n            has_children: false,\n            children: [],\n          });\n          setForm(fresh);\n          setEdit(true);\n        }\n      } catch (e) {\n        toast.error(e?.message || \"Could not load your RSVP.\");\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, []);\n\n  // Confetti on thank-you view (once)\n  useEffect(() => {\n    if (!loading && rsvp && !edit && !confettiFired.current) {\n      confettiFired.current = true;\n      confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 } });\n      setTimeout(() => confetti({ particleCount: 80, spread: 80, origin: { y: 0.6 } }), 400);\n    }\n  }, [loading, rsvp, edit]);\n\n  const setField = (key, val) => setForm((f) => ({ ...f, [key]: val }));\n  const togglePlusOne = (checked) =>\n    setForm((f) => ({\n      ...f,\n      has_plus_one: checked,\n      ...(checked ? {} : { plus_one_name: \"\", plus_one_dietary: \"\" }),\n    }));\n  const toggleChildren = (checked) =>\n    setForm((f) => ({\n      ...f,\n      has_children: checked,\n      ...(checked ? {} : { children: [] }),\n    }));\n  const addChild = () =>\n    setForm((f) => ({ ...f, children: [...(f.children || []), { name: \"\", dietary: \"\" }] }));\n  const updateChild = (i, key, val) =>\n    setForm((f) => {\n      const copy = [...(f.children || [])];\n      copy[i] = { ...copy[i], [key]: val };\n      return { ...f, children: copy };\n    });\n  const removeChild = (i) =>\n    setForm((f) => {\n      const copy = [...(f.children || [])];\n      copy.splice(i, 1);\n      return { ...f, children: copy };\n    });\n\n  /** Build a clean payload for insert/update */\n  const buildPayload = (src, { forUpdate }) => {\n    const cleaned = {\n      full_name: (src.full_name || \"\").trim(),\n      attending: !!src.attending,\n      dietary: src.dietary || \"\",\n      songs: src.songs || \"\",\n      has_plus_one: !!src.has_plus_one,\n      plus_one_name: src.has_plus_one ? src.plus_one_name || \"\" : \"\",\n      plus_one_dietary: src.has_plus_one ? src.plus_one_dietary || \"\" : \"\",\n      has_children: !!src.has_children,\n      children: Array.isArray(src.children) ? src.children : [],\n    };\n    if (!cleaned.has_children) cleaned.children = [];\n    if (!forUpdate) cleaned.email = (src.email || authEmail || \"\").trim().toLowerCase();\n    return forUpdate ? safeUpdatePayload(cleaned) : cleaned;\n  };\n\n  const save = async () => {\n    if (saving) return;\n    try {\n      setFormErr(\"\");\n\n      const fullName = (form?.full_name || \"\").trim();\n      if (!fullName) return setFormErr(\"Please enter your full name.\");\n\n      const emailForInsert = (form?.email || authEmail || \"\").trim().toLowerCase();\n      if (!rsvp && !isValidEmail(emailForInsert)) {\n        return setFormErr(\"Your email address looks invalid.\");\n      }\n\n      setSaving(true);\n\n      if (rsvp?.id) {\n        // UPDATE\n        const payload = buildPayload(form, { forUpdate: true });\n        const { error } = await supabase.from(\"rsvps\").update(payload).eq(\"id\", rsvp.id);\n        if (error) throw error;\n\n        toast.success(\"RSVP updated!\");\n        setRsvp((prev) => normalizeRsvp({ ...prev, ...payload }));\n        setEdit(false);\n      } else {\n        // INSERT\n        const payload = buildPayload({ ...form, email: emailForInsert }, { forUpdate: false });\n        const { data, error } = await supabase.from(\"rsvps\").insert(payload).select(\"*\").single();\n        if (error) throw error;\n\n        const norm = normalizeRsvp(data);\n        toast.success(\"RSVP submitted!\");\n        setRsvp(norm);\n        setForm(norm);\n        setEdit(false);\n        confettiFired.current = false; // allow thank-you confetti\n      }\n    } catch (err) {\n      toast.error(err?.message || \"Could not save RSVP.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Loading\n  if (loading) {\n    return (\n      <div className=\"min-h-[60vh] flex items-center justify-center\">\n        <div className=\"text-soil-600\" role=\"status\" aria-live=\"polite\">Loading your RSVPâ€¦</div>\n      </div>\n    );\n  }\n\n  // Not logged in\n  if (!authEmail) {\n    return (\n      <Backdrop>\n        <div className=\"max-w-4xl mx-auto px-4 py-10\">\n          <Card className=\"p-6 md:p-8 text-white\">\n            <h2 className=\"section-title\">Please sign in</h2>\n            <p className=\"mt-2 text-white/80\">You need to be logged in to view or submit your RSVP.</p>\n          </Card>\n        </div>\n      </Backdrop>\n    );\n  }\n\n  // Thank-you / view mode\n  if (rsvp && !edit) {\n    const weddingAtText = (ENV.WEDDING_DATE_TIME\n      ? dayjs(ENV.WEDDING_DATE_TIME)\n      : dayjs(\"2025-11-08T14:30:00+02:00\")\n    ).format(\"dddd, D MMMM YYYY [at] HH:mm\");\n\n    const mapsHref = ENV.VENUE_ADDRESS\n      ? `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(ENV.VENUE_ADDRESS)}`\n      : null;\n\n    return (\n      <Backdrop>\n        <div className=\"max-w-4xl mx-auto px-4 py-10\">\n          <Card className=\"p-6 md:p-8 text-white\">\n            <h2 className=\"section-title\">Thank you for RSVPing! ðŸŒ»</h2>\n            <p className=\"mt-1 text-white/90\">\n              Weâ€™re excited to celebrate Abraham &amp; Jesseâ€‘Lee with you.\n            </p>\n\n            {/* Wedding details (from .env) */}\n            <div className=\"mt-4 p-4 rounded-xl bg-white/10 border border-white/20\">\n              <h3 className=\"font-semibold mb-1\">Wedding Details</h3>\n              <p className=\"text-white/90\">\n                <span className=\"font-medium\">Date &amp; Time:</span> {weddingAtText} (GMT+2)\n              </p>\n              <p className=\"text-white/90\">\n                <span className=\"font-medium\">Venue:</span> {ENV.VENUE_NAME || \"Wedding Venue\"}\n              </p>\n              <p className=\"text-white/90\">\n                <span className=\"font-medium\">Address:</span> {ENV.VENUE_ADDRESS || \"To be announced\"}\n              </p>\n\n              {/* Get Directions CTA */}\n              {mapsHref && (\n                <a\n                  className=\"btn-primary mt-3 inline-block\"\n                  href={mapsHref}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  aria-label=\"Open Google Maps for directions\"\n                >\n                  Get Directions\n                </a>\n              )}\n            </div>\n\n            {/* RSVP quick facts */}\n            <div className=\"mt-4 flex flex-wrap items-center gap-3\">\n              <div className=\"badge\">\n                Status: {rsvp.attending ? \"Attending\" : \"Not Attending\"}\n              </div>\n              {rsvp.dietary && <div className=\"badge\">Dietary: {rsvp.dietary}</div>}\n              {rsvp.songs && <div className=\"badge\">Songs: {rsvp.songs}</div>}\n              {rsvp.has_plus_one && rsvp.plus_one_name && (\n                <div className=\"badge\">Plus One: {rsvp.plus_one_name}</div>\n              )}\n              {rsvp.has_children && Array.isArray(rsvp.children) && rsvp.children.length > 0 && (\n                <div className=\"badge\">\n                  Children: {rsvp.children.map((c) => c.name).filter(Boolean).join(\", \")}\n                </div>\n              )}\n            </div>\n\n            {/* Countdown */}\n            <div className=\"mt-6 p-4 rounded-xl bg-white/10 border border-white/20\">\n              <h3 className=\"font-semibold mb-1\">Countdown to the big day</h3>\n              <p className=\"text-white/90\">{countdown}</p>\n            </div>\n\n            {/* Loving note */}\n            <div className=\"mt-6 p-4 rounded-xl bg-white/10 border border-white/20\">\n              <p className=\"text-white/90\">\n                Your presence is the greatest gift. If youâ€™d like to bless us further,\n                weâ€™re humbly choosing <span className=\"font-semibold\">monetary gifts</span> over\n                physical presents as we build our first home together. Thank you for loving us so generously. ðŸ’›\n              </p>\n            </div>\n\n            {/* Actions */}\n            <div className=\"mt-6 grid md:grid-cols-2 gap-4\">\n              <div className=\"p-4 rounded-xl bg-white/10 border border-white/20\">\n                <h4 className=\"font-semibold\">Wedding Album</h4>\n                <p className=\"text-sm text-white/80 mt-1\">\n                  Browse and download photos/videos shared by guests and the couple.\n                </p>\n                <button className=\"btn-primary mt-3\" onClick={() => navigate(\"/album\")}>\n                  Open Wedding Album\n                </button>\n              </div>\n\n              <div className=\"p-4 rounded-xl bg-white/10 border border-white/20\">\n                <h4 className=\"font-semibold\">Venue Info</h4>\n                <p className=\"text-sm text-white/80 mt-1\">\n                  Get directions, parking details, and more.\n                </p>\n                <button className=\"btn-primary mt-3\" onClick={() => navigate(\"/venue\")}>\n                  View Venue Information\n                </button>\n              </div>\n            </div>\n\n            <button className=\"btn-primary mt-6\" onClick={() => setEdit(true)}>\n              Edit My RSVP\n            </button>\n          </Card>\n        </div>\n      </Backdrop>\n    );\n  }\n\n  // Create/Edit form\n  const isCreate = !rsvp;\n  return (\n    <Backdrop>\n      <div className=\"max-w-4xl mx-auto px-4 py-10\">\n        <Card className=\"p-6 md:p-8 text-white space-y-4\" aria-busy={saving ? \"true\" : \"false\"}>\n          <h2 className=\"section-title\">{isCreate ? \"Submit My RSVP\" : \"Edit My RSVP\"}</h2>\n\n          {!!formErr && (\n            <div className=\"text-sm text-red-200 bg-red-900/20 border border-red-300/40 rounded-md p-2\" role=\"alert\">\n              {formErr}\n            </div>\n          )}\n\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <label className=\"block\" htmlFor=\"full_name\">\n              <span className=\"sr-only\">Full Name</span>\n              <input\n                id=\"full_name\"\n                className=\"input w-full\"\n                placeholder=\"Full Name\"\n                value={form?.full_name || \"\"}\n                onChange={(e) => setField(\"full_name\", e.target.value)}\n                required\n              />\n            </label>\n            <label className=\"block\" htmlFor=\"email\">\n              <span className=\"sr-only\">Email (locked)</span>\n              <input\n                id=\"email\"\n                className=\"input w-full opacity-80\"\n                type=\"email\"\n                placeholder=\"Email\"\n                value={(isCreate ? form?.email : authEmail) || \"\"}\n                disabled\n                title=\"Email is linked to your account and cannot be changed here.\"\n              />\n            </label>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <label className=\"block\" htmlFor=\"attending\">\n              <span className=\"sr-only\">Attending</span>\n              <select\n                id=\"attending\"\n                className=\"input w-full\"\n                value={String(!!form?.attending)}\n                onChange={(e) => setField(\"attending\", e.target.value === \"true\")}\n              >\n                <option value=\"true\">Attending</option>\n                <option value=\"false\">Not Attending</option>\n              </select>\n            </label>\n            <label className=\"block\" htmlFor=\"dietary\">\n              <span className=\"sr-only\">Dietary Requirements</span>\n              <input\n                id=\"dietary\"\n                className=\"input w-full\"\n                placeholder=\"Dietary Requirements\"\n                value={form?.dietary || \"\"}\n                onChange={(e) => setField(\"dietary\", e.target.value)}\n              />\n            </label>\n          </div>\n\n          <label className=\"block\" htmlFor=\"songs\">\n            <span className=\"sr-only\">Song requests</span>\n            <input\n              id=\"songs\"\n              className=\"input w-full\"\n              placeholder=\"Song requests (comma-separated)\"\n              value={form?.songs || \"\"}\n              onChange={(e) => setField(\"songs\", e.target.value)}\n            />\n          </label>\n\n          {/* Plus One */}\n          <div className=\"p-4 rounded-xl bg-white/10 border border-white/20\">\n            <label className=\"flex items-center gap-3\" htmlFor=\"has_plus_one\">\n              <input\n                id=\"has_plus_one\"\n                type=\"checkbox\"\n                checked={!!form?.has_plus_one}\n                onChange={(e) => togglePlusOne(e.target.checked)}\n              />\n              <span className=\"font-semibold\">Bringing a plus one?</span>\n            </label>\n            {form?.has_plus_one && (\n              <div className=\"mt-3 grid md:grid-cols-2 gap-4\">\n                <label className=\"block\" htmlFor=\"plus_one_name\">\n                  <span className=\"sr-only\">Plus One Name</span>\n                  <input\n                    id=\"plus_one_name\"\n                    className=\"input w-full\"\n                    placeholder=\"Plus One Name\"\n                    value={form?.plus_one_name || \"\"}\n                    onChange={(e) => setField(\"plus_one_name\", e.target.value)}\n                  />\n                </label>\n                <label className=\"block\" htmlFor=\"plus_one_dietary\">\n                  <span className=\"sr-only\">Plus One Dietary</span>\n                  <input\n                    id=\"plus_one_dietary\"\n                    className=\"input w-full\"\n                    placeholder=\"Plus One Dietary\"\n                    value={form?.plus_one_dietary || \"\"}\n                    onChange={(e) => setField(\"plus_one_dietary\", e.target.value)}\n                  />\n                </label>\n              </div>\n            )}\n          </div>\n\n          {/* Children */}\n          <div className=\"p-4 rounded-xl bg-white/10 border border-white/20\">\n            <label className=\"flex items-center gap-3\" htmlFor=\"has_children\">\n              <input\n                id=\"has_children\"\n                type=\"checkbox\"\n                checked={!!form?.has_children}\n                onChange={(e) => toggleChildren(e.target.checked)}\n              />\n              <span className=\"font-semibold\">Bringing children?</span>\n            </label>\n            {form?.has_children && (\n              <div className=\"mt-3 space-y-3\">\n                {(form?.children || []).map((c, i) => (\n                  <div key={i} className=\"grid md:grid-cols-2 gap-3\">\n                    <label className=\"block\" htmlFor={`child_name_${i}`}>\n                      <span className=\"sr-only\">Child Name</span>\n                      <input\n                        id={`child_name_${i}`}\n                        className=\"input w-full\"\n                        placeholder=\"Child Name\"\n                        value={c.name || \"\"}\n                        onChange={(e) => updateChild(i, \"name\", e.target.value)}\n                      />\n                    </label>\n                    <div className=\"flex gap-3\">\n                      <label className=\"block flex-1\" htmlFor={`child_dietary_${i}`}>\n                        <span className=\"sr-only\">Child Dietary</span>\n                        <input\n                          id={`child_dietary_${i}`}\n                          className=\"input w-full\"\n                          placeholder=\"Child Dietary\"\n                          value={c.dietary || \"\"}\n                          onChange={(e) => updateChild(i, \"dietary\", e.target.value)}\n                        />\n                      </label>\n                      <button type=\"button\" className=\"btn-outline\" onClick={() => removeChild(i)} title=\"Remove child\">\n                        Remove\n                      </button>\n                    </div>\n                  </div>\n                ))}\n                <button type=\"button\" className=\"btn-outline\" onClick={addChild}>\n                  + Add Child\n                </button>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex gap-3 justify-end pt-2\">\n            {!isCreate && (\n              <button\n                className=\"btn-outline\"\n                onClick={() => {\n                  setForm(rsvp);\n                  setEdit(false);\n                  setFormErr(\"\");\n                }}\n                type=\"button\"\n              >\n                Cancel\n              </button>\n            )}\n            <button className=\"btn-primary\" onClick={save} type=\"button\" disabled={saving}>\n              {saving ? \"Savingâ€¦\" : isCreate ? \"Submit\" : \"Save\"}\n            </button>\n          </div>\n        </Card>\n      </div>\n    </Backdrop>\n  );\n}\n\n/** Helpers */\nfunction normalizeRsvp(row) {\n  return {\n    ...row,\n    attending: !!row.attending,\n    has_plus_one: !!row.has_plus_one,\n    has_children: !!row.has_children,\n    children: Array.isArray(row.children) ? row.children : [],\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}