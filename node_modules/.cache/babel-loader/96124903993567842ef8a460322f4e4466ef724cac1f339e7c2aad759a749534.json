{"ast":null,"code":"// File: src/pages/WeddingAlbumPage.jsx\nimport{useCallback,useEffect,useMemo,useState}from\"react\";import dayjs from\"dayjs\";import Backdrop from\"../components/Backdrop\";import Card from\"../components/Card\";import{ENV}from\"../utils/fromEnv\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PAGE_SIZE=48;function inferType(mime){let name=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";const m=(mime||\"\").toLowerCase();if(m.startsWith(\"image/\"))return\"image\";if(m.startsWith(\"video/\"))return\"video\";if(/\\.(png|jpe?g|gif|webp|bmp|heic)$/i.test(name))return\"image\";if(/\\.(mp4|mov|webm|mkv|avi)$/i.test(name))return\"video\";return\"file\";}// Drive links for PUBLIC files/folders\nconst viewURL=id=>\"https://drive.google.com/uc?export=view&id=\".concat(id,\"&rl\");const downloadURL=id=>\"https://drive.google.com/uc?export=download&id=\".concat(id);const altMediaURL=(id,key)=>\"https://www.googleapis.com/drive/v3/files/\".concat(id,\"?alt=media&key=\").concat(key);export default function WeddingAlbumPage(){const[tab,setTab]=useState(\"photos\");const[items,setItems]=useState([]);const[nextToken,setNextToken]=useState(null);const[loading,setLoading]=useState(false);const[err,setErr]=useState(\"\");const API_KEY=ENV.GOOGLE_API_KEY;const PHOTOS_FOLDER=ENV.DRIVE_PHOTOS;const VIDEOS_FOLDER=ENV.DRIVE_VIDEOS;const currentFolder=tab===\"photos\"?PHOTOS_FOLDER:VIDEOS_FOLDER;const listFolder=useCallback(async(folderId,pageToken)=>{var _json$error;const url=new URL(\"https://www.googleapis.com/drive/v3/files\");url.searchParams.set(\"q\",\"'\".concat(folderId,\"' in parents and trashed = false\"));url.searchParams.set(\"fields\",\"nextPageToken, files(id,name,mimeType,createdTime,thumbnailLink,webViewLink,webContentLink)\");url.searchParams.set(\"orderBy\",\"createdTime desc\");url.searchParams.set(\"pageSize\",String(PAGE_SIZE));url.searchParams.set(\"includeItemsFromAllDrives\",\"true\");url.searchParams.set(\"supportsAllDrives\",\"true\");if(pageToken)url.searchParams.set(\"pageToken\",pageToken);url.searchParams.set(\"key\",API_KEY);const res=await fetch(url.toString());const json=await res.json();if(!res.ok)throw new Error(((_json$error=json.error)===null||_json$error===void 0?void 0:_json$error.message)||\"Drive API error\");const files=(json.files||[]).map(f=>{const media_type=inferType(f.mimeType,f.name);const mainView=viewURL(f.id);const fallback1=f.thumbnailLink||\"\";const fallback2=altMediaURL(f.id,API_KEY);const preview_url=media_type===\"image\"?mainView:f.webViewLink||f.webContentLink||mainView;return{id:f.id,drive_name:f.name,mimeType:f.mimeType,media_type,created_at:f.createdTime,preview_url,fallback_previews:[fallback1,fallback2].filter(Boolean),webViewLink:f.webViewLink||f.webContentLink||mainView};});return{files,nextPageToken:json.nextPageToken||null};},[API_KEY]);const loadInitial=useCallback(async()=>{if(!API_KEY||!currentFolder)return;setErr(\"\");setLoading(true);try{const{files,nextPageToken}=await listFolder(currentFolder,null);setItems(files);setNextToken(nextPageToken);}catch(e){setErr(e.message);}finally{setLoading(false);}},[API_KEY,currentFolder,listFolder]);const loadMore=useCallback(async()=>{if(loading||!nextToken)return;setLoading(true);try{const{files,nextPageToken}=await listFolder(currentFolder,nextToken);setItems(prev=>[...prev,...files]);setNextToken(nextPageToken);}catch(e){setErr(e.message);}finally{setLoading(false);}},[currentFolder,listFolder,loading,nextToken]);useEffect(()=>{setItems([]);setNextToken(null);loadInitial();},[tab,loadInitial]);// group by date\nconst groups=useMemo(()=>{const map={};for(const it of items){const key=dayjs(it.created_at).format(\"YYYY-MM-DD\");(map[key]||(map[key]=[])).push(it);}return Object.entries(map).sort((_ref,_ref2)=>{let[a]=_ref;let[b]=_ref2;return a<b?1:-1;});},[items]);return/*#__PURE__*/_jsx(Backdrop,{children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-6xl mx-auto px-4 py-10\",children:/*#__PURE__*/_jsxs(Card,{className:\"p-6 md:p-8 text-white\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"section-title\",children:\"Wedding Album\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white/80\",children:\"We loved sharing our day with you.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-outline \".concat(tab===\"photos\"?\"bg-white/20\":\"\"),onClick:()=>setTab(\"photos\"),\"aria-pressed\":tab===\"photos\"?\"true\":\"false\",children:\"Photos\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-outline \".concat(tab===\"videos\"?\"bg-white/20\":\"\"),onClick:()=>setTab(\"videos\"),\"aria-pressed\":tab===\"videos\"?\"true\":\"false\",children:\"Videos\"})]}),(!API_KEY||!PHOTOS_FOLDER||!VIDEOS_FOLDER)&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-amber-200 bg-amber-900/20 border border-amber-300/40 rounded-md p-2 mb-4\",children:[\"Missing envs. Set \",/*#__PURE__*/_jsx(\"code\",{children:\"REACT_APP_GOOGLE_API_KEY\"}),\",\",\" \",/*#__PURE__*/_jsx(\"code\",{children:\"REACT_APP_DRIVE_PHOTOS_FOLDER_ID\"}),\",\",\" \",/*#__PURE__*/_jsx(\"code\",{children:\"REACT_APP_DRIVE_VIDEOS_FOLDER_ID\"}),\" and restart the dev server.\"]}),err&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-red-200 bg-red-900/20 border border-red-300/40 rounded-md p-2 mb-4\",role:\"alert\",children:err}),items.length===0&&!loading&&!err&&/*#__PURE__*/_jsx(\"p\",{className:\"text-white/80\",children:\"No media yet.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-8\",children:groups.map(_ref3=>{let[date,arr]=_ref3;return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-white mb-3\",children:dayjs(date).format(\"DD MMM YYYY\")}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\",children:arr.map(it=>/*#__PURE__*/_jsx(AlbumCard,{item:it},it.id))})]},date);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex items-center gap-3\",children:[loading&&/*#__PURE__*/_jsx(\"span\",{className:\"text-white/80\",role:\"status\",children:\"Loading\\u2026\"}),!loading&&nextToken&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-outline\",onClick:loadMore,\"aria-label\":\"Load more items\",children:\"Load more\"}),!loading&&!nextToken&&items.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"text-white/80\",children:\"End of album.\"})]})]})})});}function AlbumCard(_ref4){let{item}=_ref4;const{media_type,preview_url,drive_name,created_at,id,webViewLink,fallback_previews}=item;const time=dayjs(created_at).format(\"HH:mm\");const downloadHref=downloadURL(id);const openHref=media_type===\"image\"?preview_url:webViewLink;const cacheBusted=\"\".concat(preview_url).concat(preview_url.includes(\"?\")?\"&\":\"?\",\"t=\").concat(Date.now());const onImgError=e=>{const el=e.currentTarget;if(el.dataset.fallbackIndex===undefined)el.dataset.fallbackIndex=\"0\";const i=parseInt(el.dataset.fallbackIndex,10);if(fallback_previews&&i<fallback_previews.length){const next=fallback_previews[i];el.src=\"\".concat(next).concat(next.includes(\"?\")?\"&\":\"?\",\"t=\").concat(Date.now());el.dataset.fallbackIndex=String(i+1);}else{el.style.display=\"none\";}};return/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl overflow-hidden bg-white/10 border border-white/20\",children:[/*#__PURE__*/_jsx(\"a\",{href:openHref,target:\"_blank\",rel:\"noreferrer\",title:drive_name,className:\"block group\",children:media_type===\"image\"?/*#__PURE__*/_jsx(\"img\",{src:cacheBusted,alt:drive_name,className:\"w-full h-40 object-cover group-hover:opacity-90\",loading:\"lazy\",onError:onImgError}):media_type===\"video\"?/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-40 flex items-center justify-center text-sm text-white/80\",children:\"Open video \\u2197\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-40 flex items-center justify-center text-sm text-white/70\",children:\"Open file \\u2197\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 text-xs text-white/90 flex items-center justify-between gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"truncate\",children:drive_name}),/*#__PURE__*/_jsx(\"span\",{children:time})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-2 pt-0 flex gap-2 justify-end\",children:/*#__PURE__*/_jsx(\"a\",{className:\"btn-outline text-xs\",href:downloadHref,target:\"_blank\",rel:\"noreferrer\",\"aria-label\":\"Download \".concat(drive_name),children:\"Download\"})})]});}","map":{"version":3,"names":["useCallback","useEffect","useMemo","useState","dayjs","Backdrop","Card","ENV","jsx","_jsx","jsxs","_jsxs","PAGE_SIZE","inferType","mime","name","arguments","length","undefined","m","toLowerCase","startsWith","test","viewURL","id","concat","downloadURL","altMediaURL","key","WeddingAlbumPage","tab","setTab","items","setItems","nextToken","setNextToken","loading","setLoading","err","setErr","API_KEY","GOOGLE_API_KEY","PHOTOS_FOLDER","DRIVE_PHOTOS","VIDEOS_FOLDER","DRIVE_VIDEOS","currentFolder","listFolder","folderId","pageToken","_json$error","url","URL","searchParams","set","String","res","fetch","toString","json","ok","Error","error","message","files","map","f","media_type","mimeType","mainView","fallback1","thumbnailLink","fallback2","preview_url","webViewLink","webContentLink","drive_name","created_at","createdTime","fallback_previews","filter","Boolean","nextPageToken","loadInitial","e","loadMore","prev","groups","it","format","push","Object","entries","sort","_ref","_ref2","a","b","children","className","onClick","role","_ref3","date","arr","AlbumCard","item","_ref4","time","downloadHref","openHref","cacheBusted","includes","Date","now","onImgError","el","currentTarget","dataset","fallbackIndex","i","parseInt","next","src","style","display","href","target","rel","title","alt","onError"],"sources":["C:/Users/drago/OneDrive/Desktop/sussa-troue/src/pages/WeddingAlbumPage.jsx"],"sourcesContent":["// File: src/pages/WeddingAlbumPage.jsx\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport dayjs from \"dayjs\";\nimport Backdrop from \"../components/Backdrop\";\nimport Card from \"../components/Card\";\nimport { ENV } from \"../utils/fromEnv\";\n\nconst PAGE_SIZE = 48;\n\nfunction inferType(mime, name = \"\") {\n  const m = (mime || \"\").toLowerCase();\n  if (m.startsWith(\"image/\")) return \"image\";\n  if (m.startsWith(\"video/\")) return \"video\";\n  if (/\\.(png|jpe?g|gif|webp|bmp|heic)$/i.test(name)) return \"image\";\n  if (/\\.(mp4|mov|webm|mkv|avi)$/i.test(name)) return \"video\";\n  return \"file\";\n}\n\n// Drive links for PUBLIC files/folders\nconst viewURL = (id) => `https://drive.google.com/uc?export=view&id=${id}&rl`;\nconst downloadURL = (id) => `https://drive.google.com/uc?export=download&id=${id}`;\nconst altMediaURL = (id, key) => `https://www.googleapis.com/drive/v3/files/${id}?alt=media&key=${key}`;\n\nexport default function WeddingAlbumPage() {\n  const [tab, setTab] = useState(\"photos\");\n  const [items, setItems] = useState([]);\n  const [nextToken, setNextToken] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n\n  const API_KEY = ENV.GOOGLE_API_KEY;\n  const PHOTOS_FOLDER = ENV.DRIVE_PHOTOS;\n  const VIDEOS_FOLDER = ENV.DRIVE_VIDEOS;\n  const currentFolder = tab === \"photos\" ? PHOTOS_FOLDER : VIDEOS_FOLDER;\n\n  const listFolder = useCallback(\n    async (folderId, pageToken) => {\n      const url = new URL(\"https://www.googleapis.com/drive/v3/files\");\n      url.searchParams.set(\"q\", `'${folderId}' in parents and trashed = false`);\n      url.searchParams.set(\n        \"fields\",\n        \"nextPageToken, files(id,name,mimeType,createdTime,thumbnailLink,webViewLink,webContentLink)\"\n      );\n      url.searchParams.set(\"orderBy\", \"createdTime desc\");\n      url.searchParams.set(\"pageSize\", String(PAGE_SIZE));\n      url.searchParams.set(\"includeItemsFromAllDrives\", \"true\");\n      url.searchParams.set(\"supportsAllDrives\", \"true\");\n      if (pageToken) url.searchParams.set(\"pageToken\", pageToken);\n      url.searchParams.set(\"key\", API_KEY);\n\n      const res = await fetch(url.toString());\n      const json = await res.json();\n      if (!res.ok) throw new Error(json.error?.message || \"Drive API error\");\n\n      const files = (json.files || []).map((f) => {\n        const media_type = inferType(f.mimeType, f.name);\n        const mainView = viewURL(f.id);\n        const fallback1 = f.thumbnailLink || \"\";\n        const fallback2 = altMediaURL(f.id, API_KEY);\n        const preview_url = media_type === \"image\" ? mainView : (f.webViewLink || f.webContentLink || mainView);\n        return {\n          id: f.id,\n          drive_name: f.name,\n          mimeType: f.mimeType,\n          media_type,\n          created_at: f.createdTime,\n          preview_url,\n          fallback_previews: [fallback1, fallback2].filter(Boolean),\n          webViewLink: f.webViewLink || f.webContentLink || mainView,\n        };\n      });\n      return { files, nextPageToken: json.nextPageToken || null };\n    },\n    [API_KEY]\n  );\n\n  const loadInitial = useCallback(async () => {\n    if (!API_KEY || !currentFolder) return;\n    setErr(\"\");\n    setLoading(true);\n    try {\n      const { files, nextPageToken } = await listFolder(currentFolder, null);\n      setItems(files);\n      setNextToken(nextPageToken);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [API_KEY, currentFolder, listFolder]);\n\n  const loadMore = useCallback(async () => {\n    if (loading || !nextToken) return;\n    setLoading(true);\n    try {\n      const { files, nextPageToken } = await listFolder(currentFolder, nextToken);\n      setItems((prev) => [...prev, ...files]);\n      setNextToken(nextPageToken);\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [currentFolder, listFolder, loading, nextToken]);\n\n useEffect(() => {\n  setItems([]);\n  setNextToken(null);\n  loadInitial();\n}, [tab, loadInitial]);\n\n  // group by date\n  const groups = useMemo(() => {\n    const map = {};\n    for (const it of items) {\n      const key = dayjs(it.created_at).format(\"YYYY-MM-DD\");\n      (map[key] ||= []).push(it);\n    }\n    return Object.entries(map).sort(([a], [b]) => (a < b ? 1 : -1));\n  }, [items]);\n\n  return (\n    <Backdrop>\n      <div className=\"max-w-6xl mx-auto px-4 py-10\">\n        <Card className=\"p-6 md:p-8 text-white\">\n          <header className=\"mb-6\">\n            <h1 className=\"section-title\">Wedding Album</h1>\n            <p className=\"text-white/80\">We loved sharing our day with you.</p>\n          </header>\n\n          <div className=\"flex gap-2 mb-4\">\n            <button\n              className={`btn-outline ${tab === \"photos\" ? \"bg-white/20\" : \"\"}`}\n              onClick={() => setTab(\"photos\")}\n              aria-pressed={tab === \"photos\" ? \"true\" : \"false\"}\n            >\n              Photos\n            </button>\n            <button\n              className={`btn-outline ${tab === \"videos\" ? \"bg-white/20\" : \"\"}`}\n              onClick={() => setTab(\"videos\")}\n              aria-pressed={tab === \"videos\" ? \"true\" : \"false\"}\n            >\n              Videos\n            </button>\n          </div>\n\n          {(!API_KEY || !PHOTOS_FOLDER || !VIDEOS_FOLDER) && (\n            <div className=\"text-sm text-amber-200 bg-amber-900/20 border border-amber-300/40 rounded-md p-2 mb-4\">\n              Missing envs. Set <code>REACT_APP_GOOGLE_API_KEY</code>,{\" \"}\n              <code>REACT_APP_DRIVE_PHOTOS_FOLDER_ID</code>,{\" \"}\n              <code>REACT_APP_DRIVE_VIDEOS_FOLDER_ID</code> and restart the dev server.\n            </div>\n          )}\n\n          {err && (\n            <div className=\"text-sm text-red-200 bg-red-900/20 border border-red-300/40 rounded-md p-2 mb-4\" role=\"alert\">\n              {err}\n            </div>\n          )}\n\n          {items.length === 0 && !loading && !err && (\n            <p className=\"text-white/80\">No media yet.</p>\n          )}\n\n          <div className=\"space-y-8\">\n            {groups.map(([date, arr]) => (\n              <section key={date}>\n                <h2 className=\"text-lg font-semibold text-white mb-3\">\n                  {dayjs(date).format(\"DD MMM YYYY\")}\n                </h2>\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3\">\n                  {arr.map((it) => (\n                    <AlbumCard key={it.id} item={it} />\n                  ))}\n                </div>\n              </section>\n            ))}\n          </div>\n\n          <div className=\"mt-6 flex items-center gap-3\">\n            {loading && <span className=\"text-white/80\" role=\"status\">Loading…</span>}\n            {!loading && nextToken && (\n              <button className=\"btn-outline\" onClick={loadMore} aria-label=\"Load more items\">\n                Load more\n              </button>\n            )}\n            {!loading && !nextToken && items.length > 0 && (\n              <span className=\"text-white/80\">End of album.</span>\n            )}\n          </div>\n        </Card>\n      </div>\n    </Backdrop>\n  );\n}\n\nfunction AlbumCard({ item }) {\n  const { media_type, preview_url, drive_name, created_at, id, webViewLink, fallback_previews } = item;\n  const time = dayjs(created_at).format(\"HH:mm\");\n  const downloadHref = downloadURL(id);\n  const openHref = media_type === \"image\" ? preview_url : webViewLink;\n\n  const cacheBusted = `${preview_url}${preview_url.includes(\"?\") ? \"&\" : \"?\"}t=${Date.now()}`;\n\n  const onImgError = (e) => {\n    const el = e.currentTarget;\n    if (el.dataset.fallbackIndex === undefined) el.dataset.fallbackIndex = \"0\";\n    const i = parseInt(el.dataset.fallbackIndex, 10);\n    if (fallback_previews && i < fallback_previews.length) {\n      const next = fallback_previews[i];\n      el.src = `${next}${next.includes(\"?\") ? \"&\" : \"?\"}t=${Date.now()}`;\n      el.dataset.fallbackIndex = String(i + 1);\n    } else {\n      el.style.display = \"none\";\n    }\n  };\n\n  return (\n    <div className=\"rounded-xl overflow-hidden bg-white/10 border border-white/20\">\n      <a href={openHref} target=\"_blank\" rel=\"noreferrer\" title={drive_name} className=\"block group\">\n        {media_type === \"image\" ? (\n          <img\n            src={cacheBusted}\n            alt={drive_name}\n            className=\"w-full h-40 object-cover group-hover:opacity-90\"\n            loading=\"lazy\"\n            onError={onImgError}\n          />\n        ) : media_type === \"video\" ? (\n          <div className=\"w-full h-40 flex items-center justify-center text-sm text-white/80\">\n            Open video ↗\n          </div>\n        ) : (\n          <div className=\"w-full h-40 flex items-center justify-center text-sm text-white/70\">\n            Open file ↗\n          </div>\n        )}\n      </a>\n      <div className=\"p-2 text-xs text-white/90 flex items-center justify-between gap-2\">\n        <span className=\"truncate\">{drive_name}</span>\n        <span>{time}</span>\n      </div>\n      <div className=\"p-2 pt-0 flex gap-2 justify-end\">\n        <a className=\"btn-outline text-xs\" href={downloadHref} target=\"_blank\" rel=\"noreferrer\" aria-label={`Download ${drive_name}`}>\n          Download\n        </a>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}