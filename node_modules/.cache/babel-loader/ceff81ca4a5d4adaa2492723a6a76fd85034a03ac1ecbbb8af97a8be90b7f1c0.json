{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drago\\\\OneDrive\\\\Desktop\\\\sussa-troue\\\\src\\\\components\\\\GoogleDrivePicker.jsx\",\n  _s = $RefreshSig$();\n// File: src/components/GoogleDrivePicker.jsx\nimport { useRef, useState, useCallback } from \"react\";\nimport { ENV } from \"../utils/fromEnv\";\n\n// Minimal scope that allows uploads to user-visible Drive content\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SCOPE = \"https://www.googleapis.com/auth/drive.file\";\n\n/** Dynamically load a script once */\nfunction addScript(src, {\n  id,\n  async = true,\n  defer = true\n} = {}) {\n  return new Promise((resolve, reject) => {\n    if (id && document.getElementById(id)) return resolve();\n    const s = document.createElement(\"script\");\n    s.src = src;\n    s.async = async;\n    s.defer = defer;\n    if (id) s.id = id;\n    s.onload = () => resolve();\n    s.onerror = () => reject(new Error(`Failed to load ${src}`));\n    document.head.appendChild(s);\n  });\n}\n\n/** Wait for a condition with a clear timeout error */\nfunction waitFor(check, timeoutMs, label) {\n  return new Promise((resolve, reject) => {\n    const start = Date.now();\n    (function tick() {\n      try {\n        if (check()) return resolve();\n      } catch {}\n      if (Date.now() - start > timeoutMs) {\n        return reject(new Error(`${label} timed out`));\n      }\n      requestAnimationFrame(tick);\n    })();\n  });\n}\nexport default function GoogleDrivePicker({\n  folderId,\n  onPicked,\n  label = \"Upload from Google Drive\",\n  className = \"\",\n  debug = true\n}) {\n  _s();\n  const [opening, setOpening] = useState(false);\n  const tokenRef = useRef(null);\n  const tokenExpRef = useRef(0);\n  const gsiClientRef = useRef(null);\n  const log = (...a) => debug && console.log(\"[Picker]\", ...a);\n  const err = (...a) => console.error(\"[Picker]\", ...a);\n\n  /** Ensure both scripts are present and picker module is loaded */\n  const ensureScripts = useCallback(async () => {\n    var _window$google, _window$google$accoun;\n    // Load gapi and GIS if missing\n    if (!window.gapi) {\n      await addScript(\"https://apis.google.com/js/api.js\", {\n        id: \"gapi-script\"\n      });\n    }\n    await waitFor(() => !!window.gapi, 15000, \"gapi\");\n    // load the picker module (makes window.google.picker available)\n    await new Promise((res, rej) => {\n      try {\n        window.gapi.load(\"picker\", {\n          callback: res\n        });\n      } catch (e) {\n        rej(e);\n      }\n    });\n    if (!((_window$google = window.google) !== null && _window$google !== void 0 && (_window$google$accoun = _window$google.accounts) !== null && _window$google$accoun !== void 0 && _window$google$accoun.oauth2)) {\n      await addScript(\"https://accounts.google.com/gsi/client\", {\n        id: \"gis-script\"\n      });\n    }\n    await waitFor(() => {\n      var _window$google2, _window$google2$accou;\n      return !!((_window$google2 = window.google) !== null && _window$google2 !== void 0 && (_window$google2$accou = _window$google2.accounts) !== null && _window$google2$accou !== void 0 && _window$google2$accou.oauth2);\n    }, 15000, \"google.accounts.oauth2\");\n\n    // Final check: picker namespace\n    await waitFor(() => {\n      var _window$google3;\n      return !!((_window$google3 = window.google) !== null && _window$google3 !== void 0 && _window$google3.picker);\n    }, 8000, \"google.picker\");\n  }, []);\n\n  /** Initialize the token client once */\n  const ensureGsiClient = useCallback(async () => {\n    await ensureScripts();\n    if (!ENV.GOOGLE_CLIENT_ID) throw new Error(\"Missing REACT_APP_GOOGLE_CLIENT_ID\");\n    if (!gsiClientRef.current) {\n      gsiClientRef.current = window.google.accounts.oauth2.initTokenClient({\n        client_id: ENV.GOOGLE_CLIENT_ID,\n        scope: SCOPE,\n        prompt: \"\",\n        // use \"\" to avoid popping the account chooser repeatedly\n        callback: resp => {\n          if (resp !== null && resp !== void 0 && resp.error) {\n            err(\"Token error:\", resp.error);\n            return;\n          }\n          tokenRef.current = resp.access_token;\n          tokenExpRef.current = Date.now() + 55 * 60 * 1000;\n        }\n      });\n      log(\"GIS client ready\");\n    }\n  }, [ensureScripts]);\n\n  /** Retrieve or refresh an access token */\n  const getAccessToken = useCallback(async () => {\n    if (tokenRef.current && Date.now() < tokenExpRef.current) return tokenRef.current;\n    await ensureGsiClient();\n    return new Promise((resolve, reject) => {\n      try {\n        gsiClientRef.current.callback = resp => {\n          if (resp !== null && resp !== void 0 && resp.error) return reject(new Error(resp.error));\n          if (!(resp !== null && resp !== void 0 && resp.access_token)) return reject(new Error(\"No access token returned\"));\n          tokenRef.current = resp.access_token;\n          tokenExpRef.current = Date.now() + 55 * 60 * 1000;\n          resolve(tokenRef.current);\n        };\n        // If you still get a silent timeout, try forcing consent:\n        // gsiClientRef.current.requestAccessToken({ prompt: \"consent\" });\n        gsiClientRef.current.requestAccessToken();\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }, [ensureGsiClient]);\n  const openPicker = useCallback(async () => {\n    try {\n      if (!ENV.GOOGLE_API_KEY) throw new Error(\"Missing REACT_APP_GOOGLE_API_KEY\");\n      if (!ENV.GOOGLE_CLIENT_ID) throw new Error(\"Missing REACT_APP_GOOGLE_CLIENT_ID\");\n      if (!folderId) throw new Error(\"Missing folderId\");\n      setOpening(true);\n      await ensureScripts();\n      const token = await getAccessToken();\n      const view = new window.google.picker.DocsUploadView().setIncludeFolders(true);\n      view.setParent(folderId);\n      const origin = `${window.location.protocol}//${window.location.host}`;\n      const picker = new window.google.picker.PickerBuilder().addView(view).setOAuthToken(token).setDeveloperKey(ENV.GOOGLE_API_KEY).setOrigin(origin).setTitle(\"Upload to Wedding Album\").setSize(Math.round(window.innerWidth * 0.9), Math.min(720, Math.round(window.innerHeight * 0.9))).setCallback(data => {\n        if ((data === null || data === void 0 ? void 0 : data.action) === window.google.picker.Action.PICKED) {\n          log(\"Picked:\", data.docs);\n          onPicked === null || onPicked === void 0 ? void 0 : onPicked(data.docs || []);\n        }\n      }).build();\n      picker.setVisible(true);\n      log(\"Picker opened\");\n    } catch (e) {\n      err(\"openPicker failed:\", e);\n      alert(e !== null && e !== void 0 && e.message ? `Google Picker error: ${e.message}` : \"Google Picker is not available. Reload and try again.\");\n    } finally {\n      setOpening(false);\n    }\n  }, [ensureScripts, getAccessToken, folderId, onPicked]);\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    onClick: openPicker,\n    disabled: opening,\n    className: `btn-primary w-full sm:w-auto ${className}`,\n    \"aria-busy\": opening ? \"true\" : \"false\",\n    \"aria-label\": \"Open Google Drive file picker\",\n    children: opening ? \"Opening…\" : label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 5\n  }, this);\n}\n_s(GoogleDrivePicker, \"1Lp64QnIxC/VsyB2JhKEBjGCKHg=\");\n_c = GoogleDrivePicker;\nvar _c;\n$RefreshReg$(_c, \"GoogleDrivePicker\");","map":{"version":3,"names":["useRef","useState","useCallback","ENV","jsxDEV","_jsxDEV","SCOPE","addScript","src","id","async","defer","Promise","resolve","reject","document","getElementById","s","createElement","onload","onerror","Error","head","appendChild","waitFor","check","timeoutMs","label","start","Date","now","tick","requestAnimationFrame","GoogleDrivePicker","folderId","onPicked","className","debug","_s","opening","setOpening","tokenRef","tokenExpRef","gsiClientRef","log","a","console","err","error","ensureScripts","_window$google","_window$google$accoun","window","gapi","res","rej","load","callback","e","google","accounts","oauth2","_window$google2","_window$google2$accou","_window$google3","picker","ensureGsiClient","GOOGLE_CLIENT_ID","current","initTokenClient","client_id","scope","prompt","resp","access_token","getAccessToken","requestAccessToken","openPicker","GOOGLE_API_KEY","token","view","DocsUploadView","setIncludeFolders","setParent","origin","location","protocol","host","PickerBuilder","addView","setOAuthToken","setDeveloperKey","setOrigin","setTitle","setSize","Math","round","innerWidth","min","innerHeight","setCallback","data","action","Action","PICKED","docs","build","setVisible","alert","message","type","onClick","disabled","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/drago/OneDrive/Desktop/sussa-troue/src/components/GoogleDrivePicker.jsx"],"sourcesContent":["// File: src/components/GoogleDrivePicker.jsx\r\nimport { useRef, useState, useCallback } from \"react\";\r\nimport { ENV } from \"../utils/fromEnv\";\r\n\r\n// Minimal scope that allows uploads to user-visible Drive content\r\nconst SCOPE = \"https://www.googleapis.com/auth/drive.file\";\r\n\r\n/** Dynamically load a script once */\r\nfunction addScript(src, { id, async = true, defer = true } = {}) {\r\n  return new Promise((resolve, reject) => {\r\n    if (id && document.getElementById(id)) return resolve();\r\n    const s = document.createElement(\"script\");\r\n    s.src = src;\r\n    s.async = async;\r\n    s.defer = defer;\r\n    if (id) s.id = id;\r\n    s.onload = () => resolve();\r\n    s.onerror = () => reject(new Error(`Failed to load ${src}`));\r\n    document.head.appendChild(s);\r\n  });\r\n}\r\n\r\n/** Wait for a condition with a clear timeout error */\r\nfunction waitFor(check, timeoutMs, label) {\r\n  return new Promise((resolve, reject) => {\r\n    const start = Date.now();\r\n    (function tick() {\r\n      try {\r\n        if (check()) return resolve();\r\n      } catch {}\r\n      if (Date.now() - start > timeoutMs) {\r\n        return reject(new Error(`${label} timed out`));\r\n      }\r\n      requestAnimationFrame(tick);\r\n    })();\r\n  });\r\n}\r\n\r\nexport default function GoogleDrivePicker({\r\n  folderId,\r\n  onPicked,\r\n  label = \"Upload from Google Drive\",\r\n  className = \"\",\r\n  debug = true,\r\n}) {\r\n  const [opening, setOpening] = useState(false);\r\n  const tokenRef = useRef(null);\r\n  const tokenExpRef = useRef(0);\r\n  const gsiClientRef = useRef(null);\r\n\r\n  const log = (...a) => debug && console.log(\"[Picker]\", ...a);\r\n  const err = (...a) => console.error(\"[Picker]\", ...a);\r\n\r\n  /** Ensure both scripts are present and picker module is loaded */\r\n  const ensureScripts = useCallback(async () => {\r\n    // Load gapi and GIS if missing\r\n    if (!window.gapi) {\r\n      await addScript(\"https://apis.google.com/js/api.js\", { id: \"gapi-script\" });\r\n    }\r\n    await waitFor(() => !!window.gapi, 15000, \"gapi\");\r\n    // load the picker module (makes window.google.picker available)\r\n    await new Promise((res, rej) => {\r\n      try {\r\n        window.gapi.load(\"picker\", { callback: res });\r\n      } catch (e) {\r\n        rej(e);\r\n      }\r\n    });\r\n\r\n    if (!window.google?.accounts?.oauth2) {\r\n      await addScript(\"https://accounts.google.com/gsi/client\", { id: \"gis-script\" });\r\n    }\r\n    await waitFor(() => !!window.google?.accounts?.oauth2, 15000, \"google.accounts.oauth2\");\r\n\r\n    // Final check: picker namespace\r\n    await waitFor(() => !!window.google?.picker, 8000, \"google.picker\");\r\n  }, []);\r\n\r\n  /** Initialize the token client once */\r\n  const ensureGsiClient = useCallback(async () => {\r\n    await ensureScripts();\r\n    if (!ENV.GOOGLE_CLIENT_ID) throw new Error(\"Missing REACT_APP_GOOGLE_CLIENT_ID\");\r\n    if (!gsiClientRef.current) {\r\n      gsiClientRef.current = window.google.accounts.oauth2.initTokenClient({\r\n        client_id: ENV.GOOGLE_CLIENT_ID,\r\n        scope: SCOPE,\r\n        prompt: \"\", // use \"\" to avoid popping the account chooser repeatedly\r\n        callback: (resp) => {\r\n          if (resp?.error) {\r\n            err(\"Token error:\", resp.error);\r\n            return;\r\n          }\r\n          tokenRef.current = resp.access_token;\r\n          tokenExpRef.current = Date.now() + 55 * 60 * 1000;\r\n        },\r\n      });\r\n      log(\"GIS client ready\");\r\n    }\r\n  }, [ensureScripts]);\r\n\r\n  /** Retrieve or refresh an access token */\r\n  const getAccessToken = useCallback(async () => {\r\n    if (tokenRef.current && Date.now() < tokenExpRef.current) return tokenRef.current;\r\n    await ensureGsiClient();\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        gsiClientRef.current.callback = (resp) => {\r\n          if (resp?.error) return reject(new Error(resp.error));\r\n          if (!resp?.access_token) return reject(new Error(\"No access token returned\"));\r\n          tokenRef.current = resp.access_token;\r\n          tokenExpRef.current = Date.now() + 55 * 60 * 1000;\r\n          resolve(tokenRef.current);\r\n        };\r\n        // If you still get a silent timeout, try forcing consent:\r\n        // gsiClientRef.current.requestAccessToken({ prompt: \"consent\" });\r\n        gsiClientRef.current.requestAccessToken();\r\n      } catch (e) {\r\n        reject(e);\r\n      }\r\n    });\r\n  }, [ensureGsiClient]);\r\n\r\n  const openPicker = useCallback(async () => {\r\n    try {\r\n      if (!ENV.GOOGLE_API_KEY) throw new Error(\"Missing REACT_APP_GOOGLE_API_KEY\");\r\n      if (!ENV.GOOGLE_CLIENT_ID) throw new Error(\"Missing REACT_APP_GOOGLE_CLIENT_ID\");\r\n      if (!folderId) throw new Error(\"Missing folderId\");\r\n\r\n      setOpening(true);\r\n      await ensureScripts();\r\n\r\n      const token = await getAccessToken();\r\n\r\n      const view = new window.google.picker.DocsUploadView().setIncludeFolders(true);\r\n      view.setParent(folderId);\r\n\r\n      const origin = `${window.location.protocol}//${window.location.host}`;\r\n      const picker = new window.google.picker.PickerBuilder()\r\n        .addView(view)\r\n        .setOAuthToken(token)\r\n        .setDeveloperKey(ENV.GOOGLE_API_KEY)\r\n        .setOrigin(origin)\r\n        .setTitle(\"Upload to Wedding Album\")\r\n        .setSize(Math.round(window.innerWidth * 0.9), Math.min(720, Math.round(window.innerHeight * 0.9)))\r\n        .setCallback((data) => {\r\n          if (data?.action === window.google.picker.Action.PICKED) {\r\n            log(\"Picked:\", data.docs);\r\n            onPicked?.(data.docs || []);\r\n          }\r\n        })\r\n        .build();\r\n\r\n      picker.setVisible(true);\r\n      log(\"Picker opened\");\r\n    } catch (e) {\r\n      err(\"openPicker failed:\", e);\r\n      alert(\r\n        e?.message\r\n          ? `Google Picker error: ${e.message}`\r\n          : \"Google Picker is not available. Reload and try again.\"\r\n      );\r\n    } finally {\r\n      setOpening(false);\r\n    }\r\n  }, [ensureScripts, getAccessToken, folderId, onPicked]);\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={openPicker}\r\n      disabled={opening}\r\n      className={`btn-primary w-full sm:w-auto ${className}`}\r\n      aria-busy={opening ? \"true\" : \"false\"}\r\n      aria-label=\"Open Google Drive file picker\"\r\n    >\r\n      {opening ? \"Opening…\" : label}\r\n    </button>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}