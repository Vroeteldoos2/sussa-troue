{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\drago\\\\OneDrive\\\\Desktop\\\\sussa-troue\\\\src\\\\pages\\\\RSVPPage.jsx\",\n  _s = $RefreshSig$();\n// File: src/pages/RSVPPage.jsx\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { supabase } from \"../supabaseClient\";\nimport { toast } from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BG_URL = \"https://cyxeucwesqzwlisgveiz.supabase.co/storage/v1/object/public/public-assets/flowers-8309997.jpg\";\nexport default function RSVPPage() {\n  _s();\n  const navigate = useNavigate();\n  const [form, setForm] = useState({\n    full_name: \"\",\n    email: \"\",\n    attending: true,\n    dietary: \"\",\n    songs: \"\",\n    has_plus_one: false,\n    plus_one_name: \"\",\n    plus_one_dietary: \"\",\n    has_children: false,\n    children: []\n  });\n  const [authEmail, setAuthEmail] = useState(\"\");\n  const [userId, setUserId] = useState(null);\n  const [behalfList, setBehalfList] = useState([]);\n  const [loading, setLoading] = useState(false); // submit loading\n  const [pageLoading, setPageLoading] = useState(true); // initial page gate\n  const [formErr, setFormErr] = useState(\"\");\n  const isValidEmail = useMemo(() => v => /^\\S+@\\S+\\.\\S+$/.test(v || \"\"), []);\n\n  // ---------- On mount: get user + email, and check if RSVP already exists\n  useEffect(() => {\n    (async () => {\n      setPageLoading(true);\n      const {\n        data,\n        error\n      } = await supabase.auth.getUser();\n      if (error) {\n        console.error(error);\n        toast.error(\"Auth error. Please log in again.\");\n        navigate(\"/login\");\n        return;\n      }\n      const user = (data === null || data === void 0 ? void 0 : data.user) || null;\n      if (!user) {\n        toast(\"Please log in to RSVP.\");\n        navigate(\"/login\");\n        return;\n      }\n      const email = user.email || \"\";\n      const clean = email.toLowerCase().trim();\n      setAuthEmail(clean);\n      setUserId(user.id);\n      setForm(f => ({\n        ...f,\n        email: clean\n      }));\n\n      // Check if RSVP exists by user_id\n      const {\n        data: existing,\n        error: rsvpErr\n      } = await supabase.from(\"rsvps\").select(\"*\").eq(\"user_id\", user.id).limit(1).maybeSingle();\n      if (rsvpErr) {\n        // Don't block the page if thereâ€™s a read error; just log it\n        console.error(rsvpErr);\n      }\n      if (existing) {\n        // Already RSVP'd â€” send to View page\n        navigate(\"/view-rsvp\", {\n          replace: true\n        });\n        return;\n      }\n      setPageLoading(false);\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const setField = (key, val) => setForm(f => ({\n    ...f,\n    [key]: val\n  }));\n  const togglePlusOne = checked => setForm(f => ({\n    ...f,\n    has_plus_one: checked,\n    ...(checked ? {} : {\n      plus_one_name: \"\",\n      plus_one_dietary: \"\"\n    })\n  }));\n  const toggleChildren = checked => setForm(f => ({\n    ...f,\n    has_children: checked,\n    ...(checked ? {} : {\n      children: []\n    })\n  }));\n  const addChild = () => setForm(f => ({\n    ...f,\n    children: [...f.children, {\n      name: \"\",\n      dietary: \"\"\n    }]\n  }));\n  const updateChild = (i, key, val) => setForm(f => {\n    const copy = [...f.children];\n    copy[i] = {\n      ...copy[i],\n      [key]: val\n    };\n    return {\n      ...f,\n      children: copy\n    };\n  });\n  const addBehalfGuest = () => setBehalfList(l => [...l, {\n    full_name: \"\",\n    attending: true,\n    dietary: \"\",\n    songs: \"\"\n  }]);\n  const updateBehalfGuest = (i, key, val) => setBehalfList(l => {\n    const copy = [...l];\n    copy[i] = {\n      ...copy[i],\n      [key]: val\n    };\n    return copy;\n  });\n  const submit = async e => {\n    e.preventDefault();\n    if (loading) return;\n    setFormErr(\"\");\n\n    // MUST have an authenticated user + email\n    if (!userId || !authEmail) {\n      toast.error(\"No account found. Please log in again.\");\n      return;\n    }\n\n    // Basic validation\n    const fullName = (form.full_name || \"\").trim();\n    if (!fullName) return setFormErr(\"Please enter your full name.\");\n    if (!isValidEmail(authEmail)) return setFormErr(\"Your account email looks invalid.\");\n\n    // Normalize payload: lock to auth identity\n    const payload = {\n      ...form,\n      user_id: userId,\n      full_name: fullName,\n      email: authEmail,\n      // locked\n      attending: !!form.attending,\n      has_plus_one: !!form.has_plus_one,\n      has_children: !!form.has_children,\n      submitted_by: authEmail\n    };\n\n    // Clean dependent fields\n    if (!payload.has_plus_one) {\n      payload.plus_one_name = \"\";\n      payload.plus_one_dietary = \"\";\n    }\n    if (!payload.has_children) {\n      payload.children = [];\n    } else if (!Array.isArray(payload.children)) {\n      payload.children = [];\n    }\n    setLoading(true);\n    try {\n      // Insert main RSVP\n      const {\n        error\n      } = await supabase.from(\"rsvps\").insert([payload]);\n      if (error) throw error;\n\n      // Insert behalf-of RSVPs\n      for (const g of behalfList) {\n        const gName = (g.full_name || \"\").trim();\n        if (!gName) continue; // skip empty rows\n        const gPayload = {\n          ...g,\n          full_name: gName,\n          attending: !!g.attending,\n          submitted_by: authEmail,\n          email: authEmail,\n          // keep non-null if your schema requires\n          user_id: null\n        };\n        const {\n          error: e2\n        } = await supabase.from(\"rsvps\").insert([gPayload]);\n        if (e2) throw e2;\n      }\n      toast.success(\"RSVP submitted! ðŸŒ»\");\n      // Key fix: go straight to ViewRSVP after submit\n      navigate(\"/view-rsvp\", {\n        replace: true\n      });\n    } catch (err) {\n      console.error(err);\n      toast.error((err === null || err === void 0 ? void 0 : err.message) || \"Could not submit RSVP. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (pageLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen w-full flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-white/90\",\n        children: \"Loading\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen w-full bg-center bg-cover relative\",\n    style: {\n      backgroundImage: `url(${BG_URL})`\n    },\n    \"aria-hidden\": \"true\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-black/30 backdrop-blur-[1px]\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative z-10 max-w-5xl mx-auto px-4 py-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"text-center my-6 text-white drop-shadow\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-extrabold\",\n          children: [\"RSVP for \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-yellow-200\",\n            children: \"Abraham & Jesse\\u2011Lee\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 22\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white/90\",\n          children: \"We can\\u2019t wait to celebrate with you.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: submit,\n        className: \"bg-white/85 rounded-2xl shadow-xl border border-white/60 p-6 md:p-8 space-y-4\",\n        \"aria-busy\": loading ? \"true\" : \"false\",\n        children: [!!formErr && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2\",\n          role: \"alert\",\n          children: formErr\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block\",\n            htmlFor: \"full_name\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Full name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"full_name\",\n              className: \"input\",\n              placeholder: \"Full Name\",\n              value: form.full_name,\n              onChange: e => setField(\"full_name\", e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block\",\n            htmlFor: \"email\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Email (locked to your account)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"email\",\n              className: \"input opacity-80\",\n              type: \"email\",\n              placeholder: \"Email\",\n              value: form.email,\n              disabled: true,\n              title: \"Email is linked to your account and cannot be changed here.\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid md:grid-cols-2 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block\",\n            htmlFor: \"attending\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Attending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"attending\",\n              className: \"input\",\n              value: String(form.attending),\n              onChange: e => setField(\"attending\", e.target.value === \"true\"),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"true\",\n                children: \"Attending\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"false\",\n                children: \"Not Attending\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block\",\n            htmlFor: \"dietary\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Dietary requirements\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"dietary\",\n              className: \"input\",\n              placeholder: \"Dietary Requirements\",\n              value: form.dietary,\n              onChange: e => setField(\"dietary\", e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block\",\n          htmlFor: \"songs\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sr-only\",\n            children: \"Song requests\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"songs\",\n            className: \"input\",\n            placeholder: \"Song requests (comma-separated)\",\n            value: form.songs,\n            onChange: e => setField(\"songs\", e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-4 bg-white/70 border border-white/60 rounded-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"flex items-center gap-3\",\n            htmlFor: \"has_plus_one\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"has_plus_one\",\n              type: \"checkbox\",\n              checked: form.has_plus_one,\n              onChange: e => togglePlusOne(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold text-soil-700\",\n              children: \"Bringing a plus one?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this), form.has_plus_one && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 grid md:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block\",\n              htmlFor: \"plus_one_name\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"sr-only\",\n                children: \"Plus one name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"plus_one_name\",\n                className: \"input\",\n                placeholder: \"Plus One Name\",\n                value: form.plus_one_name,\n                onChange: e => setField(\"plus_one_name\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block\",\n              htmlFor: \"plus_one_dietary\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"sr-only\",\n                children: \"Plus one dietary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"plus_one_dietary\",\n                className: \"input\",\n                placeholder: \"Plus One Dietary\",\n                value: form.plus_one_dietary,\n                onChange: e => setField(\"plus_one_dietary\", e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-4 bg-white/70 border border-white/60 rounded-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"flex items-center gap-3\",\n            htmlFor: \"has_children\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"has_children\",\n              type: \"checkbox\",\n              checked: form.has_children,\n              onChange: e => toggleChildren(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold text-soil-700\",\n              children: \"Bringing children?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this), form.has_children && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 space-y-3\",\n            children: [form.children.map((c, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid md:grid-cols-2 gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block\",\n                htmlFor: `child_name_${i}`,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"sr-only\",\n                  children: \"Child name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: `child_name_${i}`,\n                  className: \"input\",\n                  placeholder: \"Child Name\",\n                  value: c.name,\n                  onChange: e => updateChild(i, \"name\", e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block\",\n                htmlFor: `child_dietary_${i}`,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"sr-only\",\n                  children: \"Child dietary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: `child_dietary_${i}`,\n                  className: \"input\",\n                  placeholder: \"Child Dietary\",\n                  value: c.dietary,\n                  onChange: e => updateChild(i, \"dietary\", e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 21\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-outline\",\n              onClick: addChild,\n              children: \"+ Add Child\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card p-4 bg-white/70 border border-white/60 rounded-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-bold text-soil-700\",\n              children: \"RSVP on behalf of others\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-outline\",\n              onClick: addBehalfGuest,\n              children: \"+ Add Guest\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 space-y-3\",\n            children: behalfList.map((g, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid md:grid-cols-4 gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block\",\n                htmlFor: `guest_name_${idx}`,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"sr-only\",\n                  children: \"Full name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: `guest_name_${idx}`,\n                  className: \"input\",\n                  placeholder: \"Full Name\",\n                  value: g.full_name,\n                  onChange: e => updateBehalfGuest(idx, \"full_name\", e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block\",\n                htmlFor: `guest_attending_${idx}`,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"sr-only\",\n                  children: \"Attending\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: `guest_attending_${idx}`,\n                  className: \"input\",\n                  value: String(g.attending),\n                  onChange: e => updateBehalfGuest(idx, \"attending\", e.target.value === \"true\"),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"true\",\n                    children: \"Attending\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 434,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"false\",\n                    children: \"Not Attending\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 435,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 422,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block\",\n                htmlFor: `guest_dietary_${idx}`,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"sr-only\",\n                  children: \"Dietary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: `guest_dietary_${idx}`,\n                  className: \"input\",\n                  placeholder: \"Dietary\",\n                  value: g.dietary,\n                  onChange: e => updateBehalfGuest(idx, \"dietary\", e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block\",\n                htmlFor: `guest_songs_${idx}`,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"sr-only\",\n                  children: \"Songs\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: `guest_songs_${idx}`,\n                  className: \"input\",\n                  placeholder: \"Songs\",\n                  value: g.songs,\n                  onChange: e => updateBehalfGuest(idx, \"songs\", e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 19\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            type: \"submit\",\n            disabled: loading,\n            children: loading ? \"Submittingâ€¦\" : \"Submit RSVP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 5\n  }, this);\n}\n_s(RSVPPage, \"8yCzjn1mLenPUHStl6m1iuCczyg=\", false, function () {\n  return [useNavigate];\n});\n_c = RSVPPage;\nvar _c;\n$RefreshReg$(_c, \"RSVPPage\");","map":{"version":3,"names":["useEffect","useMemo","useState","useNavigate","supabase","toast","jsxDEV","_jsxDEV","BG_URL","RSVPPage","_s","navigate","form","setForm","full_name","email","attending","dietary","songs","has_plus_one","plus_one_name","plus_one_dietary","has_children","children","authEmail","setAuthEmail","userId","setUserId","behalfList","setBehalfList","loading","setLoading","pageLoading","setPageLoading","formErr","setFormErr","isValidEmail","v","test","data","error","auth","getUser","console","user","clean","toLowerCase","trim","id","f","existing","rsvpErr","from","select","eq","limit","maybeSingle","replace","setField","key","val","togglePlusOne","checked","toggleChildren","addChild","name","updateChild","i","copy","addBehalfGuest","l","updateBehalfGuest","submit","e","preventDefault","fullName","payload","user_id","submitted_by","Array","isArray","insert","g","gName","gPayload","e2","success","err","message","className","fileName","_jsxFileName","lineNumber","columnNumber","style","backgroundImage","onSubmit","role","htmlFor","placeholder","value","onChange","target","required","type","disabled","title","String","map","c","onClick","idx","_c","$RefreshReg$"],"sources":["C:/Users/drago/OneDrive/Desktop/sussa-troue/src/pages/RSVPPage.jsx"],"sourcesContent":["// File: src/pages/RSVPPage.jsx\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { supabase } from \"../supabaseClient\";\nimport { toast } from \"react-hot-toast\";\n\nconst BG_URL =\n  \"https://cyxeucwesqzwlisgveiz.supabase.co/storage/v1/object/public/public-assets/flowers-8309997.jpg\";\n\nexport default function RSVPPage() {\n  const navigate = useNavigate();\n\n  const [form, setForm] = useState({\n    full_name: \"\",\n    email: \"\",\n    attending: true,\n    dietary: \"\",\n    songs: \"\",\n    has_plus_one: false,\n    plus_one_name: \"\",\n    plus_one_dietary: \"\",\n    has_children: false,\n    children: [],\n  });\n\n  const [authEmail, setAuthEmail] = useState(\"\");\n  const [userId, setUserId] = useState(null);\n  const [behalfList, setBehalfList] = useState([]);\n  const [loading, setLoading] = useState(false); // submit loading\n  const [pageLoading, setPageLoading] = useState(true); // initial page gate\n  const [formErr, setFormErr] = useState(\"\");\n\n  const isValidEmail = useMemo(\n    () => (v) => /^\\S+@\\S+\\.\\S+$/.test(v || \"\"),\n    []\n  );\n\n  // ---------- On mount: get user + email, and check if RSVP already exists\n  useEffect(() => {\n    (async () => {\n      setPageLoading(true);\n      const { data, error } = await supabase.auth.getUser();\n      if (error) {\n        console.error(error);\n        toast.error(\"Auth error. Please log in again.\");\n        navigate(\"/login\");\n        return;\n      }\n\n      const user = data?.user || null;\n      if (!user) {\n        toast(\"Please log in to RSVP.\");\n        navigate(\"/login\");\n        return;\n      }\n\n      const email = user.email || \"\";\n      const clean = email.toLowerCase().trim();\n      setAuthEmail(clean);\n      setUserId(user.id);\n      setForm((f) => ({ ...f, email: clean }));\n\n      // Check if RSVP exists by user_id\n      const { data: existing, error: rsvpErr } = await supabase\n        .from(\"rsvps\")\n        .select(\"*\")\n        .eq(\"user_id\", user.id)\n        .limit(1)\n        .maybeSingle();\n\n      if (rsvpErr) {\n        // Don't block the page if thereâ€™s a read error; just log it\n        console.error(rsvpErr);\n      }\n\n      if (existing) {\n        // Already RSVP'd â€” send to View page\n        navigate(\"/view-rsvp\", { replace: true });\n        return;\n      }\n\n      setPageLoading(false);\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const setField = (key, val) => setForm((f) => ({ ...f, [key]: val }));\n  const togglePlusOne = (checked) =>\n    setForm((f) => ({\n      ...f,\n      has_plus_one: checked,\n      ...(checked ? {} : { plus_one_name: \"\", plus_one_dietary: \"\" }),\n    }));\n  const toggleChildren = (checked) =>\n    setForm((f) => ({\n      ...f,\n      has_children: checked,\n      ...(checked ? {} : { children: [] }),\n    }));\n  const addChild = () =>\n    setForm((f) => ({\n      ...f,\n      children: [...f.children, { name: \"\", dietary: \"\" }],\n    }));\n  const updateChild = (i, key, val) =>\n    setForm((f) => {\n      const copy = [...f.children];\n      copy[i] = { ...copy[i], [key]: val };\n      return { ...f, children: copy };\n    });\n\n  const addBehalfGuest = () =>\n    setBehalfList((l) => [\n      ...l,\n      { full_name: \"\", attending: true, dietary: \"\", songs: \"\" },\n    ]);\n  const updateBehalfGuest = (i, key, val) =>\n    setBehalfList((l) => {\n      const copy = [...l];\n      copy[i] = { ...copy[i], [key]: val };\n      return copy;\n    });\n\n  const submit = async (e) => {\n    e.preventDefault();\n    if (loading) return;\n    setFormErr(\"\");\n\n    // MUST have an authenticated user + email\n    if (!userId || !authEmail) {\n      toast.error(\"No account found. Please log in again.\");\n      return;\n    }\n\n    // Basic validation\n    const fullName = (form.full_name || \"\").trim();\n    if (!fullName) return setFormErr(\"Please enter your full name.\");\n    if (!isValidEmail(authEmail))\n      return setFormErr(\"Your account email looks invalid.\");\n\n    // Normalize payload: lock to auth identity\n    const payload = {\n      ...form,\n      user_id: userId,\n      full_name: fullName,\n      email: authEmail, // locked\n      attending: !!form.attending,\n      has_plus_one: !!form.has_plus_one,\n      has_children: !!form.has_children,\n      submitted_by: authEmail,\n    };\n\n    // Clean dependent fields\n    if (!payload.has_plus_one) {\n      payload.plus_one_name = \"\";\n      payload.plus_one_dietary = \"\";\n    }\n    if (!payload.has_children) {\n      payload.children = [];\n    } else if (!Array.isArray(payload.children)) {\n      payload.children = [];\n    }\n\n    setLoading(true);\n    try {\n      // Insert main RSVP\n      const { error } = await supabase.from(\"rsvps\").insert([payload]);\n      if (error) throw error;\n\n      // Insert behalf-of RSVPs\n      for (const g of behalfList) {\n        const gName = (g.full_name || \"\").trim();\n        if (!gName) continue; // skip empty rows\n        const gPayload = {\n          ...g,\n          full_name: gName,\n          attending: !!g.attending,\n          submitted_by: authEmail,\n          email: authEmail, // keep non-null if your schema requires\n          user_id: null,\n        };\n        const { error: e2 } = await supabase.from(\"rsvps\").insert([gPayload]);\n        if (e2) throw e2;\n      }\n\n      toast.success(\"RSVP submitted! ðŸŒ»\");\n      // Key fix: go straight to ViewRSVP after submit\n      navigate(\"/view-rsvp\", { replace: true });\n    } catch (err) {\n      console.error(err);\n      toast.error(err?.message || \"Could not submit RSVP. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (pageLoading) {\n    return (\n      <div className=\"min-h-screen w-full flex items-center justify-center\">\n        <p className=\"text-white/90\">Loadingâ€¦</p>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className=\"min-h-screen w-full bg-center bg-cover relative\"\n      style={{ backgroundImage: `url(${BG_URL})` }}\n      aria-hidden=\"true\"\n    >\n      {/* Soft grey overlay to match auth pages */}\n      <div className=\"absolute inset-0 bg-black/30 backdrop-blur-[1px]\" />\n\n      <div className=\"relative z-10 max-w-5xl mx-auto px-4 py-10\">\n        {/* Header */}\n        <header className=\"text-center my-6 text-white drop-shadow\">\n          <h1 className=\"text-3xl font-extrabold\">\n            RSVP for <span className=\"text-yellow-200\">Abraham & Jesseâ€‘Lee</span>\n          </h1>\n          <p className=\"text-white/90\">We canâ€™t wait to celebrate with you.</p>\n        </header>\n\n        {/* Card */}\n        <form\n          onSubmit={submit}\n          className=\"bg-white/85 rounded-2xl shadow-xl border border-white/60 p-6 md:p-8 space-y-4\"\n          aria-busy={loading ? \"true\" : \"false\"}\n        >\n          {!!formErr && (\n            <div\n              className=\"text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2\"\n              role=\"alert\"\n            >\n              {formErr}\n            </div>\n          )}\n\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <label className=\"block\" htmlFor=\"full_name\">\n              <span className=\"sr-only\">Full name</span>\n              <input\n                id=\"full_name\"\n                className=\"input\"\n                placeholder=\"Full Name\"\n                value={form.full_name}\n                onChange={(e) => setField(\"full_name\", e.target.value)}\n                required\n              />\n            </label>\n\n            <label className=\"block\" htmlFor=\"email\">\n              <span className=\"sr-only\">Email (locked to your account)</span>\n              <input\n                id=\"email\"\n                className=\"input opacity-80\"\n                type=\"email\"\n                placeholder=\"Email\"\n                value={form.email}\n                disabled\n                title=\"Email is linked to your account and cannot be changed here.\"\n                required\n              />\n            </label>\n          </div>\n\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <label className=\"block\" htmlFor=\"attending\">\n              <span className=\"sr-only\">Attending</span>\n              <select\n                id=\"attending\"\n                className=\"input\"\n                value={String(form.attending)}\n                onChange={(e) =>\n                  setField(\"attending\", e.target.value === \"true\")\n                }\n              >\n                <option value=\"true\">Attending</option>\n                <option value=\"false\">Not Attending</option>\n              </select>\n            </label>\n\n            <label className=\"block\" htmlFor=\"dietary\">\n              <span className=\"sr-only\">Dietary requirements</span>\n              <input\n                id=\"dietary\"\n                className=\"input\"\n                placeholder=\"Dietary Requirements\"\n                value={form.dietary}\n                onChange={(e) => setField(\"dietary\", e.target.value)}\n              />\n            </label>\n          </div>\n\n          <label className=\"block\" htmlFor=\"songs\">\n            <span className=\"sr-only\">Song requests</span>\n            <input\n              id=\"songs\"\n              className=\"input\"\n              placeholder=\"Song requests (comma-separated)\"\n              value={form.songs}\n              onChange={(e) => setField(\"songs\", e.target.value)}\n            />\n          </label>\n\n          {/* Plus One */}\n          <div className=\"card p-4 bg-white/70 border border-white/60 rounded-xl\">\n            <label className=\"flex items-center gap-3\" htmlFor=\"has_plus_one\">\n              <input\n                id=\"has_plus_one\"\n                type=\"checkbox\"\n                checked={form.has_plus_one}\n                onChange={(e) => togglePlusOne(e.target.checked)}\n              />\n              <span className=\"font-semibold text-soil-700\">\n                Bringing a plus one?\n              </span>\n            </label>\n            {form.has_plus_one && (\n              <div className=\"mt-3 grid md:grid-cols-2 gap-4\">\n                <label className=\"block\" htmlFor=\"plus_one_name\">\n                  <span className=\"sr-only\">Plus one name</span>\n                  <input\n                    id=\"plus_one_name\"\n                    className=\"input\"\n                    placeholder=\"Plus One Name\"\n                    value={form.plus_one_name}\n                    onChange={(e) => setField(\"plus_one_name\", e.target.value)}\n                  />\n                </label>\n                <label className=\"block\" htmlFor=\"plus_one_dietary\">\n                  <span className=\"sr-only\">Plus one dietary</span>\n                  <input\n                    id=\"plus_one_dietary\"\n                    className=\"input\"\n                    placeholder=\"Plus One Dietary\"\n                    value={form.plus_one_dietary}\n                    onChange={(e) =>\n                      setField(\"plus_one_dietary\", e.target.value)\n                    }\n                  />\n                </label>\n              </div>\n            )}\n          </div>\n\n          {/* Children */}\n          <div className=\"card p-4 bg-white/70 border border-white/60 rounded-xl\">\n            <label className=\"flex items-center gap-3\" htmlFor=\"has_children\">\n              <input\n                id=\"has_children\"\n                type=\"checkbox\"\n                checked={form.has_children}\n                onChange={(e) => toggleChildren(e.target.checked)}\n              />\n              <span className=\"font-semibold text-soil-700\">\n                Bringing children?\n              </span>\n            </label>\n\n            {form.has_children && (\n              <div className=\"mt-3 space-y-3\">\n                {form.children.map((c, i) => (\n                  <div key={i} className=\"grid md:grid-cols-2 gap-3\">\n                    <label className=\"block\" htmlFor={`child_name_${i}`}>\n                      <span className=\"sr-only\">Child name</span>\n                      <input\n                        id={`child_name_${i}`}\n                        className=\"input\"\n                        placeholder=\"Child Name\"\n                        value={c.name}\n                        onChange={(e) => updateChild(i, \"name\", e.target.value)}\n                      />\n                    </label>\n                    <label className=\"block\" htmlFor={`child_dietary_${i}`}>\n                      <span className=\"sr-only\">Child dietary</span>\n                      <input\n                        id={`child_dietary_${i}`}\n                        className=\"input\"\n                        placeholder=\"Child Dietary\"\n                        value={c.dietary}\n                        onChange={(e) =>\n                          updateChild(i, \"dietary\", e.target.value)\n                        }\n                      />\n                    </label>\n                  </div>\n                ))}\n                <button type=\"button\" className=\"btn-outline\" onClick={addChild}>\n                  + Add Child\n                </button>\n              </div>\n            )}\n          </div>\n\n          {/* RSVP on behalf of others */}\n          <div className=\"card p-4 bg-white/70 border border-white/60 rounded-xl\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"font-bold text-soil-700\">RSVP on behalf of others</h3>\n              <button type=\"button\" className=\"btn-outline\" onClick={addBehalfGuest}>\n                + Add Guest\n              </button>\n            </div>\n\n            <div className=\"mt-3 space-y-3\">\n              {behalfList.map((g, idx) => (\n                <div key={idx} className=\"grid md:grid-cols-4 gap-3\">\n                  <label className=\"block\" htmlFor={`guest_name_${idx}`}>\n                    <span className=\"sr-only\">Full name</span>\n                    <input\n                      id={`guest_name_${idx}`}\n                      className=\"input\"\n                      placeholder=\"Full Name\"\n                      value={g.full_name}\n                      onChange={(e) =>\n                        updateBehalfGuest(idx, \"full_name\", e.target.value)\n                      }\n                    />\n                  </label>\n\n                  <label className=\"block\" htmlFor={`guest_attending_${idx}`}>\n                    <span className=\"sr-only\">Attending</span>\n                    <select\n                      id={`guest_attending_${idx}`}\n                      className=\"input\"\n                      value={String(g.attending)}\n                      onChange={(e) =>\n                        updateBehalfGuest(\n                          idx,\n                          \"attending\",\n                          e.target.value === \"true\"\n                        )\n                      }\n                    >\n                      <option value=\"true\">Attending</option>\n                      <option value=\"false\">Not Attending</option>\n                    </select>\n                  </label>\n\n                  <label className=\"block\" htmlFor={`guest_dietary_${idx}`}>\n                    <span className=\"sr-only\">Dietary</span>\n                    <input\n                      id={`guest_dietary_${idx}`}\n                      className=\"input\"\n                      placeholder=\"Dietary\"\n                      value={g.dietary}\n                      onChange={(e) => updateBehalfGuest(idx, \"dietary\", e.target.value)}\n                    />\n                  </label>\n\n                  <label className=\"block\" htmlFor={`guest_songs_${idx}`}>\n                    <span className=\"sr-only\">Songs</span>\n                    <input\n                      id={`guest_songs_${idx}`}\n                      className=\"input\"\n                      placeholder=\"Songs\"\n                      value={g.songs}\n                      onChange={(e) => updateBehalfGuest(idx, \"songs\", e.target.value)}\n                    />\n                  </label>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"flex justify-end\">\n            <button className=\"btn-primary\" type=\"submit\" disabled={loading}>\n              {loading ? \"Submittingâ€¦\" : \"Submit RSVP\"}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}